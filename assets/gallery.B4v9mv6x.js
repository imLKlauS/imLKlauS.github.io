const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/YunGallery.oGYytGP9.js","assets/framework.GzYmdVjK.js","assets/app.C9UN2hmH.js","assets/chunks/vue-router.DwHde2Fu.js","assets/chunks/@vueuse/motion.D4J2SB46.js","assets/chunks/dayjs.Dto65haK.js","assets/chunks/vue-i18n.BvWwj3SI.js","assets/chunks/pinia.BcfqlbOB.js","assets/chunks/nprogress.W5IEJXTh.js","assets/app.CPWyP5rc.css","assets/group-icons.Bm1YPxXM.css","assets/YunPageHeader.vue_vue_type_script_setup_true_lang.KHJRstPN.js"])))=>i.map(i=>d[i]);
import{I as e,a0 as t,a1 as a,a2 as o,H as r,A as l,a8 as s,a5 as n,ah as u,ai as i,aj as c,aa as p,W as d,ak as y,al as v,a3 as h,ad as m,ab as f,F as _,L as g,_ as w}from"./framework.GzYmdVjK.js";import{i as b,a as k,b as x,d as j,e as A,v as C,w as P,_ as E,g as K,h as O}from"./app.C9UN2hmH.js";import"./chunks/@vueuse/motion.D4J2SB46.js";import"./chunks/dayjs.Dto65haK.js";import{_ as S}from"./YunPageHeader.vue_vue_type_script_setup_true_lang.KHJRstPN.js";import{u as B,a as D}from"./chunks/vue-router.DwHde2Fu.js";import{u as T}from"./chunks/vue-i18n.BvWwj3SI.js";function V(){const e=b(),{encrypt:t}=e.value,a=Uint8Array.from(Object.values(t.iv)),o=Uint8Array.from(Object.values(t.salt));return{decrypt:async(e,t)=>{if(!e)return;const r=await function(e){const t=new TextEncoder;return window.crypto.subtle.importKey("raw",t.encode(e),"PBKDF2",!1,["deriveBits","deriveKey"])}(e),l=await function(e,t){return window.crypto.subtle.deriveKey({name:"PBKDF2",salt:t,iterations:1e5,hash:"SHA-256"},e,{name:"AES-CBC",length:256},!0,["encrypt","decrypt"])}(r,o),s=Uint8Array.from(t,e=>e.charCodeAt(0)),n=await window.crypto.subtle.decrypt({name:"AES-CBC",iv:a},l,s);return(new TextDecoder).decode(n)}}}const G=e({__name:"YunGallery",props:{photos:{}},setup:e=>(r,l)=>{const s=t("VAGallery");return o(),a(s,{photos:e.photos},null,8,["photos"])}}),R={key:0,"w-full":"","pt-14":"","pb-10":""},U={class:"decrypt-password-container w-full sm:w-1/2","flex-center":"","m-auto":"",relative:""},F={key:1},H=e({__name:"ValaxyGalleryDecrypt",props:{encryptedPhotos:{}},setup(e,{expose:t}){const a=e,y=r(""),v=r(""),h=r(!1),{decrypt:m}=V();async function f(){const e=a.encryptedPhotos;if(e)try{const t=await m(y.value,e);v.value=t||""}catch(t){h.value=!0}}function _(){v.value="",y.value=""}const g=l(()=>JSON.parse(v.value||"[]")||[]);return t({photos:g}),(e,t)=>{const a=G;return o(),s("div",null,[v.value?(o(),s("div",F,[d(a,{photos:g.value},null,8,["photos"]),n("div",{"w-full":"","text-center":"","mt-8":""},[n("button",{"m-auto":"",class:"btn","font-bold":"",onClick:_}," Encrypt Again ")])])):(o(),s("div",R,[n("div",U,[u(n("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>y.value=e),"w-full":"",border:"","pl-5":"","pr-11":"","py-3":"",rounded:"","hover:shadow":"",transition:"",type:"password",placeholder:"Enter password",class:p(h.value&&"border-red"),onInput:t[1]||(t[1]=e=>h.value=!1),onKeyup:c(f,["enter"])},null,34),[[i,y.value]]),n("div",{"cursor-pointer":"",absolute:"","text-2xl":"","i-ri-arrow-right-circle-line":"","right-3":"","text-gray":"","hover:text-black":"",onClick:f})])]))])}}}),I={text:"center",class:"yun-text-light",p:"2"},Y={class:"page-action",text:"center"},L=["title"],z=e({__name:"gallery",setup(e){const r=B(),{t:u}=T(),i=k(),c=x(i);j([A({"@type":"CollectionPage"})]);const p=D(),b=l(()=>p.meta.frontmatter.photos||[]),V=C().value.addons["valaxy-addon-lightgallery"]?y(()=>w(()=>import("./YunGallery.oGYytGP9.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))):()=>null,G=P(),R=v("galleryRef"),U=l(()=>b.value.length||R.value?.photos.length);return(e,l)=>{const p=E,y=S,v=H,w=t("RouterView"),k=K,x=O;return o(),s(g,null,[d(k,null,{default:h(()=>[d(p),d(w,null,{default:h(({Component:e})=>[(o(),a(m(e),null,{"main-header":h(()=>[d(y,{title:_(c)||_(u)("title.gallery"),icon:_(i).icon||"i-ri-gallery-line",color:_(i).color,"page-title-class":_(i).pageTitleClass},null,8,["title","icon","color","page-title-class"])]),default:h(()=>[n("div",I,f(_(u)("counter.photos",U.value||0)),1),n("div",Y,[n("a",{class:"yun-icon-btn",title:_(u)("accessibility.back"),onClick:l[0]||(l[0]=()=>_(r).back())},[...l[1]||(l[1]=[n("div",{"i-ri-arrow-go-back-line":""},null,-1)])],8,L)]),_(G)?(o(),a(v,{key:0,ref_key:"galleryRef",ref:R,"encrypted-photos":_(G)},null,8,["encrypted-photos"])):(o(),a(_(V),{key:1,photos:b.value},null,8,["photos"]))]),_:1}))]),_:1})]),_:1}),d(x)],64)}}}),J=Object.freeze(Object.defineProperty({__proto__:null,default:z},Symbol.toStringTag,{value:"Module"}));export{G as _,J as g};
