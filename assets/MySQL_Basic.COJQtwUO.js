var y=(e,p,k)=>new Promise((r,d)=>{var E=a=>{try{n(k.next(a))}catch(l){d(l)}},g=a=>{try{n(k.throw(a))}catch(l){d(l)}},n=a=>a.done?r(a.value):Promise.resolve(a.value).then(E,g);n((k=k.apply(e,p)).next())});import{_ as u}from"./ValaxyMain.vue_vue_type_style_index_0_lang.VDuz3VKX.js";import"./chunks/@vueuse/motion.C0680yyY.js";import{d as F,a as A,u as D}from"./chunks/vue-router.BkAbAJBt.js";import{a1 as c,a3 as t,a4 as h,a5 as i,a6 as C,a7 as s,F as b,a2 as m,Z as B}from"./framework.CyQERZzy.js";import"./app.Bo4Gu_M_.js";import"./chunks/dayjs.BSMtxqtT.js";import"./chunks/vue-i18n.CvwbWgfE.js";import"./chunks/pinia.CyvRWuDa.js";import"./chunks/nprogress.c3ZdlDjC.js";/* empty css                    */import"./YunComment.vue_vue_type_style_index_0_lang.BUN7uaSK.js";import"./index.C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.Du2MZPyS.js";import"./post.f6e3TT_X.js";const L=F("/posts/MySQL_Basic",e=>y(null,null,function*(){return JSON.parse('{"title":"MySQL - 简介与架构","description":"","frontmatter":{"title":"MySQL - 简介与架构","author":"imklaus","tags":["SQL"],"categories":["MySQL","基础篇"],"date":"2025-3-19 00:01:20","outline":"deep","excerpt_type":"html","end":true},"headers":[],"relativePath":"pages/posts/MySQL_Basic.md","lastUpdated":null}')}),{lazy:(e,p)=>e.name===p.name}),W={__name:"MySQL_Basic",setup(e,{expose:p}){var n;const{data:k}=L(),r=D(),d=A(),E=Object.assign(d.meta.frontmatter||{},((n=k.value)==null?void 0:n.frontmatter)||{});return r.currentRoute.value.data=k.value,B("valaxy:frontmatter",E),globalThis.$frontmatter=E,p({frontmatter:{title:"MySQL - 简介与架构",author:"imklaus",tags:["SQL"],categories:["MySQL","基础篇"],date:"2025-3-19 00:01:20",outline:"deep",excerpt_type:"html",end:!0}}),(a,l)=>{const o=u;return m(),c(o,{frontmatter:b(E)},{"main-content-md":t(()=>[l[0]||(l[0]=i("h2",{id:"简介",tabindex:"-1"},[s("简介 "),i("a",{class:"header-anchor",href:"#简介","aria-label":'Permalink to "简介"'},"​")],-1)),l[1]||(l[1]=i("h3",{id:"数据库",tabindex:"-1"},[s("数据库 "),i("a",{class:"header-anchor",href:"#数据库","aria-label":'Permalink to "数据库"'},"​")],-1)),l[2]||(l[2]=i("p",null,"数据库：DataBase，简称 DB，存储和管理数据的仓库",-1)),l[3]||(l[3]=i("p",null,"数据库的优势：",-1)),l[4]||(l[4]=i("ul",null,[i("li",null,"可以持久化存储数据"),i("li",null,"方便存储和管理数据"),i("li",null,"使用了统一的方式操作数据库 SQL")],-1)),l[5]||(l[5]=i("p",null,"数据库、数据表、数据的关系介绍：",-1)),l[6]||(l[6]=i("ul",null,[i("li",null,[i("p",null,"数据库"),i("ul",null,[i("li",null,"用于存储和管理数据的仓库"),i("li",null,"一个库中可以包含多个数据表")])]),i("li",null,[i("p",null,"数据表"),i("ul",null,[i("li",null,"数据库最重要的组成部分之一"),i("li",null,"由纵向的列和横向的行组成（类似 excel 表格）"),i("li",null,"可以指定列名、数据类型、约束等"),i("li",null,"一个表中可以存储多条数据")])]),i("li",null,[i("p",null,"数据：想要永久化存储的数据")])],-1)),l[7]||(l[7]=i("p",null,[s("参考视频："),i("a",{href:"https://www.bilibili.com/video/BV1zJ411M7TB",target:"_blank",rel:"noreferrer"},"https://www.bilibili.com/video/BV1zJ411M7TB")],-1)),l[8]||(l[8]=i("p",null,[s("参考专栏："),i("a",{href:"https://time.geekbang.org/column/intro/139",target:"_blank",rel:"noreferrer"},"https://time.geekbang.org/column/intro/139")],-1)),l[9]||(l[9]=i("p",null,[s("参考书籍："),i("a",{href:"https://book.douban.com/subject/35231266/",target:"_blank",rel:"noreferrer"},"https://book.douban.com/subject/35231266/")],-1)),C(" more "),l[10]||(l[10]=i("hr",null,null,-1)),l[11]||(l[11]=i("h3",{id:"mysql",tabindex:"-1"},[s("MySQL "),i("a",{class:"header-anchor",href:"#mysql","aria-label":'Permalink to "MySQL"'},"​")],-1)),l[12]||(l[12]=i("p",null,"MySQL 数据库是一个最流行的关系型数据库管理系统之一，关系型数据库是将数据保存在不同的数据表中，而且表与表之间可以有关联关系，提高了灵活性",-1)),l[13]||(l[13]=i("p",null,"缺点：数据存储在磁盘中，导致读写性能差，而且数据关系复杂，扩展性差",-1)),l[14]||(l[14]=i("p",null,"MySQL 所使用的 SQL 语句是用于访问数据库最常用的标准化语言",-1)),l[15]||(l[15]=i("p",null,"MySQL 配置：",-1)),l[16]||(l[16]=i("ul",null,[i("li",null,[i("p",null,[s("MySQL 安装："),i("a",{href:"https://www.jianshu.com/p/ba48f1e386f0",target:"_blank",rel:"noreferrer"},"https://www.jianshu.com/p/ba48f1e386f0")])]),i("li",null,[i("p",null,"MySQL 配置："),i("ul",null,[i("li",null,[i("p",null,"修改 MySQL 默认字符集：安装 MySQL 之后第一件事就是修改字符集编码"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"vim "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"etc"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"mysql"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"my"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"cnf")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"添加如下内容：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[mysqld]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"character-set-server="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"utf8")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"collation"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-server="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"utf8_general_ci")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[client]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"default-character-set="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"utf8")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"启动 MySQL 服务："),i("div",{class:"language-shell max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"shell"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"systemctl"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," start/restart"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," mysql")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"登录 MySQL："),i("div",{class:"language-shell max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"shell"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mysql"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -u"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," root"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -p"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"  敲回车，输入密码")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"初始密码查看：cat"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /var/log/mysqld.log")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"在root@localhost:"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"   后面的就是初始密码")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"查看默认字符集命令："),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"SHOW VARIABLES "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"LIKE"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 'char%'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"修改MySQL登录密码："),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"set"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," global"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," validate_password_policy"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"set"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," global"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," validate_password_length"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"set"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," password=password"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'密码'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"授予远程连接权限（MySQL 内输入）："),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 授权")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"grant"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," all privileges "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"on"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," to"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 'root'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," @"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'%'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," identified "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"by"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," '密码'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 刷新")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"flush privileges;")])])]),i("button",{class:"code-block-unfold-btn"})])])])]),i("li",null,[i("p",null,"修改 MySQL 绑定 IP："),i("div",{class:"language-shell max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"shell"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"cd"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /etc/mysql/mysql.conf.d")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," chmod"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 666"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," mysqld.cnf"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vim"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," mysqld.cnf"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# bind-address = 127.0.0.1注释该行")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"关闭 Linux 防火墙"),i("div",{class:"language-shell max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"shell"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"systemctl"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," stop"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," firewalld.service")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 放行3306端口")])])]),i("button",{class:"code-block-unfold-btn"})])])],-1)),l[17]||(l[17]=i("hr",null,null,-1)),l[18]||(l[18]=i("h2",{id:"体系架构",tabindex:"-1"},[s("体系架构 "),i("a",{class:"header-anchor",href:"#体系架构","aria-label":'Permalink to "体系架构"'},"​")],-1)),l[19]||(l[19]=i("h3",{id:"整体架构",tabindex:"-1"},[s("整体架构 "),i("a",{class:"header-anchor",href:"#整体架构","aria-label":'Permalink to "整体架构"'},"​")],-1)),l[20]||(l[20]=i("p",null,"体系结构详解：",-1)),l[21]||(l[21]=i("ul",null,[i("li",null,[s("第一层：网络连接层 "),i("ul",null,[i("li",null,"一些客户端和链接服务，包含本地 Socket 通信和大多数基于客户端/服务端工具实现的 TCP/IP 通信，主要完成一些类似于连接处理、授权认证、及相关的安全方案"),i("li",null,[s("在该层上引入了"),i("strong",null,"连接池"),s(" Connection Pool 的概念，管理缓冲用户连接，线程处理等需要缓存的需求")]),i("li",null,"在该层上实现基于 SSL 的安全链接，服务器也会为安全接入的每个客户端验证它所具有的操作权限")])])],-1)),l[22]||(l[22]=i("ul",null,[i("li",null,[s("第二层：核心服务层 "),i("ul",null,[i("li",null,[s("查询缓存、分析器、优化器、执行器等，涵盖 MySQL 的大多数核心服务功能，所有的内置函数（日期、数学、加密函数等） "),i("ul",null,[i("li",null,"Management Serveices & Utilities：系统管理和控制工具，备份、安全、复制、集群等"),i("li",null,"SQL Interface：接受用户的 SQL 命令，并且返回用户需要查询的结果"),i("li",null,"Parser：SQL 语句分析器"),i("li",null,"Optimizer：查询优化器"),i("li",null,"Caches & Buffers：查询缓存，服务器会查询内部的缓存，如果缓存空间足够大，可以在大量读操作的环境中提升系统性能")])]),i("li",null,[s("所有"),i("strong",null,"跨存储引擎的功能"),s("在这一层实现，如存储过程、触发器、视图等")]),i("li",null,"在该层服务器会解析查询并创建相应的内部解析树，并对其完成相应的优化如确定表的查询顺序，是否利用索引等， 最后生成相应的执行操作"),i("li",null,[s("MySQL 中服务器层不管理事务，"),i("strong",null,"事务是由存储引擎实现的")])])]),i("li",null,[s("第三层：存储引擎层 "),i("ul",null,[i("li",null,"Pluggable Storage Engines：存储引擎接口，MySQL 区别于其他数据库的重要特点就是其存储引擎的架构模式是插件式的（存储引擎是基于表的，而不是数据库）"),i("li",null,[s("存储引擎"),i("strong",null,"真正的负责了 MySQL 中数据的存储和提取"),s("，服务器通过 API 和存储引擎进行通信")]),i("li",null,"不同的存储引擎具有不同的功能，共用一个 Server 层，可以根据开发的需要，来选取合适的存储引擎")])]),i("li",null,[s("第四层：系统文件层 "),i("ul",null,[i("li",null,"数据存储层，主要是将数据存储在文件系统之上，并完成与存储引擎的交互"),i("li",null,"File System：文件系统，保存配置文件、数据文件、日志文件、错误文件、二进制文件等")])])],-1)),l[23]||(l[23]=i("figure",null,[i("img",{src:"https://gcore.jsdelivr.net/gh/imLKlauS/blog-picture@main/blogs/image-20250319234059758.png",alt:"image-20250319234059758",loading:"lazy",decoding:"async",class:"lazy"})],-1)),l[24]||(l[24]=i("hr",null,null,-1)),l[25]||(l[25]=i("h3",{id:"建立连接",tabindex:"-1"},[s("建立连接 "),i("a",{class:"header-anchor",href:"#建立连接","aria-label":'Permalink to "建立连接"'},"​")],-1)),l[26]||(l[26]=i("h4",{id:"连接器",tabindex:"-1"},[s("连接器 "),i("a",{class:"header-anchor",href:"#连接器","aria-label":'Permalink to "连接器"'},"​")],-1)),l[27]||(l[27]=i("p",null,"池化技术：对于访问数据库来说，建立连接的代价是比较昂贵的，因为每个连接对应一个用来交互的线程，频繁的创建关闭连接比较耗费资源，有必要建立数据库连接池，以提高访问的性能",-1)),l[28]||(l[28]=i("p",null,[s("连接建立 TCP 以后需要做"),i("strong",null,"权限验证"),s("，验证成功后可以进行执行 SQL。如果这时管理员账号对这个用户的权限做了修改，也不会影响已经存在连接的权限，只有再新建的连接才会使用新的权限设置")],-1)),l[29]||(l[29]=i("p",null,"MySQL 服务器可以同时和多个客户端进行交互，所以要保证每个连接会话的隔离性（事务机制部分详解）",-1)),l[30]||(l[30]=i("p",null,"整体的执行流程：",-1)),l[31]||(l[31]=i("figure",null,[i("img",{src:"https://gcore.jsdelivr.net/gh/imLKlauS/blog-picture@main/blogs/image-20250319234144374.png",alt:"image-20250319234144374",loading:"lazy",decoding:"async",class:"lazy"})],-1)),l[32]||(l[32]=i("hr",null,null,-1)),l[33]||(l[33]=i("h4",{id:"权限信息",tabindex:"-1"},[s("权限信息 "),i("a",{class:"header-anchor",href:"#权限信息","aria-label":'Permalink to "权限信息"'},"​")],-1)),l[34]||(l[34]=i("p",null,"grant 语句会同时修改数据表和内存，判断权限的时候使用的是内存数据",-1)),l[35]||(l[35]=i("p",null,"flush privileges 语句本身会用数据表（磁盘）的数据重建一份内存权限数据，所以在权限数据可能存在不一致的情况下使用，这种不一致往往是由于直接用 DML 语句操作系统权限表导致的，所以尽量不要使用这类语句",-1)),l[36]||(l[36]=i("figure",null,[i("img",{src:"https://gcore.jsdelivr.net/gh/imLKlauS/blog-picture@main/blogs/image-20250319234950483.png",alt:"image-20250319234950483",loading:"lazy",decoding:"async",class:"lazy"})],-1)),l[37]||(l[37]=i("hr",null,null,-1)),l[38]||(l[38]=i("h4",{id:"连接状态",tabindex:"-1"},[s("连接状态 "),i("a",{class:"header-anchor",href:"#连接状态","aria-label":'Permalink to "连接状态"'},"​")],-1)),l[39]||(l[39]=i("p",null,[s("客户端如果长时间没有操作，连接器就会自动断开，时间是由参数 wait_timeout 控制的，默认值是 8 小时。如果在连接被断开之后，客户端"),i("strong",null,"再次发送请求"),s("的话，就会收到一个错误提醒："),i("code",null,"Lost connection to MySQL server during query")],-1)),l[40]||(l[40]=i("p",null,"数据库里面，长连接是指连接成功后，如果客户端持续有请求，则一直使用同一个连接；短连接则是指每次执行完很少的几次查询就断开连接，下次查询再重新建立一个",-1)),l[41]||(l[41]=i("p",null,[s("为了减少连接的创建，推荐使用长连接，但是"),i("strong",null,"过多的长连接会造成 OOM"),s("，解决方案：")],-1)),l[42]||(l[42]=i("ul",null,[i("li",null,[i("p",null,"定期断开长连接，使用一段时间，或者程序里面判断执行过一个占用内存的大查询后，断开连接，之后要查询再重连"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"KILL"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," CONNECTION"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," id")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"MySQL 5.7 版本，可以在每次执行一个比较大的操作后，通过执行 mysql_reset_connection 来重新初始化连接资源，这个过程不需要重连和重新做权限验证，但是会将连接恢复到刚刚创建完时的状态")])],-1)),l[43]||(l[43]=i("p",null,"SHOW PROCESSLIST：查看当前 MySQL 在进行的线程，可以实时地查看 SQL 的执行情况，其中的 Command 列显示为 Sleep 的这一行，就表示现在系统里面有一个空闲连接",-1)),l[44]||(l[44]=i("figure",null,[i("img",{src:"https://gcore.jsdelivr.net/gh/imLKlauS/blog-picture@main/blogs/image-20250319234249865.png",alt:"image-20250319234249865",loading:"lazy",decoding:"async",class:"lazy"})],-1)),l[45]||(l[45]=i("table",null,[i("thead",null,[i("tr",null,[i("th",null,"参数"),i("th",null,"含义")])]),i("tbody",null,[i("tr",null,[i("td",null,"ID"),i("td",null,"用户登录 mysql 时系统分配的 connection_id，可以使用函数 connection_id() 查看")]),i("tr",null,[i("td",null,"User"),i("td",null,"显示当前用户，如果不是 root，这个命令就只显示用户权限范围的 sql 语句")]),i("tr",null,[i("td",null,"Host"),i("td",null,"显示这个语句是从哪个 ip 的哪个端口上发的，可以用来跟踪出现问题语句的用户")]),i("tr",null,[i("td",null,"db"),i("td",null,"显示这个进程目前连接的是哪个数据库")]),i("tr",null,[i("td",null,"Command"),i("td",null,"显示当前连接的执行的命令，一般取值为休眠 Sleep、查询 Query、连接 Connect 等")]),i("tr",null,[i("td",null,"Time"),i("td",null,"显示这个状态持续的时间，单位是秒")]),i("tr",null,[i("td",null,"State"),i("td",null,"显示使用当前连接的 sql 语句的状态，以查询为例，需要经过 copying to tmp table、sorting result、sending data等状态才可以完成")]),i("tr",null,[i("td",null,"Info"),i("td",null,"显示执行的 sql 语句，是判断问题语句的一个重要依据")])])],-1)),l[46]||(l[46]=i("p",null,[i("strong",null,"Sending data 状态"),s("表示 MySQL 线程开始访问数据行并把结果返回给客户端，而不仅仅只是返回给客户端，是处于执行器过程中的任意阶段。由于在 Sending data 状态下，MySQL 线程需要做大量磁盘读取操作，所以是整个查询中耗时最长的状态")],-1)),l[47]||(l[47]=i("hr",null,null,-1)),l[48]||(l[48]=i("h3",{id:"执行流程",tabindex:"-1"},[s("执行流程 "),i("a",{class:"header-anchor",href:"#执行流程","aria-label":'Permalink to "执行流程"'},"​")],-1)),l[49]||(l[49]=i("h4",{id:"查询缓存",tabindex:"-1"},[s("查询缓存 "),i("a",{class:"header-anchor",href:"#查询缓存","aria-label":'Permalink to "查询缓存"'},"​")],-1)),l[50]||(l[50]=i("h5",{id:"工作流程",tabindex:"-1"},[s("工作流程 "),i("a",{class:"header-anchor",href:"#工作流程","aria-label":'Permalink to "工作流程"'},"​")],-1)),l[51]||(l[51]=i("p",null,"当执行完全相同的 SQL 语句的时候，服务器就会直接从缓存中读取结果，当数据被修改，之前的缓存会失效，修改比较频繁的表不适合做查询缓存",-1)),l[52]||(l[52]=i("p",null,"查询过程：",-1)),l[53]||(l[53]=i("ol",null,[i("li",null,"客户端发送一条查询给服务器"),i("li",null,"服务器先会检查查询缓存，如果命中了缓存，则立即返回存储在缓存中的结果（一般是 K-V 键值对），否则进入下一阶段"),i("li",null,"分析器进行 SQL 分析，再由优化器生成对应的执行计划"),i("li",null,"执行器根据优化器生成的执行计划，调用存储引擎的 API 来执行查询"),i("li",null,"将结果返回给客户端")],-1)),l[54]||(l[54]=i("p",null,"大多数情况下不建议使用查询缓存，因为查询缓存往往弊大于利",-1)),l[55]||(l[55]=i("ul",null,[i("li",null,[s("查询缓存的"),i("strong",null,"失效非常频繁"),s("，只要有对一个表的更新，这个表上所有的查询缓存都会被清空。因此很可能费力地把结果存起来，还没使用就被一个更新全清空了，对于更新压力大的数据库来说，查询缓存的命中率会非常低")]),i("li",null,"除非业务就是有一张静态表，很长时间才会更新一次，比如一个系统配置表，那这张表上的查询才适合使用查询缓存")],-1)),l[56]||(l[56]=i("hr",null,null,-1)),l[57]||(l[57]=i("h5",{id:"缓存配置",tabindex:"-1"},[s("缓存配置 "),i("a",{class:"header-anchor",href:"#缓存配置","aria-label":'Permalink to "缓存配置"'},"​")],-1)),l[58]||(l[58]=i("ol",null,[i("li",null,[i("p",null,"查看当前 MySQL 数据库是否支持查询缓存："),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"SHOW VARIABLES "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"LIKE"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 'have_query_cache'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";	"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- YES")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"查看当前 MySQL 是否开启了查询缓存："),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"SHOW VARIABLES "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"LIKE"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 'query_cache_type'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";	"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- OFF")])])]),i("button",{class:"code-block-unfold-btn"})]),i("p",null,"参数说明："),i("ul",null,[i("li",null,[i("p",null,"OFF 或 0：查询缓存功能关闭")]),i("li",null,[i("p",null,"ON 或 1：查询缓存功能打开，查询结果符合缓存条件即会缓存，否则不予缓存；可以显式指定 SQL_NO_CACHE 不予缓存")]),i("li",null,[i("p",null,"DEMAND 或 2：查询缓存功能按需进行，显式指定 SQL_CACHE 的 SELECT 语句才缓存，其它不予缓存"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," SQL_CACHE id, "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"name"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," customer; "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- SQL_CACHE:查询结果可缓存")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," SQL_NO_CACHE id, "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"name"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," customer;"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- SQL_NO_CACHE:不使用查询缓存")])])]),i("button",{class:"code-block-unfold-btn"})])])])]),i("li",null,[i("p",null,"查看查询缓存的占用大小："),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"SHOW VARIABLES "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"LIKE"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 'query_cache_size'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 单位是字节 1048576 / 1024 = 1024 = 1KB")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"查看查询缓存的状态变量："),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"SHOW "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"STATUS"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," LIKE"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 'Qcache%'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])]),i("button",{class:"code-block-unfold-btn"})]),i("figure",null,[i("img",{src:"https://gcore.jsdelivr.net/gh/imLKlauS/blog-picture@main/blogs/image-20250319234326198.png",alt:"image-20250319234326198",loading:"lazy",decoding:"async",class:"lazy"})]),i("table",null,[i("thead",null,[i("tr",null,[i("th",null,"参数"),i("th",null,"含义")])]),i("tbody",null,[i("tr",null,[i("td",null,"Qcache_free_blocks"),i("td",null,"查询缓存中的可用内存块数")]),i("tr",null,[i("td",null,"Qcache_free_memory"),i("td",null,"查询缓存的可用内存量")]),i("tr",null,[i("td",null,"Qcache_hits"),i("td",null,"查询缓存命中数")]),i("tr",null,[i("td",null,"Qcache_inserts"),i("td",null,"添加到查询缓存的查询数")]),i("tr",null,[i("td",null,"Qcache_lowmen_prunes"),i("td",null,"由于内存不足而从查询缓存中删除的查询数")]),i("tr",null,[i("td",null,"Qcache_not_cached"),i("td",null,"非缓存查询的数量（由于 query_cache_type 设置而无法缓存或未缓存）")]),i("tr",null,[i("td",null,"Qcache_queries_in_cache"),i("td",null,"查询缓存中注册的查询数")]),i("tr",null,[i("td",null,"Qcache_total_blocks"),i("td",null,"查询缓存中的块总数")])])])]),i("li",null,[i("p",null,"配置 my.cnf："),i("div",{class:"language-sh max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sh"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," chmod"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 666"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /etc/mysql/my.cnf")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vim"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," my.cnf")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# mysqld中配置缓存")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"query_cache_type"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"1")])])]),i("button",{class:"code-block-unfold-btn"})]),i("p",null,"重启服务既可生效，执行 SQL 语句进行验证 ，执行一条比较耗时的 SQL 语句，然后再多执行几次，查看后面几次的执行时间；获取通过查看查询缓存的缓存命中数，来判定是否走查询缓存")])],-1)),l[59]||(l[59]=i("hr",null,null,-1)),l[60]||(l[60]=i("h5",{id:"缓存失效",tabindex:"-1"},[s("缓存失效 "),i("a",{class:"header-anchor",href:"#缓存失效","aria-label":'Permalink to "缓存失效"'},"​")],-1)),l[61]||(l[61]=i("p",null,"查询缓存失效的情况：",-1)),l[62]||(l[62]=i("ul",null,[i("li",null,[i("p",null,[s("SQL 语句不一致，要想命中查询缓存，查询的 SQL 语句必须一致，因为"),i("strong",null,"缓存中 key 是查询的语句"),s("，value 是查询结构")]),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"select"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," count"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"from"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," tb_item;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Select"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," count"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"from"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," tb_item;	"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 不走缓存，首字母不一致")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"当查询语句中有一些不确定查询时，则不会缓存，比如：now()、current_date()、curdate()、curtime()、rand()、uuid()、user()、database()"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," tb_item "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"WHERE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," updatetime "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," NOW"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"LIMIT"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," USER();")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," DATABASE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"不使用任何表查询语句："),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 'A'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"查询 mysql、information_schema、performance_schema 等系统表时，不走查询缓存："),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," information_schema"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"engines"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,[s("在"),i("strong",null,"跨存储引擎"),s("的存储过程、触发器或存储函数的主体内执行的查询，缓存失效")])]),i("li",null,[i("p",null,[s("如果表更改，则使用该表的"),i("strong",null,"所有高速缓存查询都将变为无效"),s("并从高速缓存中删除，包括使用 MERGE 映射到已更改表的表的查询，比如：INSERT、UPDATE、DELETE、ALTER TABLE、DROP TABLE、DROP DATABASE")])])],-1)),l[63]||(l[63]=i("hr",null,null,-1)),l[64]||(l[64]=i("h4",{id:"分析器",tabindex:"-1"},[s("分析器 "),i("a",{class:"header-anchor",href:"#分析器","aria-label":'Permalink to "分析器"'},"​")],-1)),l[65]||(l[65]=i("p",null,"没有命中查询缓存，就开始了 SQL 的真正执行，分析器会对 SQL 语句做解析",-1)),l[66]||(l[66]=i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," t "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"WHERE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," id "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[67]||(l[67]=i("p",null,"解析器：处理语法和解析查询，生成一课对应的解析树",-1)),l[68]||(l[68]=i("ul",null,[i("li",null,[s("先做"),i("strong",null,"词法分析"),s("，输入的是由多个字符串和空格组成的一条 SQL 语句，MySQL 需要识别出里面的字符串分别是什么代表什么。从输入的 select 这个关键字识别出来这是一个查询语句；把字符串 t 识别成 表名 t，把字符串 id 识别成列 id")]),i("li",null,[s("然后做"),i("strong",null,"语法分析"),s("，根据词法分析的结果，语法分析器会根据语法规则，判断你输入的这个 SQL 语句是否满足 MySQL 语法。如果语句不对，就会收到 "),i("code",null,"You have an error in your SQL syntax"),s(" 的错误提醒")])],-1)),l[69]||(l[69]=i("p",null,"预处理器：进一步检查解析树的合法性，比如数据表和数据列是否存在、别名是否有歧义等",-1)),l[70]||(l[70]=i("hr",null,null,-1)),l[71]||(l[71]=i("h4",{id:"优化器",tabindex:"-1"},[s("优化器 "),i("a",{class:"header-anchor",href:"#优化器","aria-label":'Permalink to "优化器"'},"​")],-1)),l[72]||(l[72]=i("h5",{id:"成本分析",tabindex:"-1"},[s("成本分析 "),i("a",{class:"header-anchor",href:"#成本分析","aria-label":'Permalink to "成本分析"'},"​")],-1)),l[73]||(l[73]=i("p",null,"优化器是在表里面有多个索引的时候，决定使用哪个索引；或者在一个语句有多表关联（join）的时候，决定各个表的连接顺序",-1)),l[74]||(l[74]=i("ul",null,[i("li",null,"根据搜索条件找出所有可能的使用的索引"),i("li",null,"成本分析，执行成本由 I/O 成本和 CPU 成本组成，计算全表扫描和使用不同索引执行 SQL 的代价"),i("li",null,"找到一个最优的执行方案，用最小的代价去执行语句")],-1)),l[75]||(l[75]=i("p",null,"在数据库里面，扫描行数是影响执行代价的因素之一，扫描的行数越少意味着访问磁盘的次数越少，消耗的 CPU 资源越少，优化器还会结合是否使用临时表、是否排序等因素进行综合判断",-1)),l[76]||(l[76]=i("hr",null,null,-1)),l[77]||(l[77]=i("h5",{id:"统计数据",tabindex:"-1"},[s("统计数据 "),i("a",{class:"header-anchor",href:"#统计数据","aria-label":'Permalink to "统计数据"'},"​")],-1)),l[78]||(l[78]=i("p",null,"MySQL 中保存着两种统计数据：",-1)),l[79]||(l[79]=i("ul",null,[i("li",null,"innodb_table_stats 存储了表的统计数据，每一条记录对应着一个表的统计数据"),i("li",null,"innodb_index_stats 存储了索引的统计数据，每一条记录对应着一个索引的一个统计项的数据")],-1)),l[80]||(l[80]=i("p",null,[s("MySQL 在真正执行语句之前，并不能精确地知道满足条件的记录有多少条，只能根据统计信息来估算记录，统计信息就是索引的区分度，一个索引上不同的值的个数（比如性别只能是男女，就是 2 ），称之为基数（cardinality），"),i("strong",null,"基数越大说明区分度越好")],-1)),l[81]||(l[81]=i("p",null,[s("通过"),i("strong",null,"采样统计"),s("来获取基数，InnoDB 默认会选择 N 个数据页，统计这些页面上的不同值得到一个平均值，然后乘以这个索引的页面数，就得到了这个索引的基数")],-1)),l[82]||(l[82]=i("p",null,[s("在 MySQL 中，有两种存储统计数据的方式，可以通过设置参数 "),i("code",null,"innodb_stats_persistent"),s(" 的值来选择：")],-1)),l[83]||(l[83]=i("ul",null,[i("li",null,[s("ON：表示统计信息会持久化存储（默认），采样页数 N 默认为 20，可以通过 "),i("code",null,"innodb_stats_persistent_sample_pages"),s(" 指定，页数越多统计的数据越准确，但消耗的资源更大")]),i("li",null,"OFF：表示统计信息只存储在内存，采样页数 N 默认为 8，也可以通过系统变量设置（不推荐，每次重新计算浪费资源）")],-1)),l[84]||(l[84]=i("p",null,"数据表是会持续更新的，两种统计信息的更新方式：",-1)),l[85]||(l[85]=i("ul",null,[i("li",null,[s("设置 "),i("code",null,"innodb_stats_auto_recalc"),s(" 为 1，当发生变动的记录数量超过表大小的 10% 时，自动触发重新计算，不过是"),i("strong",null,"异步进行")]),i("li",null,[s("调用 "),i("code",null,"ANALYZE TABLE t"),s(" 手动更新统计信息，只对信息做"),i("strong",null,"重新统计"),s("（不是重建表），没有修改数据，这个过程中加了 MDL 读锁并且是同步进行，所以会暂时阻塞系统")])],-1)),l[86]||(l[86]=i("p",null,[i("strong",null,"EXPLAIN 执行计划在优化器阶段生成"),s("，如果 explain 的结果预估的 rows 值跟实际情况差距比较大，可以执行 analyze 命令重新修正信息")],-1)),l[87]||(l[87]=i("hr",null,null,-1)),l[88]||(l[88]=i("h5",{id:"错选索引",tabindex:"-1"},[s("错选索引 "),i("a",{class:"header-anchor",href:"#错选索引","aria-label":'Permalink to "错选索引"'},"​")],-1)),l[89]||(l[89]=i("p",null,"采样统计本身是估算数据，或者 SQL 语句中的字段选择有问题时，可能导致 MySQL 没有选择正确的执行索引",-1)),l[90]||(l[90]=i("p",null,"解决方法：",-1)),l[91]||(l[91]=i("ul",null,[i("li",null,[i("p",null,"采用 force index 强行选择一个索引"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," user "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FORCE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," INDEX"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"WHERE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," NAME="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'klaus'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"可以考虑修改 SQL 语句，引导 MySQL 使用期望的索引")]),i("li",null,[i("p",null,"新建一个更合适的索引，来提供给优化器做选择，或删掉误用的索引")])],-1)),l[92]||(l[92]=i("hr",null,null,-1)),l[93]||(l[93]=i("h4",{id:"执行器",tabindex:"-1"},[s("执行器 "),i("a",{class:"header-anchor",href:"#执行器","aria-label":'Permalink to "执行器"'},"​")],-1)),l[94]||(l[94]=i("p",null,[s("开始执行的时候，要先判断一下当前连接对表有没有"),i("strong",null,"执行查询的权限"),s("，如果没有就会返回没有权限的错误，在工程实现上，如果命中查询缓存，会在查询缓存返回结果的时候，做权限验证。如果有权限，就打开表继续执行，执行器就会根据表的引擎定义，去使用这个引擎提供的接口")],-1)),l[95]||(l[95]=i("hr",null,null,-1)),l[96]||(l[96]=i("h4",{id:"引擎层",tabindex:"-1"},[s("引擎层 "),i("a",{class:"header-anchor",href:"#引擎层","aria-label":'Permalink to "引擎层"'},"​")],-1)),l[97]||(l[97]=i("p",null,[s("Server 层和存储引擎层的交互是"),i("strong",null,"以记录为单位的"),s("，存储引擎会将单条记录返回给 Server 层做进一步处理，并不是直接返回所有的记录")],-1)),l[98]||(l[98]=i("p",null,"工作流程：",-1)),l[99]||(l[99]=i("ul",null,[i("li",null,"首先根据二级索引选择扫描范围，获取第一条符合二级索引条件的记录，进行回表查询，将聚簇索引的记录返回 Server 层，由 Server 判断记录是否符合要求"),i("li",null,"然后在二级索引上继续扫描下一个符合条件的记录")],-1)),l[100]||(l[100]=i("p",null,[s("推荐阅读："),i("a",{href:"https://mp.weixin.qq.com/s/YZ-LckObephrP1f15mzHpA",target:"_blank",rel:"noreferrer"},"https://mp.weixin.qq.com/s/YZ-LckObephrP1f15mzHpA")],-1)),l[101]||(l[101]=i("hr",null,null,-1)),l[102]||(l[102]=i("h3",{id:"终止流程",tabindex:"-1"},[s("终止流程 "),i("a",{class:"header-anchor",href:"#终止流程","aria-label":'Permalink to "终止流程"'},"​")],-1)),l[103]||(l[103]=i("h4",{id:"终止语句",tabindex:"-1"},[s("终止语句 "),i("a",{class:"header-anchor",href:"#终止语句","aria-label":'Permalink to "终止语句"'},"​")],-1)),l[104]||(l[104]=i("p",null,"终止线程中正在执行的语句：",-1)),l[105]||(l[105]=i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"KILL"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," QUERY thread_id")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[106]||(l[106]=i("p",null,"KILL 不是马上终止的意思，而是告诉执行线程这条语句已经不需要继续执行，可以开始执行停止的逻辑（类似于打断）。因为对表做增删改查操作，会在表上加 MDL 读锁，如果线程被 KILL 时就直接终止，那这个 MDL 读锁就没机会被释放了",-1)),l[107]||(l[107]=i("p",null,[s("命令 "),i("code",null,"KILL QUERYthread_id_A"),s(" 的执行流程：")],-1)),l[108]||(l[108]=i("ul",null,[i("li",null,"把 session A 的运行状态改成 THD::KILL_QUERY（将变量 killed 赋值为 THD::KILL_QUERY）"),i("li",null,"给 session A 的执行线程发一个信号，让 session A 来处理这个 THD::KILL_QUERY 状态")],-1)),l[109]||(l[109]=i("p",null,[s("会话处于等待状态（锁阻塞），必须满足是一个可以被唤醒的等待，必须有机会去"),i("strong",null,"判断线程的状态"),s("，如果不满足就会造成 KILL 失败")],-1)),l[110]||(l[110]=i("p",null,"典型场景：innodb_thread_concurrency 为 2，代表并发线程上限数设置为 2",-1)),l[111]||(l[111]=i("ul",null,[i("li",null,"session A 执行事务，session B 执行事务，达到线程上限；此时 session C 执行事务会阻塞等待，session D 执行 kill query C 无效"),i("li",null,"C 的逻辑是每 10 毫秒判断是否可以进入 InnoDB 执行，如果不行就调用 nanosleep 函数进入 sleep 状态，没有去判断线程状态")],-1)),l[112]||(l[112]=i("p",null,"补充：执行 Ctrl+C 的时候，是 MySQL 客户端另外启动一个连接，然后发送一个 KILL QUERY 命令",-1)),l[113]||(l[113]=i("hr",null,null,-1)),l[114]||(l[114]=i("h4",{id:"终止连接",tabindex:"-1"},[s("终止连接 "),i("a",{class:"header-anchor",href:"#终止连接","aria-label":'Permalink to "终止连接"'},"​")],-1)),l[115]||(l[115]=i("p",null,"断开线程的连接：",-1)),l[116]||(l[116]=i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"KILL"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," CONNECTION"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," id")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[117]||(l[117]=i("p",null,"断开连接后执行 SHOW PROCESSLIST 命令，如果这条语句的 Command 列显示 Killed，代表线程的状态是 KILL_CONNECTION，说明这个线程有语句正在执行，当前状态是停止语句执行中，终止逻辑耗时较长",-1)),l[118]||(l[118]=i("ul",null,[i("li",null,"超大事务执行期间被 KILL，这时回滚操作需要对事务执行期间生成的所有新数据版本做回收操作，耗时很长"),i("li",null,"大查询回滚，如果查询过程中生成了比较大的临时文件，删除临时文件可能需要等待 IO 资源，导致耗时较长"),i("li",null,"DDL 命令执行到最后阶段被 KILL，需要删除中间过程的临时文件，也可能受 IO 资源影响耗时较久")],-1)),l[119]||(l[119]=i("p",null,"总结：KILL CONNECTION 本质上只是把客户端的 SQL 连接断开，后面的终止流程还是要走 KILL QUERY",-1)),l[120]||(l[120]=i("p",null,"一个事务被 KILL 之后，持续处于回滚状态，不应该强行重启整个 MySQL 进程，应该等待事务自己执行完成，因为重启后依然继续做回滚操作的逻辑",-1)),l[121]||(l[121]=i("hr",null,null,-1)),l[122]||(l[122]=i("h3",{id:"常用工具",tabindex:"-1"},[s("常用工具 "),i("a",{class:"header-anchor",href:"#常用工具","aria-label":'Permalink to "常用工具"'},"​")],-1)),l[123]||(l[123]=i("h4",{id:"mysql-1",tabindex:"-1"},[s("mysql "),i("a",{class:"header-anchor",href:"#mysql-1","aria-label":'Permalink to "mysql"'},"​")],-1)),l[124]||(l[124]=i("p",null,"mysql 不是指 mysql 服务，而是指 mysql 的客户端工具",-1)),l[125]||(l[125]=i("div",{class:"language-sh max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sh"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mysql"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," [options] [database]")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[126]||(l[126]=i("ul",null,[i("li",null,"-u --user=name：指定用户名"),i("li",null,"-p --password[=name]：指定密码"),i("li",null,"-h --host=name：指定服务器IP或域名"),i("li",null,"-P --port=#：指定连接端口"),i("li",null,"-e --execute=name：执行SQL语句并退出，在控制台执行SQL语句，而不用连接到数据库执行")],-1)),l[127]||(l[127]=i("p",null,"示例：",-1)),l[128]||(l[128]=i("div",{class:"language-sh max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sh"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mysql"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -h"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 127.0.0.1"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -P"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 3306"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -u"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," root"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -p")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mysql"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -uroot"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -p2143"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," db01"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -e"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "select * from tb_book"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[129]||(l[129]=i("hr",null,null,-1)),l[130]||(l[130]=i("h4",{id:"admin",tabindex:"-1"},[s("admin "),i("a",{class:"header-anchor",href:"#admin","aria-label":'Permalink to "admin"'},"​")],-1)),l[131]||(l[131]=i("p",null,"mysqladmin 是一个执行管理操作的客户端程序，用来检查服务器的配置和当前状态、创建并删除数据库等",-1)),l[132]||(l[132]=i("p",null,[s("通过 "),i("code",null,"mysqladmin --help"),s(" 指令查看帮助文档")],-1)),l[133]||(l[133]=i("div",{class:"language-sh max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sh"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mysqladmin"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -uroot"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -p2143"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," create"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 'test01'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[134]||(l[134]=i("hr",null,null,-1)),l[135]||(l[135]=i("h4",{id:"binlog",tabindex:"-1"},[s("binlog "),i("a",{class:"header-anchor",href:"#binlog","aria-label":'Permalink to "binlog"'},"​")],-1)),l[136]||(l[136]=i("p",null,"服务器生成的日志文件以二进制格式保存，如果需要检查这些文本，就要使用 mysqlbinlog 日志管理工具",-1)),l[137]||(l[137]=i("div",{class:"language-sh max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sh"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mysqlbinlog"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," [options]  log-files1 log-files2 ...")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[138]||(l[138]=i("ul",null,[i("li",null,[i("p",null,"-d --database=name：指定数据库名称，只列出指定的数据库相关操作")]),i("li",null,[i("p",null,"-o --offset=#：忽略掉日志中的前 n 行命令。")]),i("li",null,[i("p",null,"-r --result-file=name：将输出的文本格式日志输出到指定文件。")]),i("li",null,[i("p",null,"-s --short-form：显示简单格式，省略掉一些信息。")]),i("li",null,[i("p",null,"–start-datatime=date1 --stop-datetime=date2：指定日期间隔内的所有日志")]),i("li",null,[i("p",null,"–start-position=pos1 --stop-position=pos2：指定位置间隔内的所有日志")])],-1)),l[139]||(l[139]=i("hr",null,null,-1)),l[140]||(l[140]=i("h4",{id:"dump",tabindex:"-1"},[s("dump "),i("a",{class:"header-anchor",href:"#dump","aria-label":'Permalink to "dump"'},"​")],-1)),l[141]||(l[141]=i("h5",{id:"命令介绍",tabindex:"-1"},[s("命令介绍 "),i("a",{class:"header-anchor",href:"#命令介绍","aria-label":'Permalink to "命令介绍"'},"​")],-1)),l[142]||(l[142]=i("p",null,"mysqldump 客户端工具用来备份数据库或在不同数据库之间进行数据迁移，备份内容包含创建表，及插入表的 SQL 语句",-1)),l[143]||(l[143]=i("div",{class:"language-sh max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sh"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mysqldump"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," [options] db_name [tables]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mysqldump"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," [options] --database/-B db1 [db2 db3...]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mysqldump"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," [options] --all-databases/-A")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[144]||(l[144]=i("p",null,"连接选项：",-1)),l[145]||(l[145]=i("ul",null,[i("li",null,"-u --user=name：指定用户名"),i("li",null,"-p --password[=name]：指定密码"),i("li",null,"-h --host=name：指定服务器 IP 或域名"),i("li",null,"-P --port=#：指定连接端口")],-1)),l[146]||(l[146]=i("p",null,"输出内容选项：",-1)),l[147]||(l[147]=i("ul",null,[i("li",null,"–add-drop-database：在每个数据库创建语句前加上 Drop database 语句"),i("li",null,"–add-drop-table：在每个表创建语句前加上 Drop table 语句 , 默认开启，不开启 (–skip-add-drop-table)"),i("li",null,"-n --no-create-db：不包含数据库的创建语句"),i("li",null,"-t --no-create-info：不包含数据表的创建语句"),i("li",null,"-d --no-data：不包含数据"),i("li",null,"-T, --tab=name：自动生成两个文件：一个 .sql 文件，创建表结构的语句；一个 .txt 文件，数据文件，相当于 select into outfile")],-1)),l[148]||(l[148]=i("p",null,"示例：",-1)),l[149]||(l[149]=i("div",{class:"language-sh max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sh"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mysqldump"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -uroot"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -p2143"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," db01"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," tb_book"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --add-drop-database"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --add-drop-table"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," >"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," a")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mysqldump"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -uroot"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -p2143"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -T"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /tmp"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," test"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," city")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[150]||(l[150]=i("hr",null,null,-1)),l[151]||(l[151]=i("h5",{id:"数据备份",tabindex:"-1"},[s("数据备份 "),i("a",{class:"header-anchor",href:"#数据备份","aria-label":'Permalink to "数据备份"'},"​")],-1)),l[152]||(l[152]=i("p",null,"命令行方式：",-1)),l[153]||(l[153]=i("ul",null,[i("li",null,"备份命令：mysqldump -u root -p 数据库名称 > 文件保存路径"),i("li",null,[s("恢复 "),i("ol",null,[i("li",null,[s("登录MySQL数据库："),i("code",null,"mysql -u root p")]),i("li",null,"删除已经备份的数据库"),i("li",null,"重新创建与备份数据库名称相同的数据库"),i("li",null,"使用该数据库"),i("li",null,[s("导入文件执行："),i("code",null,"source 备份文件全路径")])])])],-1)),l[154]||(l[154]=i("p",null,[s("更多方式参考："),i("a",{href:"https://time.geekbang.org/column/article/81925",target:"_blank",rel:"noreferrer"},"https://time.geekbang.org/column/article/81925")],-1)),l[155]||(l[155]=i("p",null,"图形化界面：",-1)),l[156]||(l[156]=i("ul",null,[i("li",null,[i("p",null,"备份"),i("figure",null,[i("img",{src:"https://gcore.jsdelivr.net/gh/imLKlauS/blog-picture@main/blogs/image-20250319234400695.png",alt:"image-20250319234400695",loading:"lazy",decoding:"async",class:"lazy"})])]),i("li",null,[i("p",null,"恢复"),i("figure",null,[i("img",{src:"https://gcore.jsdelivr.net/gh/imLKlauS/blog-picture@main/blogs/image-20250319234436591.png",alt:"image-20250319234436591",loading:"lazy",decoding:"async",class:"lazy"})])])],-1)),l[157]||(l[157]=i("hr",null,null,-1)),l[158]||(l[158]=i("h4",{id:"import",tabindex:"-1"},[s("import "),i("a",{class:"header-anchor",href:"#import","aria-label":'Permalink to "import"'},"​")],-1)),l[159]||(l[159]=i("p",null,"mysqlimport 是客户端数据导入工具，用来导入mysqldump 加 -T 参数后导出的文本文件",-1)),l[160]||(l[160]=i("div",{class:"language-sh max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sh"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mysqlimport"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," [options]  db_name  textfile1  [textfile2...]")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[161]||(l[161]=i("p",null,"示例：",-1)),l[162]||(l[162]=i("div",{class:"language-sh max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sh"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mysqlimport"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -uroot"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -p2143"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," test"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /tmp/city.txt")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[163]||(l[163]=i("p",null,"导入 sql 文件，可以使用 MySQL 中的 source 指令 :",-1)),l[164]||(l[164]=i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"source 文件全路径")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[165]||(l[165]=i("hr",null,null,-1)),l[166]||(l[166]=i("h4",{id:"show",tabindex:"-1"},[s("show "),i("a",{class:"header-anchor",href:"#show","aria-label":'Permalink to "show"'},"​")],-1)),l[167]||(l[167]=i("p",null,"mysqlshow 客户端对象查找工具，用来很快地查找存在哪些数据库、数据库中的表、表中的列或者索引",-1)),l[168]||(l[168]=i("div",{class:"language-sh max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sh"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mysqlshow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," [options] [db_name [table_name [col_name]]]")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[169]||(l[169]=i("ul",null,[i("li",null,[i("p",null,"–count：显示数据库及表的统计信息（数据库，表 均可以不指定）")]),i("li",null,[i("p",null,"-i：显示指定数据库或者指定表的状态信息")])],-1)),l[170]||(l[170]=i("p",null,"示例：",-1)),l[171]||(l[171]=i("div",{class:"language-sh max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sh"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"#查询每个数据库的表的数量及表中记录的数量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mysqlshow"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -uroot"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -p1234"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --count")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"#查询test库中每个表中的字段书，及行数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mysqlshow"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -uroot"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -p1234"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," test"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --count")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"#查询test库中book表的详细情况")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mysqlshow"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -uroot"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -p1234"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," test"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," book"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --count")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[172]||(l[172]=i("hr",null,null,-1)),l[173]||(l[173]=i("h2",{id:"高级结构",tabindex:"-1"},[s("高级结构 "),i("a",{class:"header-anchor",href:"#高级结构","aria-label":'Permalink to "高级结构"'},"​")],-1)),l[174]||(l[174]=i("h3",{id:"视图",tabindex:"-1"},[s("视图 "),i("a",{class:"header-anchor",href:"#视图","aria-label":'Permalink to "视图"'},"​")],-1)),l[175]||(l[175]=i("h4",{id:"基本介绍",tabindex:"-1"},[s("基本介绍 "),i("a",{class:"header-anchor",href:"#基本介绍","aria-label":'Permalink to "基本介绍"'},"​")],-1)),l[176]||(l[176]=i("p",null,"视图概念：视图是一种虚拟存在的数据表，这个虚拟的表并不在数据库中实际存在",-1)),l[177]||(l[177]=i("p",null,"本质：将一条 SELECT 查询语句的结果封装到了一个虚拟表中，所以在创建视图的时候，工作重心要放在这条 SELECT 查询语句上",-1)),l[178]||(l[178]=i("p",null,"作用：将一些比较复杂的查询语句的结果，封装到一个虚拟表中，再有相同查询需求时，直接查询该虚拟表",-1)),l[179]||(l[179]=i("p",null,"优点：",-1)),l[180]||(l[180]=i("ul",null,[i("li",null,[i("p",null,"简单：使用视图的用户不需要关心表的结构、关联条件和筛选条件，因为虚拟表中已经是过滤好的结果集")]),i("li",null,[i("p",null,"安全：使用视图的用户只能访问查询的结果集，对表的权限管理并不能限制到某个行某个列")]),i("li",null,[i("p",null,"数据独立，一旦视图的结构确定，可以屏蔽表结构变化对用户的影响，源表增加列对视图没有影响；源表修改列名，则可以通过修改视图来解决，不会造成对访问者的影响")])],-1)),l[181]||(l[181]=i("hr",null,null,-1)),l[182]||(l[182]=i("h4",{id:"视图创建",tabindex:"-1"},[s("视图创建 "),i("a",{class:"header-anchor",href:"#视图创建","aria-label":'Permalink to "视图创建"'},"​")],-1)),l[183]||(l[183]=i("ul",null,[i("li",null,[i("p",null,"创建视图"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," [OR REPLACE] ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"VIEW 视图名称 [(列名列表)] ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"AS"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 查询语句")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[WITH [CASCADED | LOCAL] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CHECK"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," OPTION"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"];")])])]),i("button",{class:"code-block-unfold-btn"})]),i("p",null,[i("code",null,"WITH [CASCADED | LOCAL] CHECK OPTION"),s(" 决定了是否允许更新数据使记录不再满足视图的条件：")]),i("ul",null,[i("li",null,"LOCAL：只要满足本视图的条件就可以更新"),i("li",null,"CASCADED：必须满足所有针对该视图的所有视图的条件才可以更新， 默认值")])]),i("li",null,[i("p",null,"例如"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 数据准备 city")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"id	"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"NAME"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	cid")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	深圳	 	"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	上海		"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	纽约		"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	莫斯科	    "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 数据准备 country")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"id	"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"NAME")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	中国")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	美国")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	俄罗斯")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 创建city_country视图，保存城市和国家的信息(使用指定列名)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"VIEW ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	city_country (city_id,city_name,country_name)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"AS")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    SELECT")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        c1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"id"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        c1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        c2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"name")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    FROM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        city c1,")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        country c2")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    WHERE")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        c1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"cid"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"c2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"id"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])]),i("button",{class:"code-block-unfold-btn"})])])],-1)),l[184]||(l[184]=i("hr",null,null,-1)),l[185]||(l[185]=i("h4",{id:"视图查询",tabindex:"-1"},[s("视图查询 "),i("a",{class:"header-anchor",href:"#视图查询","aria-label":'Permalink to "视图查询"'},"​")],-1)),l[186]||(l[186]=i("ul",null,[i("li",null,[i("p",null,"查询所有数据表，视图也会查询出来"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"SHOW TABLES;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"SHOW "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"TABLE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," STATUS"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," [\\G];")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"查询视图"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 视图名称;")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"查询某个视图创建"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"SHOW "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," VIEW 视图名称;")])])]),i("button",{class:"code-block-unfold-btn"})])])],-1)),l[187]||(l[187]=i("hr",null,null,-1)),l[188]||(l[188]=i("h4",{id:"视图修改",tabindex:"-1"},[s("视图修改 "),i("a",{class:"header-anchor",href:"#视图修改","aria-label":'Permalink to "视图修改"'},"​")],-1)),l[189]||(l[189]=i("p",null,[s("视图表数据修改，会"),i("strong",null,"自动修改源表中的数据"),s("，因为更新的是视图中的基表中的数据")],-1)),l[190]||(l[190]=i("ul",null,[i("li",null,[i("p",null,"修改视图表中的数据"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"UPDATE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 视图名称 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SET"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 列名 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 值 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"WHERE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 条件;")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"修改视图的结构"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"ALTER"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," [ALGORITHM = {UNDEFINED | MERGE | TEMPTABLE}]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"VIEW 视图名称 [(列名列表)] ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"AS"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 查询语句")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[WITH [CASCADED | LOCAL] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CHECK"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," OPTION"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 将视图中的country_name修改为name")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"ALTER"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"VIEW ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	city_country (city_id,city_name,"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"AS")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    SELECT")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        c1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"id"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        c1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        c2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"name")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    FROM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        city c1,")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        country c2")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    WHERE")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        c1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"cid"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"c2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"id"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])]),i("button",{class:"code-block-unfold-btn"})])])],-1)),l[191]||(l[191]=i("hr",null,null,-1)),l[192]||(l[192]=i("h4",{id:"视图删除",tabindex:"-1"},[s("视图删除 "),i("a",{class:"header-anchor",href:"#视图删除","aria-label":'Permalink to "视图删除"'},"​")],-1)),l[193]||(l[193]=i("ul",null,[i("li",null,[i("p",null,"删除视图"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"DROP"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," VIEW"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 视图名称;")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"如果存在则删除"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"DROP"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," VIEW"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," IF"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," EXISTS"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 视图名称;")])])]),i("button",{class:"code-block-unfold-btn"})])])],-1)),l[194]||(l[194]=i("hr",null,null,-1)),l[195]||(l[195]=i("h3",{id:"存储过程",tabindex:"-1"},[s("存储过程 "),i("a",{class:"header-anchor",href:"#存储过程","aria-label":'Permalink to "存储过程"'},"​")],-1)),l[196]||(l[196]=i("h4",{id:"基本介绍-1",tabindex:"-1"},[s("基本介绍 "),i("a",{class:"header-anchor",href:"#基本介绍-1","aria-label":'Permalink to "基本介绍"'},"​")],-1)),l[197]||(l[197]=i("p",null,"存储过程和函数：存储过程和函数是事先经过编译并存储在数据库中的一段 SQL 语句的集合",-1)),l[198]||(l[198]=i("p",null,"存储过程和函数的好处：",-1)),l[199]||(l[199]=i("ul",null,[i("li",null,"提高代码的复用性"),i("li",null,"减少数据在数据库和应用服务器之间的传输，提高传输效率"),i("li",null,"减少代码层面的业务处理"),i("li",null,[i("strong",null,"一次编译永久有效")])],-1)),l[200]||(l[200]=i("p",null,"存储过程和函数的区别：",-1)),l[201]||(l[201]=i("ul",null,[i("li",null,"存储函数必须有返回值"),i("li",null,"存储过程可以没有返回值")],-1)),l[202]||(l[202]=i("hr",null,null,-1)),l[203]||(l[203]=i("h4",{id:"基本操作",tabindex:"-1"},[s("基本操作 "),i("a",{class:"header-anchor",href:"#基本操作","aria-label":'Permalink to "基本操作"'},"​")],-1)),l[204]||(l[204]=i("p",null,"DELIMITER：",-1)),l[205]||(l[205]=i("ul",null,[i("li",null,[i("p",null,"DELIMITER 关键字用来声明 sql 语句的分隔符，告诉 MySQL 该段命令已经结束")]),i("li",null,[i("p",null,"MySQL 语句默认的分隔符是分号，但是有时需要一条功能 sql 语句中包含分号，但是并不作为结束标识，这时使用 DELIMITER 来指定分隔符："),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER 分隔符")])])]),i("button",{class:"code-block-unfold-btn"})])])],-1)),l[206]||(l[206]=i("p",null,"存储过程的创建调用查看和删除：",-1)),l[207]||(l[207]=i("ul",null,[i("li",null,[i("p",null,"创建存储过程"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 修改分隔符为$")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER $")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 标准语法")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," PROCEDURE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 存储过程名称(参数...)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEGIN")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	sql语句;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 修改分隔符为分号")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER ;")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"调用存储过程"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CALL"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 存储过程名称(实际参数);")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"查看存储过程"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," mysql"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"proc"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," WHERE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," db"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'数据库名称'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"删除存储过程"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"DROP"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," PROCEDURE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," [IF EXISTS] 存储过程名称;")])])]),i("button",{class:"code-block-unfold-btn"})])])],-1)),l[208]||(l[208]=i("p",null,"练习：",-1)),l[209]||(l[209]=i("ul",null,[i("li",null,[i("p",null,"数据准备"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"id	"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"NAME"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	age		gender	score")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	张三		"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"23"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		男		"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"95")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	李四		"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"24"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		男		"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"98")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	王五		"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"25"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		女		"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"100")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	赵六		"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"26"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		女		"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"90")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"创建 stu_group() 存储过程，封装分组查询总成绩，并按照总成绩升序排序的功能"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER $")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," PROCEDURE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," stu_group()")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEGIN")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	SELECT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," gender,"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"SUM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(score) getSum "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," student "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"GROUP BY"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," gender "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"ORDER BY"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," getSum "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"ASC"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"; ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER ;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 调用存储过程")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CALL"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," stu_group();")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 删除存储过程")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"DROP"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," PROCEDURE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," IF"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," EXISTS"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," stu_group;")])])]),i("button",{class:"code-block-unfold-btn"})])])],-1)),l[210]||(l[210]=i("hr",null,null,-1)),l[211]||(l[211]=i("h4",{id:"存储语法",tabindex:"-1"},[s("存储语法 "),i("a",{class:"header-anchor",href:"#存储语法","aria-label":'Permalink to "存储语法"'},"​")],-1)),l[212]||(l[212]=i("h5",{id:"变量使用",tabindex:"-1"},[s("变量使用 "),i("a",{class:"header-anchor",href:"#变量使用","aria-label":'Permalink to "变量使用"'},"​")],-1)),l[213]||(l[213]=i("p",null,"存储过程是可以进行编程的，意味着可以使用变量、表达式、条件控制语句等，来完成比较复杂的功能",-1)),l[214]||(l[214]=i("ul",null,[i("li",null,[i("p",null,"定义变量：DECLARE 定义的是局部变量，只能用在 BEGIN END 范围之内"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"DECLARE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 变量名 数据类型 [DEFAULT 默认值];")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"变量的赋值"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SET"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 变量名 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 变量值;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 列名 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INTO"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 变量名 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 表名 [WHERE 条件];")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"数据准备：表 student"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"id	"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"NAME"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	age		gender	score")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	张三		"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"23"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		男		"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"95")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	李四		"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"24"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		男		"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"98")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	王五		"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"25"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		女		"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"100")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	赵六		"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"26"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		女		"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"90")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"定义两个 int 变量，用于存储男女同学的总分数"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER $")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," PROCEDURE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test3()")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEGIN")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	-- 定义两个变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	DECLARE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," men,women "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	-- 查询男同学的总分数，为men赋值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	SELECT"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," SUM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(score) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INTO"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," men "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," student "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"WHERE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," gender"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'男'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	-- 查询女同学的总分数，为women赋值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	SELECT"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," SUM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(score) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INTO"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," women "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," student "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"WHERE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," gender"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'女'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	-- 使用变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	SELECT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," men,women;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER ;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 调用存储过程")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CALL"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test3();")])])]),i("button",{class:"code-block-unfold-btn"})])])],-1)),l[215]||(l[215]=i("hr",null,null,-1)),l[216]||(l[216]=i("h5",{id:"if语句",tabindex:"-1"},[s("IF语句 "),i("a",{class:"header-anchor",href:"#if语句","aria-label":'Permalink to "IF语句"'},"​")],-1)),l[217]||(l[217]=i("ul",null,[i("li",null,[i("p",null,"if 语句标准语法"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"IF"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 判断条件1 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"THEN"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 执行的sql语句1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[ELSEIF 判断条件2 THEN 执行的sql语句2;]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"...")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[ELSE 执行的sql语句n;]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," IF"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"数据准备：表 student"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"id	"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"NAME"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	age		gender	score")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	张三		"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"23"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		男		"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"95")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	李四		"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"24"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		男		"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"98")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	王五		"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"25"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		女		"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"100")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	赵六		"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"26"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		女		"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"90")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"根据总成绩判断：全班 380 分及以上学习优秀、320 ~ 380 学习良好、320 以下学习一般"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER $")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," PROCEDURE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test4()")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEGIN")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	DECLARE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," total "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";							"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 定义总分数变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	DECLARE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," description"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," VARCHAR"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"10"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");			"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 定义分数描述变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	SELECT"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," SUM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(score) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INTO"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," total "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," student; 	"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 为总分数变量赋值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	-- 判断总分数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	IF"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," total "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 380"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," THEN")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"		SET"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," description"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," '学习优秀'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	ELSEIF total "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"320"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," AND"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," total "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 380"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," THEN")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"		SET"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," description"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," '学习良好'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	ELSE")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"		SET"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," description"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," '学习一般'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	END"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," IF"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER ;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 调用pro_test4存储过程")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CALL"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test4();")])])]),i("button",{class:"code-block-unfold-btn"})])])],-1)),l[218]||(l[218]=i("hr",null,null,-1)),l[219]||(l[219]=i("h5",{id:"参数传递",tabindex:"-1"},[s("参数传递 "),i("a",{class:"header-anchor",href:"#参数传递","aria-label":'Permalink to "参数传递"'},"​")],-1)),l[220]||(l[220]=i("ul",null,[i("li",null,[i("p",null,"参数传递的语法"),i("p",null,"IN：代表输入参数，需要由调用者传递实际数据，默认的 OUT：代表输出参数，该参数可以作为返回值 INOUT：代表既可以作为输入参数，也可以作为输出参数"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER $")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 标准语法")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," PROCEDURE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 存储过程名称([IN|OUT|INOUT] 参数名 数据类型)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEGIN")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	执行的sql语句;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER ;")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"输入总成绩变量，代表学生总成绩，输出分数描述变量，代表学生总成绩的描述"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER $")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," PROCEDURE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test6("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"IN"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," total "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"OUT"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," description"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," VARCHAR"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"10"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"))")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEGIN")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	-- 判断总分数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	IF"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," total "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 380"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," THEN"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"		SET"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," description"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," '学习优秀'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	ELSEIF total "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 320"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," AND"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," total "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 380"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," THEN"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"		SET"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," description"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," '学习不错'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	ELSE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"		SET"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," description"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," '学习一般'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	END"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," IF"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER ;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 调用pro_test6存储过程")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CALL"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test6("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"310"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",@description);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CALL"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test6(("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," SUM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(score) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," student), @description);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 查询总成绩描述")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," @description;")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"查看参数方法"),i("ul",null,[i("li",null,[s("@变量名 : "),i("strong",null,"用户会话变量"),s("，代表整个会话过程他都是有作用的，类似于全局变量")]),i("li",null,[s("@@变量名 : "),i("strong",null,"系统变量")])])])],-1)),l[221]||(l[221]=i("hr",null,null,-1)),l[222]||(l[222]=i("h5",{id:"case",tabindex:"-1"},[s("CASE "),i("a",{class:"header-anchor",href:"#case","aria-label":'Permalink to "CASE"'},"​")],-1)),l[223]||(l[223]=i("ul",null,[i("li",null,[i("p",null,"标准语法 1"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CASE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 表达式")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    WHEN"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 值1 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"THEN"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 执行sql语句1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    [WHEN 值2 THEN 执行sql语句2;]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ...")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    [ELSE 执行sql语句n;]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," CASE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"标准语法 2"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"sCASE")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    WHEN"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 判断条件1 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"THEN"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 执行sql语句1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    [WHEN 判断条件2 THEN 执行sql语句2;]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ...")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    [ELSE 执行sql语句n;]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," CASE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"演示"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER $")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," PROCEDURE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test7("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"IN"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," total "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEGIN")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	-- 定义变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	DECLARE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," description"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," VARCHAR"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"10"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	-- 使用case判断")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	CASE")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	WHEN"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," total "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 380"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," THEN")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"		SET"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," description"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," '学习优秀'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	WHEN"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," total "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 320"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," AND"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," total "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 380"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," THEN")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"		SET"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," description"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," '学习不错'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	ELSE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"		SET"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," description"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," '学习一般'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	END"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," CASE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	-- 查询分数描述信息")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	SELECT"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," description"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER ;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 调用pro_test7存储过程")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CALL"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test7("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"390"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CALL"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test7(("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," SUM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(score) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," student));")])])]),i("button",{class:"code-block-unfold-btn"})])])],-1)),l[224]||(l[224]=i("hr",null,null,-1)),l[225]||(l[225]=i("h5",{id:"while",tabindex:"-1"},[s("WHILE "),i("a",{class:"header-anchor",href:"#while","aria-label":'Permalink to "WHILE"'},"​")],-1)),l[226]||(l[226]=i("ul",null,[i("li",null,[i("p",null,"while 循环语法"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"WHILE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 条件判断语句 DO")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	循环体语句;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	条件控制语句;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," WHILE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"计算 1~100 之间的偶数和"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER $")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," PROCEDURE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test6()")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEGIN")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	-- 定义求和变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	DECLARE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," result "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," DEFAULT"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	-- 定义初始化变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	DECLARE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," num "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," DEFAULT"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	-- while循环")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	WHILE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," num "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 100"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," DO")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"		IF"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," num % "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," THEN")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"			SET"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," result "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," result "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," num;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"		END"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," IF"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"		SET"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," num "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," num "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	END"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," WHILE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	-- 查询求和结果")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	SELECT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," result;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER ;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 调用pro_test6存储过程")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CALL"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test6();")])])]),i("button",{class:"code-block-unfold-btn"})])])],-1)),l[227]||(l[227]=i("hr",null,null,-1)),l[228]||(l[228]=i("h5",{id:"repeat",tabindex:"-1"},[s("REPEAT "),i("a",{class:"header-anchor",href:"#repeat","aria-label":'Permalink to "REPEAT"'},"​")],-1)),l[229]||(l[229]=i("ul",null,[i("li",null,[i("p",null,"repeat 循环标准语法"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"初始化语句;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"REPEAT")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	循环体语句;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	条件控制语句;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	UNTIL 条件判断语句")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," REPEAT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"计算 1~10 之间的和"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER $")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," PROCEDURE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test9()")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEGIN")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	-- 定义求和变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	DECLARE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," result "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," DEFAULT"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	-- 定义初始化变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	DECLARE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," num "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," DEFAULT"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	-- repeat循环")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	REPEAT")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"		-- 累加")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"		SET"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," result "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," result "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," num;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"		-- 让num+1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"		SET"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," num "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," num "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"		-- 停止循环")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		UNTIL num "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 10")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	END"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," REPEAT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	-- 查询求和结果")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	SELECT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," result;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER ;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 调用pro_test9存储过程")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CALL"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test9();")])])]),i("button",{class:"code-block-unfold-btn"})])])],-1)),l[230]||(l[230]=i("hr",null,null,-1)),l[231]||(l[231]=i("h5",{id:"loop",tabindex:"-1"},[s("LOOP "),i("a",{class:"header-anchor",href:"#loop","aria-label":'Permalink to "LOOP"'},"​")],-1)),l[232]||(l[232]=i("p",null,"LOOP 实现简单的循环，退出循环的条件需要使用其他的语句定义，通常可以使用 LEAVE 语句实现，如果不加退出循环的语句，那么就变成了死循环",-1)),l[233]||(l[233]=i("ul",null,[i("li",null,[i("p",null,"loop 循环标准语法"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[循环名称:] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"LOOP")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	条件判断语句")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		[LEAVE 循环名称;]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	循环体语句;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	条件控制语句;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," LOOP"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 循环名称;")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"计算 1~10 之间的和"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER $")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," PROCEDURE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test10()")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEGIN")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	-- 定义求和变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	DECLARE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," result "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," DEFAULT"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	-- 定义初始化变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	DECLARE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," num "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," DEFAULT"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	-- loop循环")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	l:"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"LOOP")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"		-- 条件成立，停止循环")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"		IF"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," num "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 10"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," THEN")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			LEAVE l;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"		END"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," IF"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"		-- 累加")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"		SET"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," result "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," result "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," num;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"		-- 让num+1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"		SET"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," num "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," num "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	END"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," LOOP"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," l;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	-- 查询求和结果")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	SELECT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," result;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER ;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 调用pro_test10存储过程")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CALL"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test10();")])])]),i("button",{class:"code-block-unfold-btn"})])])],-1)),l[234]||(l[234]=i("hr",null,null,-1)),l[235]||(l[235]=i("h5",{id:"游标",tabindex:"-1"},[s("游标 "),i("a",{class:"header-anchor",href:"#游标","aria-label":'Permalink to "游标"'},"​")],-1)),l[236]||(l[236]=i("p",null,"游标是用来存储查询结果集的数据类型，在存储过程和函数中可以使用光标对结果集进行循环的处理",-1)),l[237]||(l[237]=i("ul",null,[i("li",null,"游标可以遍历返回的多行结果，每次拿到一整行数据"),i("li",null,"简单来说游标就类似于集合的迭代器遍历"),i("li",null,"MySQL 中的游标只能用在存储过程和函数中")],-1)),l[238]||(l[238]=i("p",null,"游标的语法",-1)),l[239]||(l[239]=i("ul",null,[i("li",null,[i("p",null,"创建游标"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"DECLARE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 游标名称 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CURSOR"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FOR"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 查询sql语句;")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"打开游标"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"OPEN"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 游标名称;")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"使用游标获取数据"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FETCH"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 游标名称 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INTO"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 变量名1,变量名2,...;")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"关闭游标"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CLOSE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 游标名称;")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"Mysql 通过一个 Error handler 声明来判断指针是否到尾部，并且必须和创建游标的 SQL 语句声明在一起："),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"DECLARE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," EXIT HANDLER "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FOR"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," NOT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," FOUND (do some "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"action"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"，一般是设置标志变量)")])])]),i("button",{class:"code-block-unfold-btn"})])])],-1)),l[240]||(l[240]=i("p",null,"游标的基本使用",-1)),l[241]||(l[241]=i("ul",null,[i("li",null,[i("p",null,"数据准备：表 student"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"id	"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"NAME"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	age		gender	score")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	张三		"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"23"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		男		"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"95")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	李四		"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"24"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		男		"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"98")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	王五		"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"25"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		女		"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"100")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	赵六		"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"26"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		女		"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"90")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"创建 stu_score 表"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," TABLE"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," stu_score"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	id "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," PRIMARY KEY"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," AUTO_INCREMENT,")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	score "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"将student表中所有的成绩保存到stu_score表中"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER $")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," PROCEDURE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test12()")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEGIN")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	-- 定义成绩变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	DECLARE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," s_score "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	-- 定义标记变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	DECLARE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," flag "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," DEFAULT"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	-- 创建游标，查询所有学生成绩数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	DECLARE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," stu_result "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CURSOR"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FOR"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," SELECT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," score "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," student;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	-- 游标结束后，将标记变量改为1  这两个必须声明在一起")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	DECLARE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," EXIT HANDLER "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FOR"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," NOT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," FOUND "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SET"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," flag "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	-- 开启游标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	OPEN"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," stu_result;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	-- 循环使用游标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	REPEAT")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"		-- 使用游标，遍历结果,拿到数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"		FETCH"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," stu_result "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INTO"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," s_score;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"		-- 将数据保存到stu_score表中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"		INSERT INTO"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," stu_score "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"VALUES"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"NULL"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",s_score);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	UNTIL flag"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	END"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," REPEAT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	-- 关闭游标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	CLOSE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," stu_result;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER ;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 调用pro_test12存储过程")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CALL"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test12();")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 查询stu_score表")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," stu_score;")])])]),i("button",{class:"code-block-unfold-btn"})])])],-1)),l[242]||(l[242]=i("hr",null,null,-1)),l[243]||(l[243]=i("h4",{id:"存储函数",tabindex:"-1"},[s("存储函数 "),i("a",{class:"header-anchor",href:"#存储函数","aria-label":'Permalink to "存储函数"'},"​")],-1)),l[244]||(l[244]=i("p",null,"存储函数和存储过程是非常相似的，存储函数可以做的事情，存储过程也可以做到",-1)),l[245]||(l[245]=i("p",null,"存储函数有返回值，存储过程没有返回值（参数的 out 其实也相当于是返回数据了）",-1)),l[246]||(l[246]=i("ul",null,[i("li",null,[i("p",null,"创建存储函数"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER $")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 标准语法")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FUNCTION"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," 函数名称"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(参数 数据类型)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"RETURNS"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 返回值类型")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEGIN")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	执行的sql语句;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	RETURN"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 结果;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER ;")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"调用存储函数，因为有返回值，所以使用 SELECT 调用"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 函数名称(实际参数);")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"删除存储函数"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"DROP"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FUNCTION"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 函数名称;")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"定义存储函数，获取学生表中成绩大于95分的学生数量"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER $")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FUNCTION"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fun_test"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"RETURN"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," INT")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEGIN")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	-- 定义统计变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	DECLARE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," result "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	-- 查询成绩大于95分的学生数量，给统计变量赋值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	SELECT"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," COUNT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(score) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INTO"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," result "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," student "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"WHERE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," score "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 95"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	-- 返回统计结果")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	SELECT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," result;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER ;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 调用fun_test存储函数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," fun_test();")])])]),i("button",{class:"code-block-unfold-btn"})])])],-1)),l[247]||(l[247]=i("hr",null,null,-1)),l[248]||(l[248]=i("h3",{id:"触发器",tabindex:"-1"},[s("触发器 "),i("a",{class:"header-anchor",href:"#触发器","aria-label":'Permalink to "触发器"'},"​")],-1)),l[249]||(l[249]=i("h4",{id:"基本介绍-2",tabindex:"-1"},[s("基本介绍 "),i("a",{class:"header-anchor",href:"#基本介绍-2","aria-label":'Permalink to "基本介绍"'},"​")],-1)),l[250]||(l[250]=i("p",null,"触发器是与表有关的数据库对象，在 insert/update/delete 之前或之后触发并执行触发器中定义的 SQL 语句",-1)),l[251]||(l[251]=i("ul",null,[i("li",null,"触发器的这种特性可以协助应用在数据库端确保数据的完整性 、日志记录 、数据校验等操作")],-1)),l[252]||(l[252]=i("ul",null,[i("li",null,"使用别名 NEW 和 OLD 来引用触发器中发生变化的记录内容，这与其他的数据库是相似的"),i("li",null,"现在触发器还只支持行级触发，不支持语句级触发")],-1)),l[253]||(l[253]=i("table",null,[i("thead",null,[i("tr",null,[i("th",null,"触发器类型"),i("th",null,"OLD的含义"),i("th",null,"NEW的含义")])]),i("tbody",null,[i("tr",null,[i("td",null,"INSERT 型触发器"),i("td",null,"无 (因为插入前状态无数据)"),i("td",null,"NEW 表示将要或者已经新增的数据")]),i("tr",null,[i("td",null,"UPDATE 型触发器"),i("td",null,"OLD 表示修改之前的数据"),i("td",null,"NEW 表示将要或已经修改后的数据")]),i("tr",null,[i("td",null,"DELETE 型触发器"),i("td",null,"OLD 表示将要或者已经删除的数据"),i("td",null,"无 (因为删除后状态无数据)")])])],-1)),l[254]||(l[254]=i("hr",null,null,-1)),l[255]||(l[255]=i("h4",{id:"基本操作-1",tabindex:"-1"},[s("基本操作 "),i("a",{class:"header-anchor",href:"#基本操作-1","aria-label":'Permalink to "基本操作"'},"​")],-1)),l[256]||(l[256]=i("ul",null,[i("li",null,[i("p",null,"创建触发器"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER $")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," TRIGGER"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," 触发器名称")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEFORE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"|"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"AFTER"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  INSERT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"|"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"UPDATE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"|"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"DELETE")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"ON"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 表名")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[FOR EACH ROW]  "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 行级触发器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEGIN")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	触发器要执行的功能;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER ;")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"查看触发器的状态、语法等信息"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"SHOW TRIGGERS;")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"删除触发器，如果没有指定 schema_name，默认为当前数据库"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"DROP"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," TRIGGER"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," [schema_name.]trigger_name;")])])]),i("button",{class:"code-block-unfold-btn"})])])],-1)),l[257]||(l[257]=i("hr",null,null,-1)),l[258]||(l[258]=i("h4",{id:"触发演示",tabindex:"-1"},[s("触发演示 "),i("a",{class:"header-anchor",href:"#触发演示","aria-label":'Permalink to "触发演示"'},"​")],-1)),l[259]||(l[259]=i("p",null,"通过触发器记录账户表的数据变更日志。包含：增加、修改、删除",-1)),l[260]||(l[260]=i("ul",null,[i("li",null,[i("p",null,"数据准备"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 创建db9数据库")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," DATABASE"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," db9"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 使用db9数据库")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"USE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," db9;")])])]),i("button",{class:"code-block-unfold-btn"})]),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 创建账户表account")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," TABLE"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," account"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	id "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," PRIMARY KEY"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," AUTO_INCREMENT,	"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 账户id")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	NAME"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," VARCHAR"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"20"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"),					"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 姓名")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	money"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," DOUBLE						"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 余额")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 添加数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INSERT INTO"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," account "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"VALUES"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"NULL"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'张三'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1000"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"),("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"NULL"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'李四'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2000"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")])])]),i("button",{class:"code-block-unfold-btn"})]),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 创建日志表account_log")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," TABLE"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," account_log"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	id "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," PRIMARY KEY"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," AUTO_INCREMENT,	"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 日志id")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	operation "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"VARCHAR"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"20"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"),				"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 操作类型 (insert update delete)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	operation_time "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"DATETIME"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",			"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 操作时间")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	operation_id "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",					"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 操作表的id")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	operation_params "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"VARCHAR"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"200"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")       "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 操作参数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"创建 INSERT 型触发器"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER $")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," TRIGGER"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," account_insert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"AFTER"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," INSERT")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"ON"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," account")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FOR"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," EACH "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"ROW")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEGIN")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	INSERT INTO"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," account_log "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"VALUES"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"NULL"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'INSERT'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"NOW"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(),"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"new"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"id"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"CONCAT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'插入后{id='"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"new"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"id"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"',name='"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"new"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"',money='"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"new"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"money"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'}'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER ;")])])]),i("button",{class:"code-block-unfold-btn"})]),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 向account表添加记录")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INSERT INTO"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," account "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"VALUES"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"NULL"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'王五'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3000"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 查询日志表")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," account_log;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"/*")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"id	operation	operation_time		operation_id	operation_params")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"1	INSERT	   	2021-01-26 19:51:11		3	     插入后{id=3,name=王五money=2000}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"*/")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"创建 UPDATE 型触发器"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER $")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," TRIGGER"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," account_update")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"AFTER"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," UPDATE")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"ON"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," account")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FOR"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," EACH "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"ROW")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEGIN")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	INSERT INTO"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," account_log "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"VALUES"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"NULL"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'UPDATE'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"NOW"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(),"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"new"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"id"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"CONCAT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'修改前{id='"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"old"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"id"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"',name='"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"old"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"',money='"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"old"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"money"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'}'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'修改后{id='"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"new"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"id"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"',name='"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"new"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"',money='"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"new"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"money"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'}'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER ;")])])]),i("button",{class:"code-block-unfold-btn"})]),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 修改account表")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"UPDATE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," account "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SET"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," money="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3500"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," WHERE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," id"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 查询日志表")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," account_log;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"/*")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"id	operation	operation_time		operation_id	  operation_params")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"2	UPDATE	   	2021-01-26 19:58:54		2		 更新前{id=2,name=李四money=1000}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"												 更新后{id=2,name=李四money=200}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"*/")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"创建 DELETE 型触发器"),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER $")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," TRIGGER"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," account_delete")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"AFTER"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," DELETE")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"ON"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," account")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FOR"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," EACH "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"ROW")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEGIN")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	INSERT INTO"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," account_log "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"VALUES"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"NULL"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'DELETE'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"NOW"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(),"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"old"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"id"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"CONCAT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'删除前{id='"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"old"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"id"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"',name='"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"old"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"',money='"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"old"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"money"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'}'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER ;")])])]),i("button",{class:"code-block-unfold-btn"})]),i("div",{class:"language-sql max-h-300px"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 删除account表数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"DELETE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," account "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"WHERE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," id"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 查询日志表")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," account_log;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"/*")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"id	operation	operation_time		operation_id	operation_params")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"3	DELETE		2021-01-26 20:02:48		3	    删除前{id=3,name=王五money=2000}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"*/")])])]),i("button",{class:"code-block-unfold-btn"})])])],-1)),l[261]||(l[261]=i("hr",null,null,-1)),l[262]||(l[262]=i("h2",{id:"范式",tabindex:"-1"},[s("范式 "),i("a",{class:"header-anchor",href:"#范式","aria-label":'Permalink to "范式"'},"​")],-1)),l[263]||(l[263]=i("h3",{id:"第一范式",tabindex:"-1"},[s("第一范式 "),i("a",{class:"header-anchor",href:"#第一范式","aria-label":'Permalink to "第一范式"'},"​")],-1)),l[264]||(l[264]=i("p",null,[s("建立科学的，"),i("strong",null,"规范的数据表"),s("就需要满足一些规则来优化数据的设计和存储，这些规则就称为范式")],-1)),l[265]||(l[265]=i("p",null,[s("**1NF：**数据库表的每一列都是不可分割的原子数据项，不能是集合、数组等非原子数据项。即表中的某个列有多个值时，必须拆分为不同的列。简而言之，"),i("strong",null,"第一范式每一列不可再拆分，称为原子性")],-1)),l[266]||(l[266]=i("p",null,"基本表：",-1)),l[267]||(l[267]=i("figure",null,[i("img",{src:"https://gcore.jsdelivr.net/gh/imLKlauS/blog-picture@main/blogs/image-20250319234724584.png",alt:"image-20250319234724584",loading:"lazy",decoding:"async",class:"lazy"})],-1)),l[268]||(l[268]=i("p",null,"第一范式表：",-1)),l[269]||(l[269]=i("figure",null,[i("img",{src:"https://gcore.jsdelivr.net/gh/imLKlauS/blog-picture@main/blogs/image-20250319234816785.png",alt:"image-20250319234816785",loading:"lazy",decoding:"async",class:"lazy"})],-1)),l[270]||(l[270]=i("hr",null,null,-1)),l[271]||(l[271]=i("h3",{id:"第二范式",tabindex:"-1"},[s("第二范式 "),i("a",{class:"header-anchor",href:"#第二范式","aria-label":'Permalink to "第二范式"'},"​")],-1)),l[272]||(l[272]=i("p",null,[s("**2NF：**在满足第一范式的基础上，非主属性完全依赖于主码（主关键字、主键），消除非主属性对主码的部分函数依赖。简而言之，"),i("strong",null,"表中的每一个字段 （所有列）都完全依赖于主键，记录的唯一性")],-1)),l[273]||(l[273]=i("p",null,"作用：遵守第二范式减少数据冗余，通过主键区分相同数据。",-1)),l[274]||(l[274]=i("ol",null,[i("li",null,[s("函数依赖：A → B，如果通过 A 属性(属性组)的值，可以确定唯一 B 属性的值，则称 B 依赖于 A "),i("ul",null,[i("li",null,"学号 → 姓名；(学号，课程名称) → 分数")])]),i("li",null,[s("完全函数依赖：A → B，如果A是一个属性组，则 B 属性值的确定需要依赖于 A 属性组的所有属性值 "),i("ul",null,[i("li",null,"(学号，课程名称) → 分数")])]),i("li",null,[s("部分函数依赖：A → B，如果 A 是一个属性组，则 B 属性值的确定只需要依赖于 A 属性组的某些属性值 "),i("ul",null,[i("li",null,"(学号，课程名称) → 姓名")])]),i("li",null,[s("传递函数依赖：A → B，B → C，如果通过A属性(属性组)的值，可以确定唯一 B 属性的值，在通过 B 属性(属性组)的值，可以确定唯一 C 属性的值，则称 C 传递函数依赖于 A "),i("ul",null,[i("li",null,"学号 → 系名，系名 → 系主任")])]),i("li",null,[s("码：如果在一张表中，一个属性或属性组，被其他所有属性所完全依赖，则称这个属性(属性组)为该表的码 "),i("ul",null,[i("li",null,"该表中的码：(学号，课程名称)"),i("li",null,"主属性：码属性组中的所有属性"),i("li",null,"非主属性：除码属性组以外的属性")])])],-1)),l[275]||(l[275]=i("figure",null,[i("img",{src:"https://gcore.jsdelivr.net/gh/imLKlauS/blog-picture@main/blogs/image-20250319234838513.png",alt:"image-20250319234838513",loading:"lazy",decoding:"async",class:"lazy"})],-1)),l[276]||(l[276]=i("hr",null,null,-1)),l[277]||(l[277]=i("h3",{id:"第三范式",tabindex:"-1"},[s("第三范式 "),i("a",{class:"header-anchor",href:"#第三范式","aria-label":'Permalink to "第三范式"'},"​")],-1)),l[278]||(l[278]=i("p",null,[s("**3NF：**在满足第二范式的基础上，表中的任何属性不依赖于其它非主属性，消除传递依赖。简而言之，"),i("strong",null,"非主键都直接依赖于主键，而不是通过其它的键来间接依赖于主键"),s("。")],-1)),l[279]||(l[279]=i("p",null,"作用：可以通过主键 id 区分相同数据，修改数据的时候只需要修改一张表（方便修改），反之需要修改多表。",-1)),l[280]||(l[280]=i("figure",null,[i("img",{src:"https://gcore.jsdelivr.net/gh/imLKlauS/blog-picture@main/blogs/image-20250319234912807.png",alt:"image-20250319234912807",loading:"lazy",decoding:"async",class:"lazy"})],-1)),l[281]||(l[281]=i("hr",null,null,-1)),l[282]||(l[282]=i("h3",{id:"总结",tabindex:"-1"},[s("总结 "),i("a",{class:"header-anchor",href:"#总结","aria-label":'Permalink to "总结"'},"​")],-1)),l[283]||(l[283]=i("figure",null,[i("img",{src:"https://gcore.jsdelivr.net/gh/imLKlauS/blog-picture@main/blogs/image-20250319235102890.png",alt:"image-20250319235102890",loading:"lazy",decoding:"async",class:"lazy"})],-1))]),"main-header":t(()=>[h(a.$slots,"main-header")]),"main-header-after":t(()=>[h(a.$slots,"main-header-after")]),"main-nav":t(()=>[h(a.$slots,"main-nav")]),"main-content-before":t(()=>[h(a.$slots,"main-content-before")]),"main-content":t(()=>[h(a.$slots,"main-content")]),"main-content-after":t(()=>[h(a.$slots,"main-content-after")]),"main-nav-before":t(()=>[h(a.$slots,"main-nav-before")]),"main-nav-after":t(()=>[h(a.$slots,"main-nav-after")]),comment:t(()=>[h(a.$slots,"comment")]),footer:t(()=>[h(a.$slots,"footer")]),aside:t(()=>[h(a.$slots,"aside")]),"aside-custom":t(()=>[h(a.$slots,"aside-custom")]),default:t(()=>[h(a.$slots,"default")]),_:3},8,["frontmatter"])}}};export{W as default,L as usePageData};
