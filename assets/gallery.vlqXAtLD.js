var b=(a,t,o)=>new Promise((e,r)=>{var i=n=>{try{u(o.next(n))}catch(s){r(s)}},d=n=>{try{u(o.throw(n))}catch(s){r(s)}},u=n=>n.done?e(n.value):Promise.resolve(n.value).then(i,d);u((o=o.apply(a,t)).next())});import{I as k,a0 as A,a1 as g,a2 as _,H as C,A as x,a8 as w,a5 as p,ah as K,ai as S,aj as T,aa as G,W as f,ak as O,al as Y,a3 as h,ad as F,ab as L,F as l,L as j,_ as I}from"./framework.CyQERZzy.js";import{i as M,a as U,b as H,d as N,e as W,v as z,w as J,_ as q,g as Q,h as X}from"./app.Bo4Gu_M_.js";import"./chunks/@vueuse/motion.C0680yyY.js";import"./chunks/dayjs.BSMtxqtT.js";import{_ as Z}from"./YunPageHeader.vue_vue_type_script_setup_true_lang.Du2MZPyS.js";import{u as ee,a as te}from"./chunks/vue-router.BkAbAJBt.js";import{u as oe}from"./chunks/vue-i18n.CvwbWgfE.js";function ne(a){const t=new TextEncoder;return window.crypto.subtle.importKey("raw",t.encode(a),"PBKDF2",!1,["deriveBits","deriveKey"])}function ae(a,t){return window.crypto.subtle.deriveKey({name:"PBKDF2",salt:t,iterations:1e5,hash:"SHA-256"},a,{name:"AES-CBC",length:256},!0,["encrypt","decrypt"])}function re(){const a=M(),{encrypt:t}=a.value,o=Uint8Array.from(Object.values(t.iv)),e=Uint8Array.from(Object.values(t.salt));return{decrypt:(r,i)=>b(null,null,function*(){if(!r)return;const d=yield ne(r),u=yield ae(d,e),n=Uint8Array.from(i,y=>y.charCodeAt(0)),s=yield window.crypto.subtle.decrypt({name:"AES-CBC",iv:o},u,n);return new TextDecoder().decode(s)})}}const se=k({__name:"YunGallery",props:{photos:{}},setup(a){return(t,o)=>{const e=A("VAGallery");return _(),g(e,{photos:a.photos},null,8,["photos"])}}}),le={key:0,"w-full":"","pt-14":"","pb-10":""},ce={class:"decrypt-password-container w-full sm:w-1/2","flex-center":"","m-auto":"",relative:""},ie={key:1},ue=k({__name:"ValaxyGalleryDecrypt",props:{encryptedPhotos:{}},setup(a,{expose:t}){const o=a,e=C(""),r=C(""),i=C(!1),{decrypt:d}=re();function u(){return b(this,null,function*(){const y=o.encryptedPhotos;if(y)try{const c=yield d(e.value,y);r.value=c||""}catch(c){i.value=!0,console.error(c)}})}function n(){r.value="",e.value=""}const s=x(()=>JSON.parse(r.value||"[]")||[]);return t({photos:s}),(y,c)=>{const v=se;return _(),w("div",null,[r.value?(_(),w("div",ie,[f(v,{photos:s.value},null,8,["photos"]),p("div",{"w-full":"","text-center":"","mt-8":""},[p("button",{"m-auto":"",class:"btn","font-bold":"",onClick:n}," Encrypt Again ")])])):(_(),w("div",le,[p("div",ce,[K(p("input",{"onUpdate:modelValue":c[0]||(c[0]=m=>e.value=m),"w-full":"",border:"","pl-5":"","pr-11":"","py-3":"",rounded:"","hover:shadow":"",transition:"",type:"password",placeholder:"Enter password",class:G(i.value&&"border-red"),onInput:c[1]||(c[1]=m=>i.value=!1),onKeyup:T(u,["enter"])},null,34),[[S,e.value]]),p("div",{"cursor-pointer":"",absolute:"","text-2xl":"","i-ri-arrow-right-circle-line":"","right-3":"","text-gray":"","hover:text-black":"",onClick:u})])]))])}}}),pe={text:"center",class:"yun-text-light",p:"2"},de={class:"page-action",text:"center"},ye=["title"],_e=k({__name:"gallery",setup(a){const t=ee(),{t:o}=oe(),e=U(),r=H(e);N([W({"@type":"CollectionPage"})]);const i=te(),d=x(()=>i.meta.frontmatter.photos||[]),n=z().value.addons["valaxy-addon-lightgallery"]?O(()=>I(()=>import("./YunGallery.D1Aho222.js"),[])):()=>null,s=J(),y=Y("galleryRef"),c=x(()=>{var v;return d.value.length||((v=y.value)==null?void 0:v.photos.length)});return(v,m)=>{const P=q,D=Z,E=ue,R=A("RouterView"),V=Q,$=X;return _(),w(j,null,[f(V,null,{default:h(()=>[f(P),f(R,null,{default:h(({Component:B})=>[(_(),g(F(B),null,{"main-header":h(()=>[f(D,{title:l(r)||l(o)("title.gallery"),icon:l(e).icon||"i-ri-gallery-line",color:l(e).color,"page-title-class":l(e).pageTitleClass},null,8,["title","icon","color","page-title-class"])]),default:h(()=>[p("div",pe,L(l(o)("counter.photos",c.value||0)),1),p("div",de,[p("a",{class:"yun-icon-btn",title:l(o)("accessibility.back"),onClick:m[0]||(m[0]=()=>l(t).back())},[...m[1]||(m[1]=[p("div",{"i-ri-arrow-go-back-line":""},null,-1)])],8,ye)]),l(s)?(_(),g(E,{key:0,ref_key:"galleryRef",ref:y,"encrypted-photos":l(s)},null,8,["encrypted-photos"])):(_(),g(l(n),{key:1,photos:d.value},null,8,["photos"]))]),_:1}))]),_:1})]),_:1}),f($)],64)}}}),xe=Object.freeze(Object.defineProperty({__proto__:null,default:_e},Symbol.toStringTag,{value:"Module"}));export{se as _,xe as g};
