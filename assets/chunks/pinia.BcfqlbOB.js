import"./@vueuse/motion.D4J2SB46.js";import{H as t,G as e,P as o,Q as s,R as n,M as i,w as r,x as a,y as c,S as h,T as f,U as u,A as l,O as p,V as d}from"../framework.GzYmdVjK.js";function _(t,e={},o){for(const s in t){const n=t[s],i=o?`${o}:${s}`:s;"object"==typeof n&&null!==n?_(n,e,i):"function"==typeof n&&(e[i]=n)}return e}const k={run:t=>t()},b=void 0!==console.createTask?console.createTask:()=>k;function y(t,e){const o=e.shift(),s=b(o);return t.reduce((t,o)=>t.then(()=>s.run(()=>o(...e))),Promise.resolve())}function v(t,e){const o=e.shift(),s=b(o);return Promise.all(t.map(t=>s.run(()=>t(...e))))}function m(t,e){for(const o of[...t])o(e)}class H{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(t,e,o={}){if(!t||"function"!=typeof e)return()=>{};const s=t;let n;for(;this._deprecatedHooks[t];)n=this._deprecatedHooks[t],t=n.to;if(n&&!o.allowDeprecated){let t=n.message;t||(t=`${s} hook has been deprecated`+(n.to?`, please use ${n.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(t)||this._deprecatedMessages.add(t)}if(!e.name)try{Object.defineProperty(e,"name",{get:()=>"_"+t.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[t]=this._hooks[t]||[],this._hooks[t].push(e),()=>{e&&(this.removeHook(t,e),e=void 0)}}hookOnce(t,e){let o,s=(...t)=>("function"==typeof o&&o(),o=void 0,s=void 0,e(...t));return o=this.hook(t,s),o}removeHook(t,e){if(this._hooks[t]){const o=this._hooks[t].indexOf(e);-1!==o&&this._hooks[t].splice(o,1),0===this._hooks[t].length&&delete this._hooks[t]}}deprecateHook(t,e){this._deprecatedHooks[t]="string"==typeof e?{to:e}:e;const o=this._hooks[t]||[];delete this._hooks[t];for(const s of o)this.hook(t,s)}deprecateHooks(t){Object.assign(this._deprecatedHooks,t);for(const e in t)this.deprecateHook(e,t[e])}addHooks(t){const e=_(t),o=Object.keys(e).map(t=>this.hook(t,e[t]));return()=>{for(const t of o.splice(0,o.length))t()}}removeHooks(t){const e=_(t);for(const o in e)this.removeHook(o,e[o])}removeAllHooks(){for(const t in this._hooks)delete this._hooks[t]}callHook(t,...e){return e.unshift(t),this.callHookWith(y,t,...e)}callHookParallel(t,...e){return e.unshift(t),this.callHookWith(v,t,...e)}callHookWith(t,e,...o){const s=this._before||this._after?{name:e,args:o,context:{}}:void 0;this._before&&m(this._before,s);const n=t(e in this._hooks?[...this._hooks[e]]:[],o);return n instanceof Promise?n.finally(()=>{this._after&&s&&m(this._after,s)}):(this._after&&s&&m(this._after,s),n)}beforeEach(t){return this._before=this._before||[],this._before.push(t),()=>{if(void 0!==this._before){const e=this._before.indexOf(t);-1!==e&&this._before.splice(e,1)}}}afterEach(t){return this._after=this._after||[],this._after.push(t),()=>{if(void 0!==this._after){const e=this._after.indexOf(t);-1!==e&&this._after.splice(e,1)}}}}function g(){return new H}let O;const j=t=>O=t,S=Symbol();function $(t){return t&&"object"==typeof t&&"[object Object]"===Object.prototype.toString.call(t)&&"function"!=typeof t.toJSON}var w,P;(P=w||(w={})).direct="direct",P.patchObject="patch object",P.patchFunction="patch function";const M=()=>{};function E(t,e,o,s=M){t.add(e);const n=()=>{t.delete(e)&&s()};return!o&&r()&&a(n),n}function x(t,...e){t.forEach(t=>{t(...e)})}const W=t=>t(),A=Symbol(),I=Symbol();function T(t,e){t instanceof Map&&e instanceof Map?e.forEach((e,o)=>t.set(o,e)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const o in e){if(!e.hasOwnProperty(o))continue;const i=e[o],r=t[o];$(r)&&$(i)&&t.hasOwnProperty(o)&&!s(i)&&!n(i)?t[o]=T(r,i):t[o]=i}return t}const C=Symbol();function F(t){return!$(t)||!Object.prototype.hasOwnProperty.call(t,C)}const{assign:D}=Object;function G(t){return!(!s(t)||!t.effect)}function J(r,a,f={},u,l,p){let d;const _=D({actions:{}},f),k={deep:!0};let b,y,v,m=new Set,H=new Set;const g=u.state.value[r];let O;function S(t){let e;b=y=!1,"function"==typeof t?(t(u.state.value[r]),e={type:w.patchFunction,storeId:r,events:v}):(T(u.state.value[r],t),e={type:w.patchObject,payload:t,storeId:r,events:v});const o=O=Symbol();h().then(()=>{O===o&&(b=!0)}),y=!0,x(m,e,u.state.value[r])}p||g||(u.state.value[r]={}),t({});const $=p?function(){const{state:t}=f,e=t?t():{};this.$patch(t=>{D(t,e)})}:M;const P=(t,e="")=>{if(A in t)return t[I]=e,t;const o=function(){j(u);const e=Array.from(arguments),s=new Set,n=new Set;let i;x(H,{args:e,name:o[I],store:J,after:function(t){s.add(t)},onError:function(t){n.add(t)}});try{i=t.apply(this&&this.$id===r?this:J,e)}catch(a){throw x(n,a),a}return i instanceof Promise?i.then(t=>(x(s,t),t)).catch(t=>(x(n,t),Promise.reject(t))):(x(s,i),i)};return o[A]=!0,o[I]=e,o},C={_p:u,$id:r,$onAction:E.bind(null,H),$patch:S,$reset:$,$subscribe(t,e={}){const o=E(m,t,e.detached,()=>s()),s=d.run(()=>c(()=>u.state.value[r],o=>{("sync"===e.flush?y:b)&&t({storeId:r,type:w.direct,events:v},o)},D({},k,e)));return o},$dispose:function(){d.stop(),m.clear(),H.clear(),u._s.delete(r)}},J=e(C);u._s.set(r,J);const N=(u._a&&u._a.runWithContext||W)(()=>u._e.run(()=>(d=o()).run(()=>a({action:P}))));for(const t in N){const e=N[t];if(s(e)&&!G(e)||n(e))p||(g&&F(e)&&(s(e)?e.value=g[t]:T(e,g[t])),u.state.value[r][t]=e);else if("function"==typeof e){const o=P(e,t);N[t]=o,_.actions[t]=e}}return D(J,N),D(i(J),N),Object.defineProperty(J,"$state",{get:()=>u.state.value[r],set:t=>{S(e=>{D(e,t)})}}),u._p.forEach(t=>{D(J,d.run(()=>t({store:J,app:u._a,pinia:u,options:_})))}),g&&p&&f.hydrate&&f.hydrate(J.$state,g),b=!0,y=!0,J}function N(t,e,o){let s;const n="function"==typeof e;function i(o,i){const r=d();(o=o||(r?p(S,null):null))&&j(o),(o=O)._s.has(t)||(n?J(t,e,s,o):function(t,e,o){const{state:s,actions:n,getters:i}=e,r=o.state.value[t];let a;a=J(t,function(){r||(o.state.value[t]=s?s():{});const e=f(o.state.value[t]);return D(e,n,Object.keys(i||{}).reduce((e,s)=>(e[s]=u(l(()=>{j(o);const e=o._s.get(t);return i[s].call(e,e)})),e),{}))},e,o,0,!0)}(t,s,o));return o._s.get(t)}return s=n?o:e,i.$id=t,i}const Q=({isClient:e,initialState:s,app:n})=>{const i=function(){const e=o(!0),s=e.run(()=>t({}));let n=[],i=[];const r=u({install(t){j(r),r._a=t,t.provide(S,r),t.config.globalProperties.$pinia=r,i.forEach(t=>n.push(t)),i=[]},use(t){return this._a?n.push(t):i.push(t),this},_p:n,_a:null,_e:e,_s:new Map,state:s});return r}();n.use(i),e?i.state.value=s.pinia||{}:s.pinia=i.state.value};export{g as c,N as d,Q as i};
