import{_ as i}from"./ValaxyMain.vue_vue_type_style_index_0_lang.JH5hC9Ai.js";import{f as s,a as l,u as a}from"./chunks/vue-router.BWaMq8wg.js";import{O as h,a0 as t,R as k,S as n,W as e,X as p,u as E,P as r,D as d}from"./framework.BHkQnU1p.js";import"./app.BxE8K2Rx.js";import"./chunks/dayjs.CORIJbU0.js";import"./chunks/vue-i18n.CvY6KzGi.js";import"./chunks/nprogress.BHm3HSQC.js";import"./chunks/pinia.BY9HMtis.js";import"./chunks/@vueuse/motion.CUAOwWQQ.js";import"./YunComment.vue_vue_type_style_index_0_lang.DHKwr2pH.js";import"./index.TQnGKZgq.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.De5tC3Nd.js";import"./post.Cc4mkgMZ.js";const g=s("/posts/MySQL_Basic",(async i=>JSON.parse('{"title":"MySQL - 简介与架构","description":"","frontmatter":{"title":"MySQL - 简介与架构","author":"imklaus","top":119,"tags":["SQL"],"categories":["MySQL","基础篇"],"date":"2025-3-19 00:01:20","outline":"deep","excerpt_type":"html","end":false},"headers":[{"level":2,"title":"简介","slug":"简介","link":"#简介","children":[{"level":3,"title":"数据库","slug":"数据库","link":"#数据库","children":[]},{"level":3,"title":"MySQL","slug":"mysql","link":"#mysql","children":[]}]},{"level":2,"title":"体系架构","slug":"体系架构","link":"#体系架构","children":[{"level":3,"title":"整体架构","slug":"整体架构","link":"#整体架构","children":[]},{"level":3,"title":"建立连接","slug":"建立连接","link":"#建立连接","children":[]},{"level":3,"title":"执行流程","slug":"执行流程","link":"#执行流程","children":[]},{"level":3,"title":"终止流程","slug":"终止流程","link":"#终止流程","children":[]},{"level":3,"title":"常用工具","slug":"常用工具","link":"#常用工具","children":[]}]},{"level":2,"title":"高级结构","slug":"高级结构","link":"#高级结构","children":[{"level":3,"title":"视图","slug":"视图","link":"#视图","children":[]},{"level":3,"title":"存储过程","slug":"存储过程","link":"#存储过程","children":[]},{"level":3,"title":"触发器","slug":"触发器","link":"#触发器","children":[]}]},{"level":2,"title":"范式","slug":"范式","link":"#范式","children":[{"level":3,"title":"第一范式","slug":"第一范式","link":"#第一范式","children":[]},{"level":3,"title":"第二范式","slug":"第二范式","link":"#第二范式","children":[]},{"level":3,"title":"第三范式","slug":"第三范式","link":"#第三范式","children":[]},{"level":3,"title":"总结","slug":"总结","link":"#总结","children":[]}]}],"relativePath":"pages/posts/MySQL_Basic.md","lastUpdated":null}')),{lazy:(i,s)=>i.name===s.name}),y={__name:"MySQL_Basic",setup(s,{expose:y}){var c;const{data:u}=g(),o=a(),F=l(),A=Object.assign(F.meta.frontmatter||{},(null==(c=u.value)?void 0:c.frontmatter)||{});F.meta.frontmatter=A,o.currentRoute.value.data=u.value,d("valaxy:frontmatter",A),globalThis.$frontmatter=A;return y({frontmatter:{title:"MySQL - 简介与架构",author:"imklaus",top:119,tags:["SQL"],categories:["MySQL","基础篇"],date:"2025-3-19 00:01:20",outline:"deep",excerpt_type:"html",end:!1}}),(s,l)=>{const a=i;return r(),h(a,{frontmatter:E(A)},{"main-content-md":t((()=>[l[0]||(l[0]=n("h2",{id:"简介",tabindex:"-1"},[p("简介 "),n("a",{class:"header-anchor",href:"#简介","aria-label":'Permalink to "简介"'},"​")],-1)),l[1]||(l[1]=n("h3",{id:"数据库",tabindex:"-1"},[p("数据库 "),n("a",{class:"header-anchor",href:"#数据库","aria-label":'Permalink to "数据库"'},"​")],-1)),l[2]||(l[2]=n("p",null,"数据库：DataBase，简称 DB，存储和管理数据的仓库",-1)),l[3]||(l[3]=n("p",null,"数据库的优势：",-1)),l[4]||(l[4]=n("ul",null,[n("li",null,"可以持久化存储数据"),n("li",null,"方便存储和管理数据"),n("li",null,"使用了统一的方式操作数据库 SQL")],-1)),l[5]||(l[5]=n("p",null,"数据库、数据表、数据的关系介绍：",-1)),l[6]||(l[6]=n("ul",null,[n("li",null,[n("p",null,"数据库"),n("ul",null,[n("li",null,"用于存储和管理数据的仓库"),n("li",null,"一个库中可以包含多个数据表")])]),n("li",null,[n("p",null,"数据表"),n("ul",null,[n("li",null,"数据库最重要的组成部分之一"),n("li",null,"由纵向的列和横向的行组成（类似 excel 表格）"),n("li",null,"可以指定列名、数据类型、约束等"),n("li",null,"一个表中可以存储多条数据")])]),n("li",null,[n("p",null,"数据：想要永久化存储的数据")])],-1)),l[7]||(l[7]=n("p",null,[p("参考视频："),n("a",{href:"https://www.bilibili.com/video/BV1zJ411M7TB",target:"_blank",rel:"noreferrer"},"https://www.bilibili.com/video/BV1zJ411M7TB")],-1)),l[8]||(l[8]=n("p",null,[p("参考专栏："),n("a",{href:"https://time.geekbang.org/column/intro/139",target:"_blank",rel:"noreferrer"},"https://time.geekbang.org/column/intro/139")],-1)),l[9]||(l[9]=n("p",null,[p("参考书籍："),n("a",{href:"https://book.douban.com/subject/35231266/",target:"_blank",rel:"noreferrer"},"https://book.douban.com/subject/35231266/")],-1)),e(" more "),l[10]||(l[10]=n("hr",null,null,-1)),l[11]||(l[11]=n("h3",{id:"mysql",tabindex:"-1"},[p("MySQL "),n("a",{class:"header-anchor",href:"#mysql","aria-label":'Permalink to "MySQL"'},"​")],-1)),l[12]||(l[12]=n("p",null,"MySQL 数据库是一个最流行的关系型数据库管理系统之一，关系型数据库是将数据保存在不同的数据表中，而且表与表之间可以有关联关系，提高了灵活性",-1)),l[13]||(l[13]=n("p",null,"缺点：数据存储在磁盘中，导致读写性能差，而且数据关系复杂，扩展性差",-1)),l[14]||(l[14]=n("p",null,"MySQL 所使用的 SQL 语句是用于访问数据库最常用的标准化语言",-1)),l[15]||(l[15]=n("p",null,"MySQL 配置：",-1)),l[16]||(l[16]=n("ul",null,[n("li",null,[n("p",null,[p("MySQL 安装："),n("a",{href:"https://www.jianshu.com/p/ba48f1e386f0",target:"_blank",rel:"noreferrer"},"https://www.jianshu.com/p/ba48f1e386f0")])]),n("li",null,[n("p",null,"MySQL 配置："),n("ul",null,[n("li",null,[n("p",null,"修改 MySQL 默认字符集：安装 MySQL 之后第一件事就是修改字符集编码"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"vim "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"etc"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"mysql"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"my"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"cnf")]),p("\n"),n("span",{class:"line"}),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"添加如下内容：")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[mysqld]")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"character-set-server="),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"utf8")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"collation"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-server="),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"utf8_general_ci")]),p("\n"),n("span",{class:"line"}),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[client]")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"default-character-set="),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"utf8")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"启动 MySQL 服务："),n("div",{style:{"max-height":"300px"},class:"language-shell vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"shell"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"systemctl"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," start/restart"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," mysql")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"登录 MySQL："),n("div",{style:{"max-height":"300px"},class:"language-shell vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"shell"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mysql"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -u"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," root"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -p"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"  敲回车，输入密码")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"初始密码查看：cat"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /var/log/mysqld.log")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"在root@localhost:"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"   后面的就是初始密码")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"查看默认字符集命令："),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"SHOW VARIABLES "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"LIKE"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 'char%'"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"修改MySQL登录密码："),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"set"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," global"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," validate_password_policy"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"set"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," global"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," validate_password_length"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  ")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"set"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," password=password"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'密码'"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"授予远程连接权限（MySQL 内输入）："),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 授权")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"grant"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," all privileges "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"on"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," to"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 'root'"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," @"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'%'"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," identified "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"by"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," '密码'"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 刷新")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"flush privileges;")])])]),n("button",{class:"collapse"})])])])]),n("li",null,[n("p",null,"修改 MySQL 绑定 IP："),n("div",{style:{"max-height":"300px"},class:"language-shell vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"shell"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"cd"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /etc/mysql/mysql.conf.d")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," chmod"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 666"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," mysqld.cnf"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vim"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," mysqld.cnf"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# bind-address = 127.0.0.1注释该行")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"关闭 Linux 防火墙"),n("div",{style:{"max-height":"300px"},class:"language-shell vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"shell"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"systemctl"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," stop"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," firewalld.service")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 放行3306端口")])])]),n("button",{class:"collapse"})])])],-1)),l[17]||(l[17]=n("hr",null,null,-1)),l[18]||(l[18]=n("h2",{id:"体系架构",tabindex:"-1"},[p("体系架构 "),n("a",{class:"header-anchor",href:"#体系架构","aria-label":'Permalink to "体系架构"'},"​")],-1)),l[19]||(l[19]=n("h3",{id:"整体架构",tabindex:"-1"},[p("整体架构 "),n("a",{class:"header-anchor",href:"#整体架构","aria-label":'Permalink to "整体架构"'},"​")],-1)),l[20]||(l[20]=n("p",null,"体系结构详解：",-1)),l[21]||(l[21]=n("ul",null,[n("li",null,[p("第一层：网络连接层 "),n("ul",null,[n("li",null,"一些客户端和链接服务，包含本地 Socket 通信和大多数基于客户端/服务端工具实现的 TCP/IP 通信，主要完成一些类似于连接处理、授权认证、及相关的安全方案"),n("li",null,[p("在该层上引入了"),n("strong",null,"连接池"),p(" Connection Pool 的概念，管理缓冲用户连接，线程处理等需要缓存的需求")]),n("li",null,"在该层上实现基于 SSL 的安全链接，服务器也会为安全接入的每个客户端验证它所具有的操作权限")])])],-1)),l[22]||(l[22]=n("ul",null,[n("li",null,[p("第二层：核心服务层 "),n("ul",null,[n("li",null,[p("查询缓存、分析器、优化器、执行器等，涵盖 MySQL 的大多数核心服务功能，所有的内置函数（日期、数学、加密函数等） "),n("ul",null,[n("li",null,"Management Serveices & Utilities：系统管理和控制工具，备份、安全、复制、集群等"),n("li",null,"SQL Interface：接受用户的 SQL 命令，并且返回用户需要查询的结果"),n("li",null,"Parser：SQL 语句分析器"),n("li",null,"Optimizer：查询优化器"),n("li",null,"Caches & Buffers：查询缓存，服务器会查询内部的缓存，如果缓存空间足够大，可以在大量读操作的环境中提升系统性能")])]),n("li",null,[p("所有"),n("strong",null,"跨存储引擎的功能"),p("在这一层实现，如存储过程、触发器、视图等")]),n("li",null,"在该层服务器会解析查询并创建相应的内部解析树，并对其完成相应的优化如确定表的查询顺序，是否利用索引等， 最后生成相应的执行操作"),n("li",null,[p("MySQL 中服务器层不管理事务，"),n("strong",null,"事务是由存储引擎实现的")])])]),n("li",null,[p("第三层：存储引擎层 "),n("ul",null,[n("li",null,"Pluggable Storage Engines：存储引擎接口，MySQL 区别于其他数据库的重要特点就是其存储引擎的架构模式是插件式的（存储引擎是基于表的，而不是数据库）"),n("li",null,[p("存储引擎"),n("strong",null,"真正的负责了 MySQL 中数据的存储和提取"),p("，服务器通过 API 和存储引擎进行通信")]),n("li",null,"不同的存储引擎具有不同的功能，共用一个 Server 层，可以根据开发的需要，来选取合适的存储引擎")])]),n("li",null,[p("第四层：系统文件层 "),n("ul",null,[n("li",null,"数据存储层，主要是将数据存储在文件系统之上，并完成与存储引擎的交互"),n("li",null,"File System：文件系统，保存配置文件、数据文件、日志文件、错误文件、二进制文件等")])])],-1)),l[23]||(l[23]=n("figure",null,[n("img",{src:"https://gcore.jsdelivr.net/gh/imLKlauS/blog-picture@main/blogs/image-20250319234059758.png",alt:"image-20250319234059758",loading:"lazy",decoding:"async",class:"lazy"})],-1)),l[24]||(l[24]=n("hr",null,null,-1)),l[25]||(l[25]=n("h3",{id:"建立连接",tabindex:"-1"},[p("建立连接 "),n("a",{class:"header-anchor",href:"#建立连接","aria-label":'Permalink to "建立连接"'},"​")],-1)),l[26]||(l[26]=n("h4",{id:"连接器",tabindex:"-1"},[p("连接器 "),n("a",{class:"header-anchor",href:"#连接器","aria-label":'Permalink to "连接器"'},"​")],-1)),l[27]||(l[27]=n("p",null,"池化技术：对于访问数据库来说，建立连接的代价是比较昂贵的，因为每个连接对应一个用来交互的线程，频繁的创建关闭连接比较耗费资源，有必要建立数据库连接池，以提高访问的性能",-1)),l[28]||(l[28]=n("p",null,[p("连接建立 TCP 以后需要做"),n("strong",null,"权限验证"),p("，验证成功后可以进行执行 SQL。如果这时管理员账号对这个用户的权限做了修改，也不会影响已经存在连接的权限，只有再新建的连接才会使用新的权限设置")],-1)),l[29]||(l[29]=n("p",null,"MySQL 服务器可以同时和多个客户端进行交互，所以要保证每个连接会话的隔离性（事务机制部分详解）",-1)),l[30]||(l[30]=n("p",null,"整体的执行流程：",-1)),l[31]||(l[31]=n("figure",null,[n("img",{src:"https://gcore.jsdelivr.net/gh/imLKlauS/blog-picture@main/blogs/image-20250319234144374.png",alt:"image-20250319234144374",loading:"lazy",decoding:"async",class:"lazy"})],-1)),l[32]||(l[32]=n("hr",null,null,-1)),l[33]||(l[33]=n("h4",{id:"权限信息",tabindex:"-1"},[p("权限信息 "),n("a",{class:"header-anchor",href:"#权限信息","aria-label":'Permalink to "权限信息"'},"​")],-1)),l[34]||(l[34]=n("p",null,"grant 语句会同时修改数据表和内存，判断权限的时候使用的是内存数据",-1)),l[35]||(l[35]=n("p",null,"flush privileges 语句本身会用数据表（磁盘）的数据重建一份内存权限数据，所以在权限数据可能存在不一致的情况下使用，这种不一致往往是由于直接用 DML 语句操作系统权限表导致的，所以尽量不要使用这类语句",-1)),l[36]||(l[36]=n("figure",null,[n("img",{src:"https://gcore.jsdelivr.net/gh/imLKlauS/blog-picture@main/blogs/image-20250319234950483.png",alt:"image-20250319234950483",loading:"lazy",decoding:"async",class:"lazy"})],-1)),l[37]||(l[37]=n("hr",null,null,-1)),l[38]||(l[38]=n("h4",{id:"连接状态",tabindex:"-1"},[p("连接状态 "),n("a",{class:"header-anchor",href:"#连接状态","aria-label":'Permalink to "连接状态"'},"​")],-1)),l[39]||(l[39]=n("p",null,[p("客户端如果长时间没有操作，连接器就会自动断开，时间是由参数 wait_timeout 控制的，默认值是 8 小时。如果在连接被断开之后，客户端"),n("strong",null,"再次发送请求"),p("的话，就会收到一个错误提醒："),n("code",null,"Lost connection to MySQL server during query")],-1)),l[40]||(l[40]=n("p",null,"数据库里面，长连接是指连接成功后，如果客户端持续有请求，则一直使用同一个连接；短连接则是指每次执行完很少的几次查询就断开连接，下次查询再重新建立一个",-1)),l[41]||(l[41]=n("p",null,[p("为了减少连接的创建，推荐使用长连接，但是"),n("strong",null,"过多的长连接会造成 OOM"),p("，解决方案：")],-1)),l[42]||(l[42]=n("ul",null,[n("li",null,[n("p",null,"定期断开长连接，使用一段时间，或者程序里面判断执行过一个占用内存的大查询后，断开连接，之后要查询再重连"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"KILL"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," CONNECTION"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," id")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"MySQL 5.7 版本，可以在每次执行一个比较大的操作后，通过执行 mysql_reset_connection 来重新初始化连接资源，这个过程不需要重连和重新做权限验证，但是会将连接恢复到刚刚创建完时的状态")])],-1)),l[43]||(l[43]=n("p",null,"SHOW PROCESSLIST：查看当前 MySQL 在进行的线程，可以实时地查看 SQL 的执行情况，其中的 Command 列显示为 Sleep 的这一行，就表示现在系统里面有一个空闲连接",-1)),l[44]||(l[44]=n("figure",null,[n("img",{src:"https://gcore.jsdelivr.net/gh/imLKlauS/blog-picture@main/blogs/image-20250319234249865.png",alt:"image-20250319234249865",loading:"lazy",decoding:"async",class:"lazy"})],-1)),l[45]||(l[45]=n("table",null,[n("thead",null,[n("tr",null,[n("th",null,"参数"),n("th",null,"含义")])]),n("tbody",null,[n("tr",null,[n("td",null,"ID"),n("td",null,"用户登录 mysql 时系统分配的 connection_id，可以使用函数 connection_id() 查看")]),n("tr",null,[n("td",null,"User"),n("td",null,"显示当前用户，如果不是 root，这个命令就只显示用户权限范围的 sql 语句")]),n("tr",null,[n("td",null,"Host"),n("td",null,"显示这个语句是从哪个 ip 的哪个端口上发的，可以用来跟踪出现问题语句的用户")]),n("tr",null,[n("td",null,"db"),n("td",null,"显示这个进程目前连接的是哪个数据库")]),n("tr",null,[n("td",null,"Command"),n("td",null,"显示当前连接的执行的命令，一般取值为休眠 Sleep、查询 Query、连接 Connect 等")]),n("tr",null,[n("td",null,"Time"),n("td",null,"显示这个状态持续的时间，单位是秒")]),n("tr",null,[n("td",null,"State"),n("td",null,"显示使用当前连接的 sql 语句的状态，以查询为例，需要经过 copying to tmp table、sorting result、sending data等状态才可以完成")]),n("tr",null,[n("td",null,"Info"),n("td",null,"显示执行的 sql 语句，是判断问题语句的一个重要依据")])])],-1)),l[46]||(l[46]=n("p",null,[n("strong",null,"Sending data 状态"),p("表示 MySQL 线程开始访问数据行并把结果返回给客户端，而不仅仅只是返回给客户端，是处于执行器过程中的任意阶段。由于在 Sending data 状态下，MySQL 线程需要做大量磁盘读取操作，所以是整个查询中耗时最长的状态")],-1)),l[47]||(l[47]=n("hr",null,null,-1)),l[48]||(l[48]=n("h3",{id:"执行流程",tabindex:"-1"},[p("执行流程 "),n("a",{class:"header-anchor",href:"#执行流程","aria-label":'Permalink to "执行流程"'},"​")],-1)),l[49]||(l[49]=n("h4",{id:"查询缓存",tabindex:"-1"},[p("查询缓存 "),n("a",{class:"header-anchor",href:"#查询缓存","aria-label":'Permalink to "查询缓存"'},"​")],-1)),l[50]||(l[50]=n("h5",{id:"工作流程",tabindex:"-1"},[p("工作流程 "),n("a",{class:"header-anchor",href:"#工作流程","aria-label":'Permalink to "工作流程"'},"​")],-1)),l[51]||(l[51]=n("p",null,"当执行完全相同的 SQL 语句的时候，服务器就会直接从缓存中读取结果，当数据被修改，之前的缓存会失效，修改比较频繁的表不适合做查询缓存",-1)),l[52]||(l[52]=n("p",null,"查询过程：",-1)),l[53]||(l[53]=n("ol",null,[n("li",null,"客户端发送一条查询给服务器"),n("li",null,"服务器先会检查查询缓存，如果命中了缓存，则立即返回存储在缓存中的结果（一般是 K-V 键值对），否则进入下一阶段"),n("li",null,"分析器进行 SQL 分析，再由优化器生成对应的执行计划"),n("li",null,"执行器根据优化器生成的执行计划，调用存储引擎的 API 来执行查询"),n("li",null,"将结果返回给客户端")],-1)),l[54]||(l[54]=n("p",null,"大多数情况下不建议使用查询缓存，因为查询缓存往往弊大于利",-1)),l[55]||(l[55]=n("ul",null,[n("li",null,[p("查询缓存的"),n("strong",null,"失效非常频繁"),p("，只要有对一个表的更新，这个表上所有的查询缓存都会被清空。因此很可能费力地把结果存起来，还没使用就被一个更新全清空了，对于更新压力大的数据库来说，查询缓存的命中率会非常低")]),n("li",null,"除非业务就是有一张静态表，很长时间才会更新一次，比如一个系统配置表，那这张表上的查询才适合使用查询缓存")],-1)),l[56]||(l[56]=n("hr",null,null,-1)),l[57]||(l[57]=n("h5",{id:"缓存配置",tabindex:"-1"},[p("缓存配置 "),n("a",{class:"header-anchor",href:"#缓存配置","aria-label":'Permalink to "缓存配置"'},"​")],-1)),l[58]||(l[58]=n("ol",null,[n("li",null,[n("p",null,"查看当前 MySQL 数据库是否支持查询缓存："),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"SHOW VARIABLES "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"LIKE"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 'have_query_cache'"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";\t"),n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- YES")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"查看当前 MySQL 是否开启了查询缓存："),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"SHOW VARIABLES "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"LIKE"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 'query_cache_type'"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";\t"),n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- OFF")])])]),n("button",{class:"collapse"})]),n("p",null,"参数说明："),n("ul",null,[n("li",null,[n("p",null,"OFF 或 0：查询缓存功能关闭")]),n("li",null,[n("p",null,"ON 或 1：查询缓存功能打开，查询结果符合缓存条件即会缓存，否则不予缓存；可以显式指定 SQL_NO_CACHE 不予缓存")]),n("li",null,[n("p",null,"DEMAND 或 2：查询缓存功能按需进行，显式指定 SQL_CACHE 的 SELECT 语句才缓存，其它不予缓存"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," SQL_CACHE id, "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"name"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," customer; "),n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- SQL_CACHE:查询结果可缓存")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," SQL_NO_CACHE id, "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"name"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," customer;"),n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- SQL_NO_CACHE:不使用查询缓存")])])]),n("button",{class:"collapse"})])])])]),n("li",null,[n("p",null,"查看查询缓存的占用大小："),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"SHOW VARIABLES "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"LIKE"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 'query_cache_size'"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 单位是字节 1048576 / 1024 = 1024 = 1KB")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"查看查询缓存的状态变量："),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"SHOW "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"STATUS"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," LIKE"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 'Qcache%'"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])]),n("button",{class:"collapse"})]),n("figure",null,[n("img",{src:"https://gcore.jsdelivr.net/gh/imLKlauS/blog-picture@main/blogs/image-20250319234326198.png",alt:"image-20250319234326198",loading:"lazy",decoding:"async",class:"lazy"})]),n("table",null,[n("thead",null,[n("tr",null,[n("th",null,"参数"),n("th",null,"含义")])]),n("tbody",null,[n("tr",null,[n("td",null,"Qcache_free_blocks"),n("td",null,"查询缓存中的可用内存块数")]),n("tr",null,[n("td",null,"Qcache_free_memory"),n("td",null,"查询缓存的可用内存量")]),n("tr",null,[n("td",null,"Qcache_hits"),n("td",null,"查询缓存命中数")]),n("tr",null,[n("td",null,"Qcache_inserts"),n("td",null,"添加到查询缓存的查询数")]),n("tr",null,[n("td",null,"Qcache_lowmen_prunes"),n("td",null,"由于内存不足而从查询缓存中删除的查询数")]),n("tr",null,[n("td",null,"Qcache_not_cached"),n("td",null,"非缓存查询的数量（由于 query_cache_type 设置而无法缓存或未缓存）")]),n("tr",null,[n("td",null,"Qcache_queries_in_cache"),n("td",null,"查询缓存中注册的查询数")]),n("tr",null,[n("td",null,"Qcache_total_blocks"),n("td",null,"查询缓存中的块总数")])])])]),n("li",null,[n("p",null,"配置 my.cnf："),n("div",{style:{"max-height":"300px"},class:"language-sh vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sh"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," chmod"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 666"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /etc/mysql/my.cnf")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vim"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," my.cnf")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# mysqld中配置缓存")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"query_cache_type"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"1")])])]),n("button",{class:"collapse"})]),n("p",null,"重启服务既可生效，执行 SQL 语句进行验证 ，执行一条比较耗时的 SQL 语句，然后再多执行几次，查看后面几次的执行时间；获取通过查看查询缓存的缓存命中数，来判定是否走查询缓存")])],-1)),l[59]||(l[59]=n("hr",null,null,-1)),l[60]||(l[60]=n("h5",{id:"缓存失效",tabindex:"-1"},[p("缓存失效 "),n("a",{class:"header-anchor",href:"#缓存失效","aria-label":'Permalink to "缓存失效"'},"​")],-1)),l[61]||(l[61]=n("p",null,"查询缓存失效的情况：",-1)),l[62]||(l[62]=n("ul",null,[n("li",null,[n("p",null,[p("SQL 语句不一致，要想命中查询缓存，查询的 SQL 语句必须一致，因为"),n("strong",null,"缓存中 key 是查询的语句"),p("，value 是查询结构")]),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"select"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," count"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"from"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," tb_item;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Select"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," count"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"from"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," tb_item;\t"),n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 不走缓存，首字母不一致")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"当查询语句中有一些不确定查询时，则不会缓存，比如：now()、current_date()、curdate()、curtime()、rand()、uuid()、user()、database()"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," tb_item "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"WHERE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," updatetime "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," NOW"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"LIMIT"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," USER();")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," DATABASE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"不使用任何表查询语句："),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 'A'"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"查询 mysql、information_schema、performance_schema 等系统表时，不走查询缓存："),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," information_schema"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"engines"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,[p("在"),n("strong",null,"跨存储引擎"),p("的存储过程、触发器或存储函数的主体内执行的查询，缓存失效")])]),n("li",null,[n("p",null,[p("如果表更改，则使用该表的"),n("strong",null,"所有高速缓存查询都将变为无效"),p("并从高速缓存中删除，包括使用 MERGE 映射到已更改表的表的查询，比如：INSERT、UPDATE、DELETE、ALTER TABLE、DROP TABLE、DROP DATABASE")])])],-1)),l[63]||(l[63]=n("hr",null,null,-1)),l[64]||(l[64]=n("h4",{id:"分析器",tabindex:"-1"},[p("分析器 "),n("a",{class:"header-anchor",href:"#分析器","aria-label":'Permalink to "分析器"'},"​")],-1)),l[65]||(l[65]=n("p",null,"没有命中查询缓存，就开始了 SQL 的真正执行，分析器会对 SQL 语句做解析",-1)),l[66]||(l[66]=n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," t "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"WHERE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," id "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])]),n("button",{class:"collapse"})],-1)),l[67]||(l[67]=n("p",null,"解析器：处理语法和解析查询，生成一课对应的解析树",-1)),l[68]||(l[68]=n("ul",null,[n("li",null,[p("先做"),n("strong",null,"词法分析"),p("，输入的是由多个字符串和空格组成的一条 SQL 语句，MySQL 需要识别出里面的字符串分别是什么代表什么。从输入的 select 这个关键字识别出来这是一个查询语句；把字符串 t 识别成 表名 t，把字符串 id 识别成列 id")]),n("li",null,[p("然后做"),n("strong",null,"语法分析"),p("，根据词法分析的结果，语法分析器会根据语法规则，判断你输入的这个 SQL 语句是否满足 MySQL 语法。如果语句不对，就会收到 "),n("code",null,"You have an error in your SQL syntax"),p(" 的错误提醒")])],-1)),l[69]||(l[69]=n("p",null,"预处理器：进一步检查解析树的合法性，比如数据表和数据列是否存在、别名是否有歧义等",-1)),l[70]||(l[70]=n("hr",null,null,-1)),l[71]||(l[71]=n("h4",{id:"优化器",tabindex:"-1"},[p("优化器 "),n("a",{class:"header-anchor",href:"#优化器","aria-label":'Permalink to "优化器"'},"​")],-1)),l[72]||(l[72]=n("h5",{id:"成本分析",tabindex:"-1"},[p("成本分析 "),n("a",{class:"header-anchor",href:"#成本分析","aria-label":'Permalink to "成本分析"'},"​")],-1)),l[73]||(l[73]=n("p",null,"优化器是在表里面有多个索引的时候，决定使用哪个索引；或者在一个语句有多表关联（join）的时候，决定各个表的连接顺序",-1)),l[74]||(l[74]=n("ul",null,[n("li",null,"根据搜索条件找出所有可能的使用的索引"),n("li",null,"成本分析，执行成本由 I/O 成本和 CPU 成本组成，计算全表扫描和使用不同索引执行 SQL 的代价"),n("li",null,"找到一个最优的执行方案，用最小的代价去执行语句")],-1)),l[75]||(l[75]=n("p",null,"在数据库里面，扫描行数是影响执行代价的因素之一，扫描的行数越少意味着访问磁盘的次数越少，消耗的 CPU 资源越少，优化器还会结合是否使用临时表、是否排序等因素进行综合判断",-1)),l[76]||(l[76]=n("hr",null,null,-1)),l[77]||(l[77]=n("h5",{id:"统计数据",tabindex:"-1"},[p("统计数据 "),n("a",{class:"header-anchor",href:"#统计数据","aria-label":'Permalink to "统计数据"'},"​")],-1)),l[78]||(l[78]=n("p",null,"MySQL 中保存着两种统计数据：",-1)),l[79]||(l[79]=n("ul",null,[n("li",null,"innodb_table_stats 存储了表的统计数据，每一条记录对应着一个表的统计数据"),n("li",null,"innodb_index_stats 存储了索引的统计数据，每一条记录对应着一个索引的一个统计项的数据")],-1)),l[80]||(l[80]=n("p",null,[p("MySQL 在真正执行语句之前，并不能精确地知道满足条件的记录有多少条，只能根据统计信息来估算记录，统计信息就是索引的区分度，一个索引上不同的值的个数（比如性别只能是男女，就是 2 ），称之为基数（cardinality），"),n("strong",null,"基数越大说明区分度越好")],-1)),l[81]||(l[81]=n("p",null,[p("通过"),n("strong",null,"采样统计"),p("来获取基数，InnoDB 默认会选择 N 个数据页，统计这些页面上的不同值得到一个平均值，然后乘以这个索引的页面数，就得到了这个索引的基数")],-1)),l[82]||(l[82]=n("p",null,[p("在 MySQL 中，有两种存储统计数据的方式，可以通过设置参数 "),n("code",null,"innodb_stats_persistent"),p(" 的值来选择：")],-1)),l[83]||(l[83]=n("ul",null,[n("li",null,[p("ON：表示统计信息会持久化存储（默认），采样页数 N 默认为 20，可以通过 "),n("code",null,"innodb_stats_persistent_sample_pages"),p(" 指定，页数越多统计的数据越准确，但消耗的资源更大")]),n("li",null,"OFF：表示统计信息只存储在内存，采样页数 N 默认为 8，也可以通过系统变量设置（不推荐，每次重新计算浪费资源）")],-1)),l[84]||(l[84]=n("p",null,"数据表是会持续更新的，两种统计信息的更新方式：",-1)),l[85]||(l[85]=n("ul",null,[n("li",null,[p("设置 "),n("code",null,"innodb_stats_auto_recalc"),p(" 为 1，当发生变动的记录数量超过表大小的 10% 时，自动触发重新计算，不过是"),n("strong",null,"异步进行")]),n("li",null,[p("调用 "),n("code",null,"ANALYZE TABLE t"),p(" 手动更新统计信息，只对信息做"),n("strong",null,"重新统计"),p("（不是重建表），没有修改数据，这个过程中加了 MDL 读锁并且是同步进行，所以会暂时阻塞系统")])],-1)),l[86]||(l[86]=n("p",null,[n("strong",null,"EXPLAIN 执行计划在优化器阶段生成"),p("，如果 explain 的结果预估的 rows 值跟实际情况差距比较大，可以执行 analyze 命令重新修正信息")],-1)),l[87]||(l[87]=n("hr",null,null,-1)),l[88]||(l[88]=n("h5",{id:"错选索引",tabindex:"-1"},[p("错选索引 "),n("a",{class:"header-anchor",href:"#错选索引","aria-label":'Permalink to "错选索引"'},"​")],-1)),l[89]||(l[89]=n("p",null,"采样统计本身是估算数据，或者 SQL 语句中的字段选择有问题时，可能导致 MySQL 没有选择正确的执行索引",-1)),l[90]||(l[90]=n("p",null,"解决方法：",-1)),l[91]||(l[91]=n("ul",null,[n("li",null,[n("p",null,"采用 force index 强行选择一个索引"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," user "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FORCE"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," INDEX"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"name"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"WHERE"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," NAME="),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'klaus'"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"可以考虑修改 SQL 语句，引导 MySQL 使用期望的索引")]),n("li",null,[n("p",null,"新建一个更合适的索引，来提供给优化器做选择，或删掉误用的索引")])],-1)),l[92]||(l[92]=n("hr",null,null,-1)),l[93]||(l[93]=n("h4",{id:"执行器",tabindex:"-1"},[p("执行器 "),n("a",{class:"header-anchor",href:"#执行器","aria-label":'Permalink to "执行器"'},"​")],-1)),l[94]||(l[94]=n("p",null,[p("开始执行的时候，要先判断一下当前连接对表有没有"),n("strong",null,"执行查询的权限"),p("，如果没有就会返回没有权限的错误，在工程实现上，如果命中查询缓存，会在查询缓存返回结果的时候，做权限验证。如果有权限，就打开表继续执行，执行器就会根据表的引擎定义，去使用这个引擎提供的接口")],-1)),l[95]||(l[95]=n("hr",null,null,-1)),l[96]||(l[96]=n("h4",{id:"引擎层",tabindex:"-1"},[p("引擎层 "),n("a",{class:"header-anchor",href:"#引擎层","aria-label":'Permalink to "引擎层"'},"​")],-1)),l[97]||(l[97]=n("p",null,[p("Server 层和存储引擎层的交互是"),n("strong",null,"以记录为单位的"),p("，存储引擎会将单条记录返回给 Server 层做进一步处理，并不是直接返回所有的记录")],-1)),l[98]||(l[98]=n("p",null,"工作流程：",-1)),l[99]||(l[99]=n("ul",null,[n("li",null,"首先根据二级索引选择扫描范围，获取第一条符合二级索引条件的记录，进行回表查询，将聚簇索引的记录返回 Server 层，由 Server 判断记录是否符合要求"),n("li",null,"然后在二级索引上继续扫描下一个符合条件的记录")],-1)),l[100]||(l[100]=n("p",null,[p("推荐阅读："),n("a",{href:"https://mp.weixin.qq.com/s/YZ-LckObephrP1f15mzHpA",target:"_blank",rel:"noreferrer"},"https://mp.weixin.qq.com/s/YZ-LckObephrP1f15mzHpA")],-1)),l[101]||(l[101]=n("hr",null,null,-1)),l[102]||(l[102]=n("h3",{id:"终止流程",tabindex:"-1"},[p("终止流程 "),n("a",{class:"header-anchor",href:"#终止流程","aria-label":'Permalink to "终止流程"'},"​")],-1)),l[103]||(l[103]=n("h4",{id:"终止语句",tabindex:"-1"},[p("终止语句 "),n("a",{class:"header-anchor",href:"#终止语句","aria-label":'Permalink to "终止语句"'},"​")],-1)),l[104]||(l[104]=n("p",null,"终止线程中正在执行的语句：",-1)),l[105]||(l[105]=n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"KILL"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," QUERY thread_id")])])]),n("button",{class:"collapse"})],-1)),l[106]||(l[106]=n("p",null,"KILL 不是马上终止的意思，而是告诉执行线程这条语句已经不需要继续执行，可以开始执行停止的逻辑（类似于打断）。因为对表做增删改查操作，会在表上加 MDL 读锁，如果线程被 KILL 时就直接终止，那这个 MDL 读锁就没机会被释放了",-1)),l[107]||(l[107]=n("p",null,[p("命令 "),n("code",null,"KILL QUERYthread_id_A"),p(" 的执行流程：")],-1)),l[108]||(l[108]=n("ul",null,[n("li",null,"把 session A 的运行状态改成 THD::KILL_QUERY（将变量 killed 赋值为 THD::KILL_QUERY）"),n("li",null,"给 session A 的执行线程发一个信号，让 session A 来处理这个 THD::KILL_QUERY 状态")],-1)),l[109]||(l[109]=n("p",null,[p("会话处于等待状态（锁阻塞），必须满足是一个可以被唤醒的等待，必须有机会去"),n("strong",null,"判断线程的状态"),p("，如果不满足就会造成 KILL 失败")],-1)),l[110]||(l[110]=n("p",null,"典型场景：innodb_thread_concurrency 为 2，代表并发线程上限数设置为 2",-1)),l[111]||(l[111]=n("ul",null,[n("li",null,"session A 执行事务，session B 执行事务，达到线程上限；此时 session C 执行事务会阻塞等待，session D 执行 kill query C 无效"),n("li",null,"C 的逻辑是每 10 毫秒判断是否可以进入 InnoDB 执行，如果不行就调用 nanosleep 函数进入 sleep 状态，没有去判断线程状态")],-1)),l[112]||(l[112]=n("p",null,"补充：执行 Ctrl+C 的时候，是 MySQL 客户端另外启动一个连接，然后发送一个 KILL QUERY 命令",-1)),l[113]||(l[113]=n("hr",null,null,-1)),l[114]||(l[114]=n("h4",{id:"终止连接",tabindex:"-1"},[p("终止连接 "),n("a",{class:"header-anchor",href:"#终止连接","aria-label":'Permalink to "终止连接"'},"​")],-1)),l[115]||(l[115]=n("p",null,"断开线程的连接：",-1)),l[116]||(l[116]=n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"KILL"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," CONNECTION"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," id")])])]),n("button",{class:"collapse"})],-1)),l[117]||(l[117]=n("p",null,"断开连接后执行 SHOW PROCESSLIST 命令，如果这条语句的 Command 列显示 Killed，代表线程的状态是 KILL_CONNECTION，说明这个线程有语句正在执行，当前状态是停止语句执行中，终止逻辑耗时较长",-1)),l[118]||(l[118]=n("ul",null,[n("li",null,"超大事务执行期间被 KILL，这时回滚操作需要对事务执行期间生成的所有新数据版本做回收操作，耗时很长"),n("li",null,"大查询回滚，如果查询过程中生成了比较大的临时文件，删除临时文件可能需要等待 IO 资源，导致耗时较长"),n("li",null,"DDL 命令执行到最后阶段被 KILL，需要删除中间过程的临时文件，也可能受 IO 资源影响耗时较久")],-1)),l[119]||(l[119]=n("p",null,"总结：KILL CONNECTION 本质上只是把客户端的 SQL 连接断开，后面的终止流程还是要走 KILL QUERY",-1)),l[120]||(l[120]=n("p",null,"一个事务被 KILL 之后，持续处于回滚状态，不应该强行重启整个 MySQL 进程，应该等待事务自己执行完成，因为重启后依然继续做回滚操作的逻辑",-1)),l[121]||(l[121]=n("hr",null,null,-1)),l[122]||(l[122]=n("h3",{id:"常用工具",tabindex:"-1"},[p("常用工具 "),n("a",{class:"header-anchor",href:"#常用工具","aria-label":'Permalink to "常用工具"'},"​")],-1)),l[123]||(l[123]=n("h4",{id:"mysql-1",tabindex:"-1"},[p("mysql "),n("a",{class:"header-anchor",href:"#mysql-1","aria-label":'Permalink to "mysql"'},"​")],-1)),l[124]||(l[124]=n("p",null,"mysql 不是指 mysql 服务，而是指 mysql 的客户端工具",-1)),l[125]||(l[125]=n("div",{style:{"max-height":"300px"},class:"language-sh vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sh"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mysql"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," [options] [database]")])])]),n("button",{class:"collapse"})],-1)),l[126]||(l[126]=n("ul",null,[n("li",null,"-u --user=name：指定用户名"),n("li",null,"-p --password[=name]：指定密码"),n("li",null,"-h --host=name：指定服务器IP或域名"),n("li",null,"-P --port=#：指定连接端口"),n("li",null,"-e --execute=name：执行SQL语句并退出，在控制台执行SQL语句，而不用连接到数据库执行")],-1)),l[127]||(l[127]=n("p",null,"示例：",-1)),l[128]||(l[128]=n("div",{style:{"max-height":"300px"},class:"language-sh vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sh"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mysql"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -h"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 127.0.0.1"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -P"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 3306"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -u"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," root"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -p")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mysql"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -uroot"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -p2143"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," db01"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -e"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "select * from tb_book"'),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])]),n("button",{class:"collapse"})],-1)),l[129]||(l[129]=n("hr",null,null,-1)),l[130]||(l[130]=n("h4",{id:"admin",tabindex:"-1"},[p("admin "),n("a",{class:"header-anchor",href:"#admin","aria-label":'Permalink to "admin"'},"​")],-1)),l[131]||(l[131]=n("p",null,"mysqladmin 是一个执行管理操作的客户端程序，用来检查服务器的配置和当前状态、创建并删除数据库等",-1)),l[132]||(l[132]=n("p",null,[p("通过 "),n("code",null,"mysqladmin --help"),p(" 指令查看帮助文档")],-1)),l[133]||(l[133]=n("div",{style:{"max-height":"300px"},class:"language-sh vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sh"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mysqladmin"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -uroot"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -p2143"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," create"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 'test01'"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])]),n("button",{class:"collapse"})],-1)),l[134]||(l[134]=n("hr",null,null,-1)),l[135]||(l[135]=n("h4",{id:"binlog",tabindex:"-1"},[p("binlog "),n("a",{class:"header-anchor",href:"#binlog","aria-label":'Permalink to "binlog"'},"​")],-1)),l[136]||(l[136]=n("p",null,"服务器生成的日志文件以二进制格式保存，如果需要检查这些文本，就要使用 mysqlbinlog 日志管理工具",-1)),l[137]||(l[137]=n("div",{style:{"max-height":"300px"},class:"language-sh vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sh"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mysqlbinlog"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," [options]  log-files1 log-files2 ...")])])]),n("button",{class:"collapse"})],-1)),l[138]||(l[138]=n("ul",null,[n("li",null,[n("p",null,"-d --database=name：指定数据库名称，只列出指定的数据库相关操作")]),n("li",null,[n("p",null,"-o --offset=#：忽略掉日志中的前 n 行命令。")]),n("li",null,[n("p",null,"-r --result-file=name：将输出的文本格式日志输出到指定文件。")]),n("li",null,[n("p",null,"-s --short-form：显示简单格式，省略掉一些信息。")]),n("li",null,[n("p",null,"–start-datatime=date1 --stop-datetime=date2：指定日期间隔内的所有日志")]),n("li",null,[n("p",null,"–start-position=pos1 --stop-position=pos2：指定位置间隔内的所有日志")])],-1)),l[139]||(l[139]=n("hr",null,null,-1)),l[140]||(l[140]=n("h4",{id:"dump",tabindex:"-1"},[p("dump "),n("a",{class:"header-anchor",href:"#dump","aria-label":'Permalink to "dump"'},"​")],-1)),l[141]||(l[141]=n("h5",{id:"命令介绍",tabindex:"-1"},[p("命令介绍 "),n("a",{class:"header-anchor",href:"#命令介绍","aria-label":'Permalink to "命令介绍"'},"​")],-1)),l[142]||(l[142]=n("p",null,"mysqldump 客户端工具用来备份数据库或在不同数据库之间进行数据迁移，备份内容包含创建表，及插入表的 SQL 语句",-1)),l[143]||(l[143]=n("div",{style:{"max-height":"300px"},class:"language-sh vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sh"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mysqldump"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," [options] db_name [tables]")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mysqldump"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," [options] --database/-B db1 [db2 db3...]")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mysqldump"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," [options] --all-databases/-A")])])]),n("button",{class:"collapse"})],-1)),l[144]||(l[144]=n("p",null,"连接选项：",-1)),l[145]||(l[145]=n("ul",null,[n("li",null,"-u --user=name：指定用户名"),n("li",null,"-p --password[=name]：指定密码"),n("li",null,"-h --host=name：指定服务器 IP 或域名"),n("li",null,"-P --port=#：指定连接端口")],-1)),l[146]||(l[146]=n("p",null,"输出内容选项：",-1)),l[147]||(l[147]=n("ul",null,[n("li",null,"–add-drop-database：在每个数据库创建语句前加上 Drop database 语句"),n("li",null,"–add-drop-table：在每个表创建语句前加上 Drop table 语句 , 默认开启，不开启 (–skip-add-drop-table)"),n("li",null,"-n --no-create-db：不包含数据库的创建语句"),n("li",null,"-t --no-create-info：不包含数据表的创建语句"),n("li",null,"-d --no-data：不包含数据"),n("li",null,"-T, --tab=name：自动生成两个文件：一个 .sql 文件，创建表结构的语句；一个 .txt 文件，数据文件，相当于 select into outfile")],-1)),l[148]||(l[148]=n("p",null,"示例：",-1)),l[149]||(l[149]=n("div",{style:{"max-height":"300px"},class:"language-sh vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sh"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mysqldump"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -uroot"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -p2143"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," db01"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," tb_book"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --add-drop-database"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --add-drop-table"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," >"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," a")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mysqldump"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -uroot"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -p2143"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -T"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /tmp"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," test"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," city")])])]),n("button",{class:"collapse"})],-1)),l[150]||(l[150]=n("hr",null,null,-1)),l[151]||(l[151]=n("h5",{id:"数据备份",tabindex:"-1"},[p("数据备份 "),n("a",{class:"header-anchor",href:"#数据备份","aria-label":'Permalink to "数据备份"'},"​")],-1)),l[152]||(l[152]=n("p",null,"命令行方式：",-1)),l[153]||(l[153]=n("ul",null,[n("li",null,"备份命令：mysqldump -u root -p 数据库名称 > 文件保存路径"),n("li",null,[p("恢复 "),n("ol",null,[n("li",null,[p("登录MySQL数据库："),n("code",null,"mysql -u root p")]),n("li",null,"删除已经备份的数据库"),n("li",null,"重新创建与备份数据库名称相同的数据库"),n("li",null,"使用该数据库"),n("li",null,[p("导入文件执行："),n("code",null,"source 备份文件全路径")])])])],-1)),l[154]||(l[154]=n("p",null,[p("更多方式参考："),n("a",{href:"https://time.geekbang.org/column/article/81925",target:"_blank",rel:"noreferrer"},"https://time.geekbang.org/column/article/81925")],-1)),l[155]||(l[155]=n("p",null,"图形化界面：",-1)),l[156]||(l[156]=n("ul",null,[n("li",null,[n("p",null,"备份"),n("figure",null,[n("img",{src:"https://gcore.jsdelivr.net/gh/imLKlauS/blog-picture@main/blogs/image-20250319234400695.png",alt:"image-20250319234400695",loading:"lazy",decoding:"async",class:"lazy"})])]),n("li",null,[n("p",null,"恢复"),n("figure",null,[n("img",{src:"https://gcore.jsdelivr.net/gh/imLKlauS/blog-picture@main/blogs/image-20250319234436591.png",alt:"image-20250319234436591",loading:"lazy",decoding:"async",class:"lazy"})])])],-1)),l[157]||(l[157]=n("hr",null,null,-1)),l[158]||(l[158]=n("h4",{id:"import",tabindex:"-1"},[p("import "),n("a",{class:"header-anchor",href:"#import","aria-label":'Permalink to "import"'},"​")],-1)),l[159]||(l[159]=n("p",null,"mysqlimport 是客户端数据导入工具，用来导入mysqldump 加 -T 参数后导出的文本文件",-1)),l[160]||(l[160]=n("div",{style:{"max-height":"300px"},class:"language-sh vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sh"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mysqlimport"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," [options]  db_name  textfile1  [textfile2...]")])])]),n("button",{class:"collapse"})],-1)),l[161]||(l[161]=n("p",null,"示例：",-1)),l[162]||(l[162]=n("div",{style:{"max-height":"300px"},class:"language-sh vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sh"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mysqlimport"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -uroot"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -p2143"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," test"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /tmp/city.txt")])])]),n("button",{class:"collapse"})],-1)),l[163]||(l[163]=n("p",null,"导入 sql 文件，可以使用 MySQL 中的 source 指令 :",-1)),l[164]||(l[164]=n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"source 文件全路径")])])]),n("button",{class:"collapse"})],-1)),l[165]||(l[165]=n("hr",null,null,-1)),l[166]||(l[166]=n("h4",{id:"show",tabindex:"-1"},[p("show "),n("a",{class:"header-anchor",href:"#show","aria-label":'Permalink to "show"'},"​")],-1)),l[167]||(l[167]=n("p",null,"mysqlshow 客户端对象查找工具，用来很快地查找存在哪些数据库、数据库中的表、表中的列或者索引",-1)),l[168]||(l[168]=n("div",{style:{"max-height":"300px"},class:"language-sh vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sh"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mysqlshow"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," [options] [db_name [table_name [col_name]]]")])])]),n("button",{class:"collapse"})],-1)),l[169]||(l[169]=n("ul",null,[n("li",null,[n("p",null,"–count：显示数据库及表的统计信息（数据库，表 均可以不指定）")]),n("li",null,[n("p",null,"-i：显示指定数据库或者指定表的状态信息")])],-1)),l[170]||(l[170]=n("p",null,"示例：",-1)),l[171]||(l[171]=n("div",{style:{"max-height":"300px"},class:"language-sh vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sh"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"#查询每个数据库的表的数量及表中记录的数量")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mysqlshow"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -uroot"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -p1234"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --count")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"#查询test库中每个表中的字段书，及行数")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mysqlshow"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -uroot"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -p1234"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," test"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --count")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"#查询test库中book表的详细情况")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mysqlshow"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -uroot"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -p1234"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," test"),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," book"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --count")])])]),n("button",{class:"collapse"})],-1)),l[172]||(l[172]=n("hr",null,null,-1)),l[173]||(l[173]=n("h2",{id:"高级结构",tabindex:"-1"},[p("高级结构 "),n("a",{class:"header-anchor",href:"#高级结构","aria-label":'Permalink to "高级结构"'},"​")],-1)),l[174]||(l[174]=n("h3",{id:"视图",tabindex:"-1"},[p("视图 "),n("a",{class:"header-anchor",href:"#视图","aria-label":'Permalink to "视图"'},"​")],-1)),l[175]||(l[175]=n("h4",{id:"基本介绍",tabindex:"-1"},[p("基本介绍 "),n("a",{class:"header-anchor",href:"#基本介绍","aria-label":'Permalink to "基本介绍"'},"​")],-1)),l[176]||(l[176]=n("p",null,"视图概念：视图是一种虚拟存在的数据表，这个虚拟的表并不在数据库中实际存在",-1)),l[177]||(l[177]=n("p",null,"本质：将一条 SELECT 查询语句的结果封装到了一个虚拟表中，所以在创建视图的时候，工作重心要放在这条 SELECT 查询语句上",-1)),l[178]||(l[178]=n("p",null,"作用：将一些比较复杂的查询语句的结果，封装到一个虚拟表中，再有相同查询需求时，直接查询该虚拟表",-1)),l[179]||(l[179]=n("p",null,"优点：",-1)),l[180]||(l[180]=n("ul",null,[n("li",null,[n("p",null,"简单：使用视图的用户不需要关心表的结构、关联条件和筛选条件，因为虚拟表中已经是过滤好的结果集")]),n("li",null,[n("p",null,"安全：使用视图的用户只能访问查询的结果集，对表的权限管理并不能限制到某个行某个列")]),n("li",null,[n("p",null,"数据独立，一旦视图的结构确定，可以屏蔽表结构变化对用户的影响，源表增加列对视图没有影响；源表修改列名，则可以通过修改视图来解决，不会造成对访问者的影响")])],-1)),l[181]||(l[181]=n("hr",null,null,-1)),l[182]||(l[182]=n("h4",{id:"视图创建",tabindex:"-1"},[p("视图创建 "),n("a",{class:"header-anchor",href:"#视图创建","aria-label":'Permalink to "视图创建"'},"​")],-1)),l[183]||(l[183]=n("ul",null,[n("li",null,[n("p",null,"创建视图"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," [OR REPLACE] ")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"VIEW 视图名称 [(列名列表)] ")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"AS"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 查询语句")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[WITH [CASCADED | LOCAL] "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CHECK"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," OPTION"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"];")])])]),n("button",{class:"collapse"})]),n("p",null,[n("code",null,"WITH [CASCADED | LOCAL] CHECK OPTION"),p(" 决定了是否允许更新数据使记录不再满足视图的条件：")]),n("ul",null,[n("li",null,"LOCAL：只要满足本视图的条件就可以更新"),n("li",null,"CASCADED：必须满足所有针对该视图的所有视图的条件才可以更新， 默认值")])]),n("li",null,[n("p",null,"例如"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 数据准备 city")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"id\t"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"NAME"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\tcid")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t深圳\t \t"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t上海\t\t"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t纽约\t\t"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"4"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t莫斯科\t    "),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3")]),p("\n"),n("span",{class:"line"}),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 数据准备 country")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"id\t"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"NAME")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t中国")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t美国")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t俄罗斯")]),p("\n"),n("span",{class:"line"}),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 创建city_country视图，保存城市和国家的信息(使用指定列名)")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"VIEW ")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\tcity_country (city_id,city_name,country_name)")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"AS")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    SELECT")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        c1"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"id"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        c1"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"name"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        c2"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"name")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    FROM")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        city c1,")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        country c2")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    WHERE")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        c1"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"cid"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"c2"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"id"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])]),n("button",{class:"collapse"})])])],-1)),l[184]||(l[184]=n("hr",null,null,-1)),l[185]||(l[185]=n("h4",{id:"视图查询",tabindex:"-1"},[p("视图查询 "),n("a",{class:"header-anchor",href:"#视图查询","aria-label":'Permalink to "视图查询"'},"​")],-1)),l[186]||(l[186]=n("ul",null,[n("li",null,[n("p",null,"查询所有数据表，视图也会查询出来"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"SHOW TABLES;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"SHOW "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"TABLE"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," STATUS"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," [\\G];")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"查询视图"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 视图名称;")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"查询某个视图创建"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"SHOW "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," VIEW 视图名称;")])])]),n("button",{class:"collapse"})])])],-1)),l[187]||(l[187]=n("hr",null,null,-1)),l[188]||(l[188]=n("h4",{id:"视图修改",tabindex:"-1"},[p("视图修改 "),n("a",{class:"header-anchor",href:"#视图修改","aria-label":'Permalink to "视图修改"'},"​")],-1)),l[189]||(l[189]=n("p",null,[p("视图表数据修改，会"),n("strong",null,"自动修改源表中的数据"),p("，因为更新的是视图中的基表中的数据")],-1)),l[190]||(l[190]=n("ul",null,[n("li",null,[n("p",null,"修改视图表中的数据"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"UPDATE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 视图名称 "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SET"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 列名 "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 值 "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"WHERE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 条件;")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"修改视图的结构"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"ALTER"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," [ALGORITHM = {UNDEFINED | MERGE | TEMPTABLE}]")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"VIEW 视图名称 [(列名列表)] ")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"AS"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 查询语句")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[WITH [CASCADED | LOCAL] "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CHECK"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," OPTION"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]")]),p("\n"),n("span",{class:"line"}),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 将视图中的country_name修改为name")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"ALTER"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"VIEW ")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\tcity_country (city_id,city_name,"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"name"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") ")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"AS")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    SELECT")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        c1"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"id"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        c1"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"name"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        c2"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"name")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    FROM")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        city c1,")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        country c2")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    WHERE")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        c1"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"cid"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"c2"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"id"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])]),n("button",{class:"collapse"})])])],-1)),l[191]||(l[191]=n("hr",null,null,-1)),l[192]||(l[192]=n("h4",{id:"视图删除",tabindex:"-1"},[p("视图删除 "),n("a",{class:"header-anchor",href:"#视图删除","aria-label":'Permalink to "视图删除"'},"​")],-1)),l[193]||(l[193]=n("ul",null,[n("li",null,[n("p",null,"删除视图"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"DROP"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," VIEW"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 视图名称;")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"如果存在则删除"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"DROP"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," VIEW"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," IF"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," EXISTS"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 视图名称;")])])]),n("button",{class:"collapse"})])])],-1)),l[194]||(l[194]=n("hr",null,null,-1)),l[195]||(l[195]=n("h3",{id:"存储过程",tabindex:"-1"},[p("存储过程 "),n("a",{class:"header-anchor",href:"#存储过程","aria-label":'Permalink to "存储过程"'},"​")],-1)),l[196]||(l[196]=n("h4",{id:"基本介绍-1",tabindex:"-1"},[p("基本介绍 "),n("a",{class:"header-anchor",href:"#基本介绍-1","aria-label":'Permalink to "基本介绍"'},"​")],-1)),l[197]||(l[197]=n("p",null,"存储过程和函数：存储过程和函数是事先经过编译并存储在数据库中的一段 SQL 语句的集合",-1)),l[198]||(l[198]=n("p",null,"存储过程和函数的好处：",-1)),l[199]||(l[199]=n("ul",null,[n("li",null,"提高代码的复用性"),n("li",null,"减少数据在数据库和应用服务器之间的传输，提高传输效率"),n("li",null,"减少代码层面的业务处理"),n("li",null,[n("strong",null,"一次编译永久有效")])],-1)),l[200]||(l[200]=n("p",null,"存储过程和函数的区别：",-1)),l[201]||(l[201]=n("ul",null,[n("li",null,"存储函数必须有返回值"),n("li",null,"存储过程可以没有返回值")],-1)),l[202]||(l[202]=n("hr",null,null,-1)),l[203]||(l[203]=n("h4",{id:"基本操作",tabindex:"-1"},[p("基本操作 "),n("a",{class:"header-anchor",href:"#基本操作","aria-label":'Permalink to "基本操作"'},"​")],-1)),l[204]||(l[204]=n("p",null,"DELIMITER：",-1)),l[205]||(l[205]=n("ul",null,[n("li",null,[n("p",null,"DELIMITER 关键字用来声明 sql 语句的分隔符，告诉 MySQL 该段命令已经结束")]),n("li",null,[n("p",null,"MySQL 语句默认的分隔符是分号，但是有时需要一条功能 sql 语句中包含分号，但是并不作为结束标识，这时使用 DELIMITER 来指定分隔符："),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER 分隔符")])])]),n("button",{class:"collapse"})])])],-1)),l[206]||(l[206]=n("p",null,"存储过程的创建调用查看和删除：",-1)),l[207]||(l[207]=n("ul",null,[n("li",null,[n("p",null,"创建存储过程"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 修改分隔符为$")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER $")]),p("\n"),n("span",{class:"line"}),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 标准语法")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," PROCEDURE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 存储过程名称(参数...)")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEGIN")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\tsql语句;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$")]),p("\n"),n("span",{class:"line"}),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 修改分隔符为分号")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER ;")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"调用存储过程"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CALL"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 存储过程名称(实际参数);")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"查看存储过程"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," mysql"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"proc"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," WHERE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," db"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'数据库名称'"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"删除存储过程"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"DROP"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," PROCEDURE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," [IF EXISTS] 存储过程名称;")])])]),n("button",{class:"collapse"})])])],-1)),l[208]||(l[208]=n("p",null,"练习：",-1)),l[209]||(l[209]=n("ul",null,[n("li",null,[n("p",null,"数据准备"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"id\t"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"NAME"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\tage\t\tgender\tscore")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t张三\t\t"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"23"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t\t男\t\t"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"95")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t李四\t\t"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"24"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t\t男\t\t"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"98")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t王五\t\t"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"25"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t\t女\t\t"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"100")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"4"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t赵六\t\t"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"26"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t\t女\t\t"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"90")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"创建 stu_group() 存储过程，封装分组查询总成绩，并按照总成绩升序排序的功能"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER $")]),p("\n"),n("span",{class:"line"}),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," PROCEDURE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," stu_group()")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEGIN")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tSELECT"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," gender,"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"SUM"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(score) getSum "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FROM"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," student "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"GROUP BY"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," gender "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"ORDER BY"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," getSum "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"ASC"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"; ")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$")]),p("\n"),n("span",{class:"line"}),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER ;")]),p("\n"),n("span",{class:"line"}),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 调用存储过程")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CALL"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," stu_group();")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 删除存储过程")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"DROP"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," PROCEDURE"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," IF"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," EXISTS"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," stu_group;")])])]),n("button",{class:"collapse"})])])],-1)),l[210]||(l[210]=n("hr",null,null,-1)),l[211]||(l[211]=n("h4",{id:"存储语法",tabindex:"-1"},[p("存储语法 "),n("a",{class:"header-anchor",href:"#存储语法","aria-label":'Permalink to "存储语法"'},"​")],-1)),l[212]||(l[212]=n("h5",{id:"变量使用",tabindex:"-1"},[p("变量使用 "),n("a",{class:"header-anchor",href:"#变量使用","aria-label":'Permalink to "变量使用"'},"​")],-1)),l[213]||(l[213]=n("p",null,"存储过程是可以进行编程的，意味着可以使用变量、表达式、条件控制语句等，来完成比较复杂的功能",-1)),l[214]||(l[214]=n("ul",null,[n("li",null,[n("p",null,"定义变量：DECLARE 定义的是局部变量，只能用在 BEGIN END 范围之内"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"DECLARE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 变量名 数据类型 [DEFAULT 默认值];")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"变量的赋值"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SET"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 变量名 "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 变量值;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 列名 "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INTO"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 变量名 "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FROM"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 表名 [WHERE 条件];")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"数据准备：表 student"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"id\t"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"NAME"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\tage\t\tgender\tscore")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t张三\t\t"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"23"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t\t男\t\t"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"95")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t李四\t\t"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"24"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t\t男\t\t"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"98")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t王五\t\t"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"25"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t\t女\t\t"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"100")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"4"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t赵六\t\t"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"26"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t\t女\t\t"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"90")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"定义两个 int 变量，用于存储男女同学的总分数"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER $")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," PROCEDURE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test3()")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEGIN")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t-- 定义两个变量")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tDECLARE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," men,women "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t-- 查询男同学的总分数，为men赋值")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tSELECT"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," SUM"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(score) "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INTO"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," men "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FROM"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," student "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"WHERE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," gender"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'男'"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t-- 查询女同学的总分数，为women赋值")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tSELECT"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," SUM"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(score) "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INTO"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," women "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FROM"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," student "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"WHERE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," gender"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'女'"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t-- 使用变量")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tSELECT"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," men,women;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER ;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 调用存储过程")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CALL"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test3();")])])]),n("button",{class:"collapse"})])])],-1)),l[215]||(l[215]=n("hr",null,null,-1)),l[216]||(l[216]=n("h5",{id:"if语句",tabindex:"-1"},[p("IF语句 "),n("a",{class:"header-anchor",href:"#if语句","aria-label":'Permalink to "IF语句"'},"​")],-1)),l[217]||(l[217]=n("ul",null,[n("li",null,[n("p",null,"if 语句标准语法"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"IF"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 判断条件1 "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"THEN"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 执行的sql语句1;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[ELSEIF 判断条件2 THEN 执行的sql语句2;]")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"...")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[ELSE 执行的sql语句n;]")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," IF"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"数据准备：表 student"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"id\t"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"NAME"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\tage\t\tgender\tscore")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t张三\t\t"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"23"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t\t男\t\t"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"95")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t李四\t\t"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"24"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t\t男\t\t"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"98")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t王五\t\t"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"25"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t\t女\t\t"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"100")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"4"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t赵六\t\t"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"26"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t\t女\t\t"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"90")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"根据总成绩判断：全班 380 分及以上学习优秀、320 ~ 380 学习良好、320 以下学习一般"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER $")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," PROCEDURE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test4()")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEGIN")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tDECLARE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," total "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";\t\t\t\t\t\t\t"),n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 定义总分数变量")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tDECLARE"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," description"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," VARCHAR"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"10"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");\t\t\t"),n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 定义分数描述变量")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tSELECT"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," SUM"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(score) "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INTO"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," total "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FROM"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," student; \t"),n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 为总分数变量赋值")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t-- 判断总分数")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tIF"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," total "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">="),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 380"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," THEN")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\t\tSET"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," description"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," '学习优秀'"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\tELSEIF total "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">="),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"320"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," AND"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," total "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 380"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," THEN")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\t\tSET"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," description"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," '学习良好'"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tELSE")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\t\tSET"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," description"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," '学习一般'"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tEND"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," IF"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER ;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 调用pro_test4存储过程")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CALL"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test4();")])])]),n("button",{class:"collapse"})])])],-1)),l[218]||(l[218]=n("hr",null,null,-1)),l[219]||(l[219]=n("h5",{id:"参数传递",tabindex:"-1"},[p("参数传递 "),n("a",{class:"header-anchor",href:"#参数传递","aria-label":'Permalink to "参数传递"'},"​")],-1)),l[220]||(l[220]=n("ul",null,[n("li",null,[n("p",null,"参数传递的语法"),n("p",null,"IN：代表输入参数，需要由调用者传递实际数据，默认的 OUT：代表输出参数，该参数可以作为返回值 INOUT：代表既可以作为输入参数，也可以作为输出参数"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER $")]),p("\n"),n("span",{class:"line"}),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 标准语法")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," PROCEDURE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 存储过程名称([IN|OUT|INOUT] 参数名 数据类型)")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEGIN")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t执行的sql语句;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$")]),p("\n"),n("span",{class:"line"}),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER ;")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"输入总成绩变量，代表学生总成绩，输出分数描述变量，代表学生总成绩的描述"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER $")]),p("\n"),n("span",{class:"line"}),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," PROCEDURE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test6("),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"IN"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," total "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"OUT"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," description"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," VARCHAR"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"10"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"))")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEGIN")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t-- 判断总分数")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tIF"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," total "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">="),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 380"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," THEN"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\t\tSET"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," description"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," '学习优秀'"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\tELSEIF total "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">="),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 320"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," AND"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," total "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 380"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," THEN"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\t\tSET"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," description"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," '学习不错'"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tELSE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\t\tSET"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," description"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," '学习一般'"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tEND"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," IF"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$")]),p("\n"),n("span",{class:"line"}),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER ;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 调用pro_test6存储过程")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CALL"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test6("),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"310"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",@description);")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CALL"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test6(("),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," SUM"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(score) "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FROM"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," student), @description);")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 查询总成绩描述")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," @description;")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"查看参数方法"),n("ul",null,[n("li",null,[p("@变量名 : "),n("strong",null,"用户会话变量"),p("，代表整个会话过程他都是有作用的，类似于全局变量")]),n("li",null,[p("@@变量名 : "),n("strong",null,"系统变量")])])])],-1)),l[221]||(l[221]=n("hr",null,null,-1)),l[222]||(l[222]=n("h5",{id:"case",tabindex:"-1"},[p("CASE "),n("a",{class:"header-anchor",href:"#case","aria-label":'Permalink to "CASE"'},"​")],-1)),l[223]||(l[223]=n("ul",null,[n("li",null,[n("p",null,"标准语法 1"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CASE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 表达式")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    WHEN"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 值1 "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"THEN"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 执行sql语句1;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    [WHEN 值2 THEN 执行sql语句2;]")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ...")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    [ELSE 执行sql语句n;]")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," CASE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"标准语法 2"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"sCASE")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    WHEN"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 判断条件1 "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"THEN"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 执行sql语句1;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    [WHEN 判断条件2 THEN 执行sql语句2;]")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ...")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    [ELSE 执行sql语句n;]")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," CASE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"演示"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER $")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," PROCEDURE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test7("),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"IN"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," total "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEGIN")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t-- 定义变量")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tDECLARE"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," description"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," VARCHAR"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"10"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t-- 使用case判断")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tCASE")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tWHEN"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," total "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">="),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 380"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," THEN")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\t\tSET"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," description"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," '学习优秀'"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tWHEN"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," total "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">="),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 320"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," AND"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," total "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 380"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," THEN")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\t\tSET"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," description"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," '学习不错'"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tELSE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\t\tSET"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," description"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," '学习一般'"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tEND"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," CASE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t-- 查询分数描述信息")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tSELECT"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," description"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER ;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 调用pro_test7存储过程")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CALL"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test7("),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"390"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CALL"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test7(("),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," SUM"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(score) "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FROM"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," student));")])])]),n("button",{class:"collapse"})])])],-1)),l[224]||(l[224]=n("hr",null,null,-1)),l[225]||(l[225]=n("h5",{id:"while",tabindex:"-1"},[p("WHILE "),n("a",{class:"header-anchor",href:"#while","aria-label":'Permalink to "WHILE"'},"​")],-1)),l[226]||(l[226]=n("ul",null,[n("li",null,[n("p",null,"while 循环语法"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"WHILE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 条件判断语句 DO")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t循环体语句;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t条件控制语句;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," WHILE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"计算 1~100 之间的偶数和"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER $")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," PROCEDURE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test6()")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEGIN")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t-- 定义求和变量")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tDECLARE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," result "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," DEFAULT"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t-- 定义初始化变量")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tDECLARE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," num "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," DEFAULT"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t-- while循环")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tWHILE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," num "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<="),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 100"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," DO")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\t\tIF"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," num % "),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," THEN")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\t\t\tSET"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," result "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," result "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," num;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\t\tEND"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," IF"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\t\tSET"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," num "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," num "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tEND"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," WHILE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t-- 查询求和结果")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tSELECT"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," result;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER ;")]),p("\n"),n("span",{class:"line"}),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 调用pro_test6存储过程")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CALL"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test6();")])])]),n("button",{class:"collapse"})])])],-1)),l[227]||(l[227]=n("hr",null,null,-1)),l[228]||(l[228]=n("h5",{id:"repeat",tabindex:"-1"},[p("REPEAT "),n("a",{class:"header-anchor",href:"#repeat","aria-label":'Permalink to "REPEAT"'},"​")],-1)),l[229]||(l[229]=n("ul",null,[n("li",null,[n("p",null,"repeat 循环标准语法"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"初始化语句;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"REPEAT")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t循环体语句;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t条件控制语句;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\tUNTIL 条件判断语句")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," REPEAT"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"计算 1~10 之间的和"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER $")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," PROCEDURE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test9()")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEGIN")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t-- 定义求和变量")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tDECLARE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," result "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," DEFAULT"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t-- 定义初始化变量")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tDECLARE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," num "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," DEFAULT"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t-- repeat循环")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tREPEAT")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t\t-- 累加")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\t\tSET"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," result "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," result "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," num;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t\t-- 让num+1")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\t\tSET"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," num "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," num "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t\t-- 停止循环")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t\tUNTIL num "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 10")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tEND"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," REPEAT"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t-- 查询求和结果")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tSELECT"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," result;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$")]),p("\n"),n("span",{class:"line"}),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER ;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 调用pro_test9存储过程")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CALL"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test9();")])])]),n("button",{class:"collapse"})])])],-1)),l[230]||(l[230]=n("hr",null,null,-1)),l[231]||(l[231]=n("h5",{id:"loop",tabindex:"-1"},[p("LOOP "),n("a",{class:"header-anchor",href:"#loop","aria-label":'Permalink to "LOOP"'},"​")],-1)),l[232]||(l[232]=n("p",null,"LOOP 实现简单的循环，退出循环的条件需要使用其他的语句定义，通常可以使用 LEAVE 语句实现，如果不加退出循环的语句，那么就变成了死循环",-1)),l[233]||(l[233]=n("ul",null,[n("li",null,[n("p",null,"loop 循环标准语法"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[循环名称:] "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"LOOP")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t条件判断语句")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t\t[LEAVE 循环名称;]")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t循环体语句;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t条件控制语句;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," LOOP"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 循环名称;")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"计算 1~10 之间的和"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER $")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," PROCEDURE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test10()")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEGIN")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t-- 定义求和变量")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tDECLARE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," result "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," DEFAULT"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t-- 定义初始化变量")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tDECLARE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," num "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," DEFAULT"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t-- loop循环")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\tl:"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"LOOP")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t\t-- 条件成立，停止循环")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\t\tIF"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," num "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 10"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," THEN")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t\t\tLEAVE l;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\t\tEND"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," IF"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t\t-- 累加")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\t\tSET"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," result "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," result "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," num;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t\t-- 让num+1")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\t\tSET"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," num "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," num "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tEND"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," LOOP"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," l;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t-- 查询求和结果")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tSELECT"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," result;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER ;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 调用pro_test10存储过程")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CALL"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test10();")])])]),n("button",{class:"collapse"})])])],-1)),l[234]||(l[234]=n("hr",null,null,-1)),l[235]||(l[235]=n("h5",{id:"游标",tabindex:"-1"},[p("游标 "),n("a",{class:"header-anchor",href:"#游标","aria-label":'Permalink to "游标"'},"​")],-1)),l[236]||(l[236]=n("p",null,"游标是用来存储查询结果集的数据类型，在存储过程和函数中可以使用光标对结果集进行循环的处理",-1)),l[237]||(l[237]=n("ul",null,[n("li",null,"游标可以遍历返回的多行结果，每次拿到一整行数据"),n("li",null,"简单来说游标就类似于集合的迭代器遍历"),n("li",null,"MySQL 中的游标只能用在存储过程和函数中")],-1)),l[238]||(l[238]=n("p",null,"游标的语法",-1)),l[239]||(l[239]=n("ul",null,[n("li",null,[n("p",null,"创建游标"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"DECLARE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 游标名称 "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CURSOR"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FOR"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 查询sql语句;")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"打开游标"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"OPEN"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 游标名称;")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"使用游标获取数据"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FETCH"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 游标名称 "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INTO"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 变量名1,变量名2,...;")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"关闭游标"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CLOSE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 游标名称;")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"Mysql 通过一个 Error handler 声明来判断指针是否到尾部，并且必须和创建游标的 SQL 语句声明在一起："),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"DECLARE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," EXIT HANDLER "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FOR"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," NOT"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," FOUND (do some "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"action"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"，一般是设置标志变量)")])])]),n("button",{class:"collapse"})])])],-1)),l[240]||(l[240]=n("p",null,"游标的基本使用",-1)),l[241]||(l[241]=n("ul",null,[n("li",null,[n("p",null,"数据准备：表 student"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"id\t"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"NAME"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\tage\t\tgender\tscore")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t张三\t\t"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"23"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t\t男\t\t"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"95")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t李四\t\t"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"24"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t\t男\t\t"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"98")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t王五\t\t"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"25"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t\t女\t\t"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"100")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"4"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t赵六\t\t"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"26"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t\t女\t\t"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"90")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"创建 stu_score 表"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," TABLE"),n("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," stu_score"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\tid "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," PRIMARY KEY"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," AUTO_INCREMENT,")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\tscore "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"将student表中所有的成绩保存到stu_score表中"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER $")]),p("\n"),n("span",{class:"line"}),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," PROCEDURE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test12()")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEGIN")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t-- 定义成绩变量")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tDECLARE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," s_score "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t-- 定义标记变量")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tDECLARE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," flag "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," DEFAULT"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t-- 创建游标，查询所有学生成绩数据")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tDECLARE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," stu_result "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CURSOR"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FOR"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," SELECT"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," score "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FROM"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," student;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t-- 游标结束后，将标记变量改为1  这两个必须声明在一起")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tDECLARE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," EXIT HANDLER "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FOR"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," NOT"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," FOUND "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SET"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," flag "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t-- 开启游标")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tOPEN"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," stu_result;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t-- 循环使用游标")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tREPEAT")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t\t-- 使用游标，遍历结果,拿到数据")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\t\tFETCH"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," stu_result "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INTO"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," s_score;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t\t-- 将数据保存到stu_score表中")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\t\tINSERT INTO"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," stu_score "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"VALUES"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"NULL"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",s_score);")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\tUNTIL flag"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tEND"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," REPEAT"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t-- 关闭游标")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tCLOSE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," stu_result;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$")]),p("\n"),n("span",{class:"line"}),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER ;")]),p("\n"),n("span",{class:"line"}),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 调用pro_test12存储过程")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CALL"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pro_test12();")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 查询stu_score表")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," stu_score;")])])]),n("button",{class:"collapse"})])])],-1)),l[242]||(l[242]=n("hr",null,null,-1)),l[243]||(l[243]=n("h4",{id:"存储函数",tabindex:"-1"},[p("存储函数 "),n("a",{class:"header-anchor",href:"#存储函数","aria-label":'Permalink to "存储函数"'},"​")],-1)),l[244]||(l[244]=n("p",null,"存储函数和存储过程是非常相似的，存储函数可以做的事情，存储过程也可以做到",-1)),l[245]||(l[245]=n("p",null,"存储函数有返回值，存储过程没有返回值（参数的 out 其实也相当于是返回数据了）",-1)),l[246]||(l[246]=n("ul",null,[n("li",null,[n("p",null,"创建存储函数"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER $")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 标准语法")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FUNCTION"),n("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," 函数名称"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(参数 数据类型)")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"RETURNS"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 返回值类型")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEGIN")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t执行的sql语句;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tRETURN"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 结果;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$")]),p("\n"),n("span",{class:"line"}),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER ;")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"调用存储函数，因为有返回值，所以使用 SELECT 调用"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 函数名称(实际参数);")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"删除存储函数"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"DROP"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FUNCTION"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 函数名称;")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"定义存储函数，获取学生表中成绩大于95分的学生数量"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER $")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FUNCTION"),n("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fun_test"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"RETURN"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," INT")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEGIN")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t-- 定义统计变量")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tDECLARE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," result "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t-- 查询成绩大于95分的学生数量，给统计变量赋值")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tSELECT"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," COUNT"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(score) "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INTO"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," result "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FROM"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," student "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"WHERE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," score "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 95"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t-- 返回统计结果")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tSELECT"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," result;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER ;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 调用fun_test存储函数")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," fun_test();")])])]),n("button",{class:"collapse"})])])],-1)),l[247]||(l[247]=n("hr",null,null,-1)),l[248]||(l[248]=n("h3",{id:"触发器",tabindex:"-1"},[p("触发器 "),n("a",{class:"header-anchor",href:"#触发器","aria-label":'Permalink to "触发器"'},"​")],-1)),l[249]||(l[249]=n("h4",{id:"基本介绍-2",tabindex:"-1"},[p("基本介绍 "),n("a",{class:"header-anchor",href:"#基本介绍-2","aria-label":'Permalink to "基本介绍"'},"​")],-1)),l[250]||(l[250]=n("p",null,"触发器是与表有关的数据库对象，在 insert/update/delete 之前或之后触发并执行触发器中定义的 SQL 语句",-1)),l[251]||(l[251]=n("ul",null,[n("li",null,"触发器的这种特性可以协助应用在数据库端确保数据的完整性 、日志记录 、数据校验等操作")],-1)),l[252]||(l[252]=n("ul",null,[n("li",null,"使用别名 NEW 和 OLD 来引用触发器中发生变化的记录内容，这与其他的数据库是相似的"),n("li",null,"现在触发器还只支持行级触发，不支持语句级触发")],-1)),l[253]||(l[253]=n("table",null,[n("thead",null,[n("tr",null,[n("th",null,"触发器类型"),n("th",null,"OLD的含义"),n("th",null,"NEW的含义")])]),n("tbody",null,[n("tr",null,[n("td",null,"INSERT 型触发器"),n("td",null,"无 (因为插入前状态无数据)"),n("td",null,"NEW 表示将要或者已经新增的数据")]),n("tr",null,[n("td",null,"UPDATE 型触发器"),n("td",null,"OLD 表示修改之前的数据"),n("td",null,"NEW 表示将要或已经修改后的数据")]),n("tr",null,[n("td",null,"DELETE 型触发器"),n("td",null,"OLD 表示将要或者已经删除的数据"),n("td",null,"无 (因为删除后状态无数据)")])])],-1)),l[254]||(l[254]=n("hr",null,null,-1)),l[255]||(l[255]=n("h4",{id:"基本操作-1",tabindex:"-1"},[p("基本操作 "),n("a",{class:"header-anchor",href:"#基本操作-1","aria-label":'Permalink to "基本操作"'},"​")],-1)),l[256]||(l[256]=n("ul",null,[n("li",null,[n("p",null,"创建触发器"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER $")]),p("\n"),n("span",{class:"line"}),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," TRIGGER"),n("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," 触发器名称")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEFORE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"|"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"AFTER"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  INSERT"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"|"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"UPDATE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"|"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"DELETE")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"ON"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 表名")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[FOR EACH ROW]  "),n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 行级触发器")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEGIN")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t触发器要执行的功能;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$")]),p("\n"),n("span",{class:"line"}),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER ;")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"查看触发器的状态、语法等信息"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"SHOW TRIGGERS;")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"删除触发器，如果没有指定 schema_name，默认为当前数据库"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"DROP"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," TRIGGER"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," [schema_name.]trigger_name;")])])]),n("button",{class:"collapse"})])])],-1)),l[257]||(l[257]=n("hr",null,null,-1)),l[258]||(l[258]=n("h4",{id:"触发演示",tabindex:"-1"},[p("触发演示 "),n("a",{class:"header-anchor",href:"#触发演示","aria-label":'Permalink to "触发演示"'},"​")],-1)),l[259]||(l[259]=n("p",null,"通过触发器记录账户表的数据变更日志。包含：增加、修改、删除",-1)),l[260]||(l[260]=n("ul",null,[n("li",null,[n("p",null,"数据准备"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 创建db9数据库")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," DATABASE"),n("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," db9"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 使用db9数据库")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"USE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," db9;")])])]),n("button",{class:"collapse"})]),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 创建账户表account")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," TABLE"),n("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," account"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\tid "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," PRIMARY KEY"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," AUTO_INCREMENT,\t"),n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 账户id")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tNAME"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," VARCHAR"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"20"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"),\t\t\t\t\t"),n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 姓名")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tmoney"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," DOUBLE\t\t\t\t\t\t"),n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 余额")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 添加数据")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INSERT INTO"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," account "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"VALUES"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"NULL"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'张三'"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1000"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"),("),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"NULL"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'李四'"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2000"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")])])]),n("button",{class:"collapse"})]),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 创建日志表account_log")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," TABLE"),n("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," account_log"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\tid "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," PRIMARY KEY"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," AUTO_INCREMENT,\t"),n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 日志id")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\toperation "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"VARCHAR"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"20"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"),\t\t\t\t"),n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 操作类型 (insert update delete)")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\toperation_time "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"DATETIME"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",\t\t\t"),n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 操作时间")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\toperation_id "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",\t\t\t\t\t"),n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 操作表的id")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\toperation_params "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"VARCHAR"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"200"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")       "),n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 操作参数")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"创建 INSERT 型触发器"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER $")]),p("\n"),n("span",{class:"line"}),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," TRIGGER"),n("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," account_insert")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"AFTER"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," INSERT")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"ON"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," account")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FOR"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," EACH "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"ROW")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEGIN")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tINSERT INTO"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," account_log "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"VALUES"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"NULL"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'INSERT'"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"NOW"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(),"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"new"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"id"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"CONCAT"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'插入后{id='"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"new"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"id"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"',name='"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"new"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"name"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"',money='"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"new"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"money"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'}'"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"));")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$")]),p("\n"),n("span",{class:"line"}),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER ;")])])]),n("button",{class:"collapse"})]),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 向account表添加记录")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INSERT INTO"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," account "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"VALUES"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"NULL"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'王五'"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3000"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),p("\n"),n("span",{class:"line"}),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 查询日志表")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," account_log;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"/*")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"id\toperation\toperation_time\t\toperation_id\toperation_params")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"1\tINSERT\t   \t2021-01-26 19:51:11\t\t3\t     插入后{id=3,name=王五money=2000}")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"*/")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"创建 UPDATE 型触发器"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER $")]),p("\n"),n("span",{class:"line"}),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," TRIGGER"),n("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," account_update")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"AFTER"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," UPDATE")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"ON"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," account")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FOR"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," EACH "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"ROW")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEGIN")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tINSERT INTO"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," account_log "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"VALUES"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"NULL"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'UPDATE'"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"NOW"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(),"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"new"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"id"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"CONCAT"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'修改前{id='"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"old"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"id"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"',name='"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"old"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"name"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"',money='"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"old"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"money"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'}'"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'修改后{id='"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"new"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"id"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"',name='"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"new"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"name"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"',money='"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"new"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"money"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'}'"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"));")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$")]),p("\n"),n("span",{class:"line"}),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER ;")])])]),n("button",{class:"collapse"})]),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 修改account表")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"UPDATE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," account "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SET"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," money="),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3500"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," WHERE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," id"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"}),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 查询日志表")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," account_log;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"/*")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"id\toperation\toperation_time\t\toperation_id\t  operation_params")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"2\tUPDATE\t   \t2021-01-26 19:58:54\t\t2\t\t 更新前{id=2,name=李四money=1000}")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"\t\t\t\t\t\t\t\t\t\t\t\t 更新后{id=2,name=李四money=200}")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"*/")])])]),n("button",{class:"collapse"})])]),n("li",null,[n("p",null,"创建 DELETE 型触发器"),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER $")]),p("\n"),n("span",{class:"line"}),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," TRIGGER"),n("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," account_delete")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"AFTER"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," DELETE")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"ON"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," account")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FOR"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," EACH "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"ROW")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEGIN")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"\tINSERT INTO"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," account_log "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"VALUES"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"NULL"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'DELETE'"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"NOW"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(),"),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"old"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"id"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"CONCAT"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'删除前{id='"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"old"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"id"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"',name='"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"old"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"name"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"',money='"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"old"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"money"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),n("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'}'"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"));")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$")]),p("\n"),n("span",{class:"line"}),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER ;")])])]),n("button",{class:"collapse"})]),n("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[n("button",{title:"Copy Code",class:"copy"}),n("span",{class:"lang"},"sql"),n("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[n("code",{"v-pre":""},[n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 删除account表数据")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"DELETE"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," account "),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"WHERE"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," id"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),n("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),p("\n"),n("span",{class:"line"}),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 查询日志表")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),n("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),n("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," account_log;")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"/*")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"id\toperation\toperation_time\t\toperation_id\toperation_params")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"3\tDELETE\t\t2021-01-26 20:02:48\t\t3\t    删除前{id=3,name=王五money=2000}")]),p("\n"),n("span",{class:"line"},[n("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"*/")])])]),n("button",{class:"collapse"})])])],-1)),l[261]||(l[261]=n("hr",null,null,-1)),l[262]||(l[262]=n("h2",{id:"范式",tabindex:"-1"},[p("范式 "),n("a",{class:"header-anchor",href:"#范式","aria-label":'Permalink to "范式"'},"​")],-1)),l[263]||(l[263]=n("h3",{id:"第一范式",tabindex:"-1"},[p("第一范式 "),n("a",{class:"header-anchor",href:"#第一范式","aria-label":'Permalink to "第一范式"'},"​")],-1)),l[264]||(l[264]=n("p",null,[p("建立科学的，"),n("strong",null,"规范的数据表"),p("就需要满足一些规则来优化数据的设计和存储，这些规则就称为范式")],-1)),l[265]||(l[265]=n("p",null,[p("**1NF：**数据库表的每一列都是不可分割的原子数据项，不能是集合、数组等非原子数据项。即表中的某个列有多个值时，必须拆分为不同的列。简而言之，"),n("strong",null,"第一范式每一列不可再拆分，称为原子性")],-1)),l[266]||(l[266]=n("p",null,"基本表：",-1)),l[267]||(l[267]=n("figure",null,[n("img",{src:"https://gcore.jsdelivr.net/gh/imLKlauS/blog-picture@main/blogs/image-20250319234724584.png",alt:"image-20250319234724584",loading:"lazy",decoding:"async",class:"lazy"})],-1)),l[268]||(l[268]=n("p",null,"第一范式表：",-1)),l[269]||(l[269]=n("figure",null,[n("img",{src:"https://gcore.jsdelivr.net/gh/imLKlauS/blog-picture@main/blogs/image-20250319234816785.png",alt:"image-20250319234816785",loading:"lazy",decoding:"async",class:"lazy"})],-1)),l[270]||(l[270]=n("hr",null,null,-1)),l[271]||(l[271]=n("h3",{id:"第二范式",tabindex:"-1"},[p("第二范式 "),n("a",{class:"header-anchor",href:"#第二范式","aria-label":'Permalink to "第二范式"'},"​")],-1)),l[272]||(l[272]=n("p",null,[p("**2NF：**在满足第一范式的基础上，非主属性完全依赖于主码（主关键字、主键），消除非主属性对主码的部分函数依赖。简而言之，"),n("strong",null,"表中的每一个字段 （所有列）都完全依赖于主键，记录的唯一性")],-1)),l[273]||(l[273]=n("p",null,"作用：遵守第二范式减少数据冗余，通过主键区分相同数据。",-1)),l[274]||(l[274]=n("ol",null,[n("li",null,[p("函数依赖：A → B，如果通过 A 属性(属性组)的值，可以确定唯一 B 属性的值，则称 B 依赖于 A "),n("ul",null,[n("li",null,"学号 → 姓名；(学号，课程名称) → 分数")])]),n("li",null,[p("完全函数依赖：A → B，如果A是一个属性组，则 B 属性值的确定需要依赖于 A 属性组的所有属性值 "),n("ul",null,[n("li",null,"(学号，课程名称) → 分数")])]),n("li",null,[p("部分函数依赖：A → B，如果 A 是一个属性组，则 B 属性值的确定只需要依赖于 A 属性组的某些属性值 "),n("ul",null,[n("li",null,"(学号，课程名称) → 姓名")])]),n("li",null,[p("传递函数依赖：A → B，B → C，如果通过A属性(属性组)的值，可以确定唯一 B 属性的值，在通过 B 属性(属性组)的值，可以确定唯一 C 属性的值，则称 C 传递函数依赖于 A "),n("ul",null,[n("li",null,"学号 → 系名，系名 → 系主任")])]),n("li",null,[p("码：如果在一张表中，一个属性或属性组，被其他所有属性所完全依赖，则称这个属性(属性组)为该表的码 "),n("ul",null,[n("li",null,"该表中的码：(学号，课程名称)"),n("li",null,"主属性：码属性组中的所有属性"),n("li",null,"非主属性：除码属性组以外的属性")])])],-1)),l[275]||(l[275]=n("figure",null,[n("img",{src:"https://gcore.jsdelivr.net/gh/imLKlauS/blog-picture@main/blogs/image-20250319234838513.png",alt:"image-20250319234838513",loading:"lazy",decoding:"async",class:"lazy"})],-1)),l[276]||(l[276]=n("hr",null,null,-1)),l[277]||(l[277]=n("h3",{id:"第三范式",tabindex:"-1"},[p("第三范式 "),n("a",{class:"header-anchor",href:"#第三范式","aria-label":'Permalink to "第三范式"'},"​")],-1)),l[278]||(l[278]=n("p",null,[p("**3NF：**在满足第二范式的基础上，表中的任何属性不依赖于其它非主属性，消除传递依赖。简而言之，"),n("strong",null,"非主键都直接依赖于主键，而不是通过其它的键来间接依赖于主键"),p("。")],-1)),l[279]||(l[279]=n("p",null,"作用：可以通过主键 id 区分相同数据，修改数据的时候只需要修改一张表（方便修改），反之需要修改多表。",-1)),l[280]||(l[280]=n("figure",null,[n("img",{src:"https://gcore.jsdelivr.net/gh/imLKlauS/blog-picture@main/blogs/image-20250319234912807.png",alt:"image-20250319234912807",loading:"lazy",decoding:"async",class:"lazy"})],-1)),l[281]||(l[281]=n("hr",null,null,-1)),l[282]||(l[282]=n("h3",{id:"总结",tabindex:"-1"},[p("总结 "),n("a",{class:"header-anchor",href:"#总结","aria-label":'Permalink to "总结"'},"​")],-1)),l[283]||(l[283]=n("figure",null,[n("img",{src:"https://gcore.jsdelivr.net/gh/imLKlauS/blog-picture@main/blogs/image-20250319235102890.png",alt:"image-20250319235102890",loading:"lazy",decoding:"async",class:"lazy"})],-1))])),"main-header":t((()=>[k(s.$slots,"main-header")])),"main-header-after":t((()=>[k(s.$slots,"main-header-after")])),"main-nav":t((()=>[k(s.$slots,"main-nav")])),"main-content-before":t((()=>[k(s.$slots,"main-content-before")])),"main-content":t((()=>[k(s.$slots,"main-content")])),"main-content-after":t((()=>[k(s.$slots,"main-content-after")])),"main-nav-before":t((()=>[k(s.$slots,"main-nav-before")])),"main-nav-after":t((()=>[k(s.$slots,"main-nav-after")])),comment:t((()=>[k(s.$slots,"comment")])),footer:t((()=>[k(s.$slots,"footer")])),aside:t((()=>[k(s.$slots,"aside")])),"aside-custom":t((()=>[k(s.$slots,"aside-custom")])),default:t((()=>[k(s.$slots,"default")])),_:3},8,["frontmatter"])}}};export{y as default,g as usePageData};
