import{_ as i}from"./ValaxyMain.vue_vue_type_style_index_0_lang.NDzr_upu.js";import"./chunks/@vueuse/motion.BrTBiDBP.js";import{d as s,a,u as l}from"./chunks/vue-router.Cmq8qKBB.js";import{a1 as h,a3 as k,a4 as t,a5 as e,a6 as n,a7 as E,F as r,a2 as p,Z as d}from"./framework.CSpzLJwA.js";import"./app.B9pDRBUK.js";import"./chunks/dayjs.Dto65haK.js";import"./chunks/vue-i18n.C5QQbedb.js";import"./chunks/pinia.CKttsWmm.js";import"./chunks/nprogress.BEPa78Un.js";/* empty css                    */import"./YunComment.vue_vue_type_style_index_0_lang.B26MP4Hy.js";import"./index.TQnGKZgq.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.DIveis5r.js";import"./post.DD7hVHl0.js";const g=s("/posts/Design_Patterns-Strategy",async i=>JSON.parse('{"title":"设计模式之抽象策略模式 - Strategy","description":"","frontmatter":{"title":"设计模式之抽象策略模式 - Strategy","author":"imklaus","tags":["Spring Boot","策略模式"],"categories":["Java","设计模式"],"date":"2023-9-1 19:57:12","outline":"deep","excerpt_type":"html","end":false},"headers":[],"relativePath":"pages/posts/Design_Patterns-Strategy.md","lastUpdated":null}'),{lazy:(i,s)=>i.name===s.name}),y={__name:"Design_Patterns-Strategy",setup(s,{expose:y}){const{data:c}=g(),F=l(),o=a(),A=Object.assign(o.meta.frontmatter||{},c.value?.frontmatter||{});F.currentRoute.value.data=c.value,d("valaxy:frontmatter",A),globalThis.$frontmatter=A;return y({frontmatter:{title:"设计模式之抽象策略模式 - Strategy",author:"imklaus",tags:["Spring Boot","策略模式"],categories:["Java","设计模式"],date:"2023-9-1 19:57:12",outline:"deep",excerpt_type:"html",end:!1}}),(s,a)=>{const l=i;return p(),h(l,{frontmatter:r(A)},{"main-content-md":k(()=>[a[0]||(a[0]=e("h2",{id:"策略模式是什么",tabindex:"-1"},[E("策略模式是什么 "),e("a",{class:"header-anchor",href:"#策略模式是什么","aria-label":'Permalink to "策略模式是什么"'},"​")],-1)),a[1]||(a[1]=e("p",null,"策略模式在 GoF 的《设计模式》一书中，是这样定义的：",-1)),a[2]||(a[2]=e("blockquote",null,[e("p",null,"Define a family of algorithms, encapsulate each one, and make them interchangeable. Strategy lets the algorithm vary independently from clients that use it.")],-1)),a[3]||(a[3]=e("p",null,"策略设计模式（Strategy Pattern）是一种面向对象设计模式，它定义了一系列算法，并将每个算法封装起来，使它们可以相互替换。这种模式使得算法可以独立于使用它们的客户端而变化。",-1)),n(" more "),a[4]||(a[4]=e("p",null,"策略设计模式包含三个主要的角色：",-1)),a[5]||(a[5]=e("blockquote",null,[e("ol",null,[e("li",null,"环境（Context）：持有一个策略对象，并调用其算法。"),e("li",null,"策略（Strategy）：定义了一组算法，并将每个算法封装起来，使它们可以相互替换。"),e("li",null,"具体策略（ConcreteStrategy）：实现了策略接口，提供了具体的算法实现。")])],-1)),a[6]||(a[6]=e("p",null,"在策略设计模式中，环境持有一个策略对象，并通过调用策略的算法来完成具体的任务。策略对象可以根据需要进行替换，从而实现不同的算法实现，并且可以在运行时动态地更改策略对象。",-1)),a[7]||(a[7]=e("p",null,"看到上面的介绍可能不太明白策略模式具体为何物，这里会从最基本的代码说起，一步一步彻底掌握此模式。",-1)),a[8]||(a[8]=e("h2",{id:"优惠类型实战",tabindex:"-1"},[E("优惠类型实战 "),e("a",{class:"header-anchor",href:"#优惠类型实战","aria-label":'Permalink to "优惠类型实战"'},"​")],-1)),a[9]||(a[9]=e("p",null,[E("下述代码可能大家都能联想出对应的业务，"),e("strong",null,"根据对应的优惠类型，对价格作出相应的优惠。")],-1)),a[10]||(a[10]=e("figure",null,[e("img",{src:"https://gcore.jsdelivr.net/gh/imLKlauS/blog-picture@main/blogs/1672473955617-630ff21a-2791-428d-bebd-bb953989f57d.png",alt:"img",loading:"lazy",decoding:"async",class:"lazy"})],-1)),a[11]||(a[11]=e("p",null,"这段代码是能够满足项目中业务需求的，而且很多已上线生产环境的代码也有这类代码。但是，这一段代码存在存在两个弊端：",-1)),a[12]||(a[12]=e("ol",null,[e("li",null,[E("代码的复杂性，正常业务代码逻辑肯定会比这个代码块复杂很多，这也就 "),e("strong",null,"导致了 if-else 的分支以及代码数量过多"),E("。这种方式可以通过将代码拆分成独立函数或者拆分成类来解决。")]),e("li",null,[E("开闭原则，价格优惠肯定会 "),e("strong",null,"随着不同的时期作出不同的改变"),E("，或许新增、删除或修改。如果在一个函数中修改无疑是件恐怖的事情，想想可能多个开发者分别进行开发，杂乱无章的注释，混乱的代码逻辑等情况十有八九会发生。")])],-1)),a[13]||(a[13]=e("p",null,"如何运用策略模式优化上述代码，使程序设计看着简约、可扩展等特性。",-1)),a[14]||(a[14]=e("ol",null,[e("li",null,"简化代码的复杂性，将不同的优惠类型定义为不同的策略算法实现类。"),e("li",null,"保证开闭原则，增加程序的健壮性以及可扩展性。")],-1)),a[15]||(a[15]=e("p",null,"将上述代码块改造为策略设计模式，大致需要三个步骤。",-1)),a[16]||(a[16]=e("ol",null,[e("li",null,"定义抽象策略接口，因为业务使用接口而不是具体的实现类的话，便可以灵活的替换不同的策略；"),e("li",null,"定义具体策略实现类，实现自抽象策略接口，其内部封装具体的业务实现；"),e("li",null,"定义策略工厂，封装创建策略实现（算法），对客户端屏蔽具体的创建细节。")],-1)),a[17]||(a[17]=e("figure",null,[e("img",{src:"https://gcore.jsdelivr.net/gh/imLKlauS/blog-picture@main/blogs/1672473992392-4b6d78d6-47ab-4d98-afe7-110143827b6b.png",alt:"img",loading:"lazy",decoding:"async",class:"lazy"})],-1)),a[18]||(a[18]=e("p",null,"目前把抽象策略接口、具体的策略实现类以及策略工厂都已经创建了，现在可以看一下客户端需要如何调用，又是如何对客户端屏蔽具体实现细节的。",-1)),a[19]||(a[19]=e("figure",null,[e("img",{src:"https://gcore.jsdelivr.net/gh/imLKlauS/blog-picture@main/blogs/1672474008299-8d04739e-21e7-4c18-bf06-ca39a837ed9b.png",alt:"img",loading:"lazy",decoding:"async",class:"lazy"})],-1)),a[20]||(a[20]=e("p",null,[E("根据代码块图片得知，具体策略类是从策略工厂中获取，确实是取消了 if-else 设计，"),e("strong",null,"在工厂中使用 Map 存储策略实现"),E("。获取到策略类后执行具体的优惠策略方法就可以获取优惠后的金额。")],-1)),a[21]||(a[21]=e("p",null,[E("通过分析大家得知，目前这种设计确实将应用代码的复杂性降低了。"),e("strong",null,"如果新增一个优惠策略，只需要新增一个策略算法实现类即可"),E("。但是，添加一个策略算法实现，"),e("strong",null,"意味着需要改动策略工厂中的代码"),E("，还是不符合开闭原则。")],-1)),a[22]||(a[22]=e("p",null,"如何完整实现符合开闭原则的策略模式，需要借助 Spring 的帮助，详细案例请继续往下看。",-1)),a[23]||(a[23]=e("h2",{id:"策略模式结合-spring",tabindex:"-1"},[E("策略模式结合 Spring "),e("a",{class:"header-anchor",href:"#策略模式结合-spring","aria-label":'Permalink to "策略模式结合 Spring"'},"​")],-1)),a[24]||(a[24]=e("p",null,"最近项目中设计的一个功能用到了策略模式，分为两类角色，笔者负责定义抽象策略接口以及策略工厂，不同的策略算法需要各个业务方去实现，可以联想到上文中的优惠券功能。因为是 Spring 项目，所以都是按照 Spring 的方式进行处理。",-1)),a[25]||(a[25]=e("figure",null,[e("img",{src:"https://gcore.jsdelivr.net/gh/imLKlauS/blog-picture@main/blogs/1672474038315-5988975f-07d4-452f-95d9-f8e7921915fe.png",alt:"img",loading:"lazy",decoding:"async",class:"lazy"})],-1)),a[26]||(a[26]=e("p",null,"可以看到，比对上面的示例代码，有两处明显的变化：",-1)),a[27]||(a[27]=e("ol",null,[e("li",null,"抽象策略接口中，新定义了 mark() 接口，此接口用来标示算法的唯一性；"),e("li",null,"具体策略实现类，使用 @Component 修饰，将对象本身交由 Spring 进行管理 。")],-1)),a[28]||(a[28]=e("p",null,"小贴士：为了阅读方便，mark() 返回直接使用字符串替代，读者朋友在返回标示时最好使用枚举定义。",-1)),a[29]||(a[29]=e("p",null,"接下来继续查看抽象策略工厂如何改造，才能满足开闭原则。",-1)),a[30]||(a[30]=e("figure",null,[e("img",{src:"https://gcore.jsdelivr.net/gh/imLKlauS/blog-picture@main/blogs/1672474063847-3dacf3d3-dcdc-4219-9b74-47191e535764.png",alt:"img",loading:"lazy",decoding:"async",class:"lazy"})],-1)),a[31]||(a[31]=e("p",null,"通过 InitializingBean 接口实现中调用 IOC 容器查找对应策略实现，随后将策略实现 mark() 方法返回值作为 key， 策略实现本身作为 value 添加到 Map 容器中等待客户端的调用。",-1)),a[32]||(a[32]=e("figure",null,[e("img",{src:"https://gcore.jsdelivr.net/gh/imLKlauS/blog-picture@main/blogs/1672474079146-767a091f-05ec-4dd8-9d3d-379981a8d0bb.png",alt:"img",loading:"lazy",decoding:"async",class:"lazy"})],-1)),a[33]||(a[33]=e("p",null,"这里使用的 SpringBoot 测试类，注入策略工厂 Bean，通过策略工厂选择出具体的策略算法类，继而通过算法获取到优惠后的价格。",-1)),a[34]||(a[34]=e("p",null,"总结下本小节，我们通过和 Spring 结合的方式，通过策略设计模式对文初的代码块进行了两块优化：应对代码的复杂性，让其满足开闭原则。",-1)),a[35]||(a[35]=e("p",null,[E("更具体一些呢就是 "),e("strong",null,"通过抽象策略算法类减少代码的复杂性，继而通过 Spring 的一些特性同时满足了开闭原则"),E("，现在来了新需求只要添加新的策略类即可，健壮易扩展。")],-1)),a[36]||(a[36]=e("h2",{id:"策略模式优缺点",tabindex:"-1"},[E("策略模式优缺点 "),e("a",{class:"header-anchor",href:"#策略模式优缺点","aria-label":'Permalink to "策略模式优缺点"'},"​")],-1)),a[37]||(a[37]=e("p",null,"策略设计模式的优点包括：",-1)),a[38]||(a[38]=e("ol",null,[e("li",null,"提高了代码的灵活性和可维护性：由于算法的实现与使用相分离，使得代码的灵活性和可维护性得到提高。当需要修改或添加新的算法时，只需要定义新的策略类，并将其传递给环境类即可，而无需修改环境类的代码。"),e("li",null,"提高了代码的复用性：策略设计模式将算法的实现封装在策略类中，使得算法可以被多个客户端重复使用，从而提高了代码的复用性。"),e("li",null,"可以动态地切换算法：策略设计模式将算法封装在策略类中，使得可以在运行时动态地更改算法，从而实现不同的功能和行为。这样可以使得程序更加灵活，适应不同的需求和变化。"),e("li",null,"算法实现与使用相分离：策略设计模式将算法的实现与使用相分离，使得代码更加清晰、简洁、易于维护和扩展。由于算法的实现被封装在策略类中，客户端只需要关注如何选择和使用不同的算法即可，这样可以使得代码更加易于理解和维护。"),e("li",null,"可以避免使用大量的条件语句：在某些情况下，需要根据不同的条件来选择不同的算法，这可能会导致代码中出现大量的条件语句，使得代码难以维护和扩展。而策略设计模式可以避免这种情况的发生，使得代码更加简洁和易于维护。")],-1)),a[39]||(a[39]=e("p",null,"需要注意的是，在使用策略设计模式时需要注意以下几点：",-1)),a[40]||(a[40]=e("ol",null,[e("li",null,"策略类之间应该是相互独立的，彼此之间不应该有任何依赖关系。这样才能确保算法的选择和替换可以在运行时动态地进行，同时也可以避免代码的耦合度过高。"),e("li",null,"策略接口应该尽可能地简单和通用，以便于不同的策略实现类可以共用同一个接口。这样可以提高代码的复用性和灵活性，同时也可以避免接口过于复杂和难以维护。"),e("li",null,"策略设计模式适用于需要在运行时动态切换算法的场景，如果算法的实现不需要动态切换，或者算法的实现较为简单，策略设计模式可能会显得过于复杂。因此，在选择使用策略设计模式时，需要根据具体的需求和场景进行判断和选择。"),e("li",null,"策略设计模式可以与其他设计模式结合使用，例如工厂方法模式、单例模式等。这样可以进一步提高代码的灵活性和可维护性，同时也可以避免代码的复杂度过高。")],-1)),a[41]||(a[41]=e("h2",{id:"框架源码应用",tabindex:"-1"},[E("框架源码应用 "),e("a",{class:"header-anchor",href:"#框架源码应用","aria-label":'Permalink to "框架源码应用"'},"​")],-1)),a[42]||(a[42]=e("p",null,"自己用肯定觉得不够，必要时候还得看看设计开源框架源码的大佬们如何在代码中运用策略模式的。",-1)),a[43]||(a[43]=e("p",null,"在马哥了解中，JDK、Spring、SpringMvc、Mybatis、Dubbo 等等都运用了策略设计模式，这里就以 Mybatis 举例说明。",-1)),a[44]||(a[44]=e("p",null,"Mybatis 中 Executor 代表执行器，负责增删改查的具体操作。其中用到了两种设计模式，模版方法以及策略模式。",-1)),a[45]||(a[45]=e("figure",null,[e("img",{src:"https://gcore.jsdelivr.net/gh/imLKlauS/blog-picture@main/blogs/1672474104169-3317d8bf-5313-470e-9626-4a317ccaf396.png",alt:"img",loading:"lazy",decoding:"async",class:"lazy"})],-1)),a[46]||(a[46]=e("ul",null,[e("li",null,"Executor 代表了抽象策略接口，刚才说到的模版方法模式源自 BaseExecutor。"),e("li",null,"Configuration 代表策略工厂，负责创建具体的策略算法实现类。"),e("li",null,"SimpleExecuto、ReuseExecutor… 表示封装了具体的策略算法实现类。")],-1)),a[47]||(a[47]=e("figure",null,[e("img",{src:"https://gcore.jsdelivr.net/gh/imLKlauS/blog-picture@main/blogs/1672474128984-76fc2c9a-91b8-4f34-8643-a64bd58bc4bf.png",alt:"img",loading:"lazy",decoding:"async",class:"lazy"})],-1)),a[48]||(a[48]=e("p",null,"上述代码块发生在 Configuration 类中创建执行器 Executor，通过 executorType 判断创建不同的策略算法。",-1)),a[49]||(a[49]=e("p",null,"上述代码块并没有彻底消除 if-else，因为 Mybatis 中执行器策略基本是固定的，也就是说它只会有这些 if-else 判断，基本不会新增或修改。如果非要消除 if-else，可以这么搞，这里写一下伪代码。",-1)),a[50]||(a[50]=e("figure",null,[e("img",{src:"https://gcore.jsdelivr.net/gh/imLKlauS/blog-picture@main/blogs/1672474150395-2d817442-442a-4e13-9df8-1642324d57d8.png",alt:"img",loading:"lazy",decoding:"async",class:"lazy"})],-1)),a[51]||(a[51]=e("p",null,[E("这种方式叫做 "),e("strong",null,'"查表法"'),E("，通过策略工厂实现消除 if-else 分支。最后，Mybatis 太过详细的设计这里不再赘述，有兴趣的小伙伴可以去把源码下载啃一啃。")],-1)),a[52]||(a[52]=e("p",null,[E("到了这里可能有读者看出了问题，"),e("strong",null,"策略模式就算消除了 if-else 但是如果添加新的策略类，不还是会违反开闭原则么？")],-1)),a[53]||(a[53]=e("p",null,[E("没错，因为 Mybatis 本身没有引入 Spring 依赖，"),e("strong",null,"所以没有办法借助 IOC 容器实现开闭原则"),E("。Spring 是一种开闭原则解决方式，那还有没有别的解决方式？")],-1)),a[54]||(a[54]=e("p",null,[E("解决方式有很多，开闭原则核心就是 "),e("strong",null,"对原有代码修改关闭，对新增代码开放"),E("。可以通过扫描指定包下的自定义注解亦或者通过 instanceof 判断是否继承自某接口都可以。")],-1)),a[55]||(a[55]=e("h2",{id:"策略模式抽象",tabindex:"-1"},[E("策略模式抽象 "),e("a",{class:"header-anchor",href:"#策略模式抽象","aria-label":'Permalink to "策略模式抽象"'},"​")],-1)),a[56]||(a[56]=e("p",null,[E("可能细心的小伙伴会发现一个问题，当业务使用越来越多的情况下，重复定义 "),e("code",null,"DiscountStrategy"),E(" 以及 "),e("code",null,"DiscountStrategyFactory"),E(" 会增加系统冗余代码量。")],-1)),a[57]||(a[57]=e("p",null,"可以考虑将这两个基础类抽象出来，作为基础组件库中的通用组件，供所有系统下的业务使用，从而避免代码冗余。",-1)),a[58]||(a[58]=e("p",null,"定义抽象策略处理接口，添加有返回值和无返回值接口。",-1)),a[59]||(a[59]=e("div",{class:"language-java max-h-300px"},[e("button",{title:"Copy code",class:"copy"}),e("span",{class:"lang"},"java"),e("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[e("code",{"v-pre":""},[e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"/**")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," * 策略执行抽象")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," */")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," interface"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," AbstractExecuteStrategy"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"REQUEST"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"RESPONSE"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    /**")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     * 执行策略标识")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     */")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    String "),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mark"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    /**")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     * 执行策略")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     *")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     * "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"@param"),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," requestParam"),e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," 执行策略入参")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     */")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    default"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," void"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," execute"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(REQUEST "),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"requestParam"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    /**")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     * 执行策略，带返回值")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     *")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     * "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"@param"),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," requestParam"),e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," 执行策略入参")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     * "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"@return"),e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," 执行策略后返回值")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     */")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    default"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," RESPONSE "),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"executeResp"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(REQUEST "),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"requestParam"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        return"),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," null"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),e("button",{class:"code-block-unfold-btn"})],-1)),a[60]||(a[60]=e("p",null,[E("添加策略选择器，通过订阅 Spring 初始化事件执行扫描所有策略模式接口执行器，并根据 mark 方法定义标识添加到 "),e("code",null,"abstractExecuteStrategyMap"),E(" 容器中。")],-1)),a[61]||(a[61]=e("p",null,[E("客户端在实际业务中使用 "),e("code",null,"AbstractStrategyChoose#choose"),E(" 即可完成策略模式实现。")],-1)),a[62]||(a[62]=e("div",{class:"language-java max-h-300px"},[e("button",{title:"Copy code",class:"copy"}),e("span",{class:"lang"},"java"),e("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[e("code",{"v-pre":""},[e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"/**")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," * 策略选择器")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," */")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," class"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," AbstractStrategyChoose"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," implements"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," ApplicationListener"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"ApplicationInitializingEvent"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    /**")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     * 执行策略集合")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     */")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    private"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," final"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Map<"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"String"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"AbstractExecuteStrategy"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> abstractExecuteStrategyMap "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," new"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," HashMap<>();")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    /**")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     * 根据 mark 查询具体策略")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     *")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     * "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"@param"),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," mark"),e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," 策略标识")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     * "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"@return"),e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," 实际执行策略")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     */")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," AbstractExecuteStrategy "),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"choose"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(String "),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"mark"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        return"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Optional."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ofNullable"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(abstractExecuteStrategyMap."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"get"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(mark))."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"orElseThrow"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(() "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"->"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," new"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," ServiceException"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(String."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"format"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"[%s] 策略未定义"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", mark)));")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    /**")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     * 根据 mark 查询具体策略并执行")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     *")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     * "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"@param"),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," mark"),e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"         策略标识")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     * "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"@param"),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," requestParam"),e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," 执行策略入参")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     * "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"@param"),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," <REQUEST>"),e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    执行策略入参范型")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     */")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," <"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"REQUEST"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"void"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," chooseAndExecute"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(String "),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"mark"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", REQUEST "),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"requestParam"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        AbstractExecuteStrategy executeStrategy "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," choose"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(mark);")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        executeStrategy."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"execute"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(requestParam);")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    /**")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     * 根据 mark 查询具体策略并执行，带返回结果")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     *")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     * "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"@param"),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," mark"),e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"         策略标识")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     * "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"@param"),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," requestParam"),e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," 执行策略入参")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     * "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"@param"),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," <REQUEST>"),e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    执行策略入参范型")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     * "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"@param"),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," <RESPONSE>"),e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"   执行策略出参范型")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     * "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"@return")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     */")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," <"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"REQUEST"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"RESPONSE"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> RESPONSE "),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"chooseAndExecuteResp"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(String "),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"mark"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", REQUEST "),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"requestParam"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        AbstractExecuteStrategy executeStrategy "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," choose"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(mark);")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        return"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (RESPONSE) executeStrategy."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"executeResp"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(requestParam);")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    @"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Override")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," void"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," onApplicationEvent"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(ApplicationInitializingEvent "),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"event"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Map<"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"String"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"AbstractExecuteStrategy"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> actual "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ApplicationContextHolder."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getBeansOfType"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(AbstractExecuteStrategy.class);")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        actual."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"forEach"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"((beanName, bean) "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"->"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            AbstractExecuteStrategy beanExist "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," abstractExecuteStrategyMap."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"get"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(bean."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mark"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"());")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            if"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (beanExist "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"!="),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," null"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                throw"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," new"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," ServiceException"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(String."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"format"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"[%s] Duplicate execution policy"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", bean."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mark"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()));")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            abstractExecuteStrategyMap."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"put"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(bean."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mark"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(), bean);")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        });")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),e("button",{class:"code-block-unfold-btn"})],-1)),a[63]||(a[63]=e("p",null,"这两个实现已经被放置在基础组件库中，如果业务需要使用策略模式，则无需重新定义。",-1)),a[64]||(a[64]=e("h2",{id:"策略模式实现",tabindex:"-1"},[E("策略模式实现 "),e("a",{class:"header-anchor",href:"#策略模式实现","aria-label":'Permalink to "策略模式实现"'},"​")],-1)),a[65]||(a[65]=e("h3",{id:"列车座位选择器",tabindex:"-1"},[E("列车座位选择器 "),e("a",{class:"header-anchor",href:"#列车座位选择器","aria-label":'Permalink to "列车座位选择器"'},"​")],-1)),a[66]||(a[66]=e("h4",{id:"购票时列车座位选择器",tabindex:"-1"},[E("购票时列车座位选择器 "),e("a",{class:"header-anchor",href:"#购票时列车座位选择器","aria-label":'Permalink to "购票时列车座位选择器"'},"​")],-1)),a[67]||(a[67]=e("div",{class:"language-java max-h-300px"},[e("button",{title:"Copy code",class:"copy"}),e("span",{class:"lang"},"java"),e("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[e("code",{"v-pre":""},[e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"@"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Slf4j")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"@"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Component")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"@"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"RequiredArgsConstructor")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," final"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," class"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," TrainSeatTypeSelector"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),E("\n"),e("span",{class:"line"}),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ......")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    private"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," final"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," AbstractStrategyChoose abstractStrategyChoose;")]),E("\n"),e("span",{class:"line"}),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," List<"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"TrainPurchaseTicketRespDTO"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> "),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"select"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(Integer "),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"trainType"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", PurchaseTicketReqDTO "),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"requestParam"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"       ......")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            List<"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"TrainPurchaseTicketRespDTO"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> aggregationResult "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," abstractStrategyChoose."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"chooseAndExecuteResp"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(buildStrategyKey, selectSeatDTO);")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t   ......")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),e("button",{class:"code-block-unfold-btn"})],-1)),a[68]||(a[68]=e("h4",{id:"抽象高铁购票模板基础服务",tabindex:"-1"},[E("抽象高铁购票模板基础服务 "),e("a",{class:"header-anchor",href:"#抽象高铁购票模板基础服务","aria-label":'Permalink to "抽象高铁购票模板基础服务"'},"​")],-1)),a[69]||(a[69]=e("div",{class:"language-java max-h-300px"},[e("button",{title:"Copy code",class:"copy"}),e("span",{class:"lang"},"java"),e("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[e("code",{"v-pre":""},[e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"@"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FunctionalInterface")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," interface"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," CommandLineRunner"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    void"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," run"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(String... "),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"args"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"throws"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Exception;")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"/**")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," * 购票顶级抽象接口，为后续火车、高铁、汽车、飞机等出行工具规定行为约束")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," */")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," interface"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," IPurchaseTicket"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),E("\n"),e("span",{class:"line"}),E("\n"),e("span",{class:"line"}),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," abstract"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," class"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," AbstractTrainPurchaseTicketTemplate"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," implements"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," IPurchaseTicket"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"CommandLineRunner"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"AbstractExecuteStrategy"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SelectSeatDTO"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", List<"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"TrainPurchaseTicketRespDTO"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">> {")]),E("\n"),e("span",{class:"line"}),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    private"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," DistributedCache distributedCache;")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    private"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," String ticketAvailabilityCacheUpdateType;")]),E("\n"),e("span",{class:"line"}),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    /**")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     * 选择座位")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     *")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     * "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"@param"),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," requestParam"),e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," 购票请求入参")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     * "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"@return"),e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," 乘车人座位")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     */")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    protected"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," abstract"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," List<"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"TrainPurchaseTicketRespDTO"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> "),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"selectSeats"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(SelectSeatDTO "),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"requestParam"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),E("\n"),e("span",{class:"line"}),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    protected"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," TrainSeatBaseDTO "),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"buildTrainSeatBaseDTO"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(SelectSeatDTO "),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"requestParam"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        return"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," TrainSeatBaseDTO."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"builder"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                ."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"trainId"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(requestParam."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getRequestParam"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getTrainId"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"())")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                ."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"departure"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(requestParam."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getRequestParam"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getDeparture"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"())")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                ."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"arrival"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(requestParam."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getRequestParam"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getArrival"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"())")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                ."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"chooseSeatList"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(requestParam."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getRequestParam"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getChooseSeats"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"())")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                ."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"passengerSeatDetails"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(requestParam."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getPassengerSeatDetails"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"())")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                ."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"build"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),E("\n"),e("span",{class:"line"}),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    @"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Override")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," List<"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"TrainPurchaseTicketRespDTO"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> "),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"executeResp"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(SelectSeatDTO "),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"requestParam"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        List<"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"TrainPurchaseTicketRespDTO"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> actualResult "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," selectSeats"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(requestParam);")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        // 扣减车厢余票缓存，扣减站点余票缓存")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        if"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (CollUtil."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"isNotEmpty"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(actualResult) "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"&&"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," !"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"StrUtil."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"equals"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(ticketAvailabilityCacheUpdateType, "),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"binlog"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            String trainId "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," requestParam."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getRequestParam"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getTrainId"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            String departure "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," requestParam."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getRequestParam"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getDeparture"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            String arrival "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," requestParam."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getRequestParam"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getArrival"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            String keySuffix "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," StrUtil."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"join"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"_"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", trainId, departure, arrival);")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            StringRedisTemplate stringRedisTemplate "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (StringRedisTemplate) distributedCache."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getInstance"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            stringRedisTemplate."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"opsForHash"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"increment"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(TRAIN_STATION_REMAINING_TICKET "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," keySuffix, String."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"valueOf"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(requestParam."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getSeatType"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()), "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"actualResult."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"size"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"());")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        return"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," actualResult;")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),E("\n"),e("span",{class:"line"}),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    @"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Override")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," void"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," run"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(String... "),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"args"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"throws"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Exception {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        distributedCache "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ApplicationContextHolder."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getBean"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(DistributedCache.class);")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ConfigurableEnvironment configurableEnvironment "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ApplicationContextHolder."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getBean"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(ConfigurableEnvironment.class);")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ticketAvailabilityCacheUpdateType "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," configurableEnvironment."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getProperty"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ticket.availability.cache-update.type"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'""'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),e("button",{class:"code-block-unfold-btn"})],-1)),a[70]||(a[70]=e("h4",{id:"高铁各座位类型购票组件",tabindex:"-1"},[E("高铁各座位类型购票组件 "),e("a",{class:"header-anchor",href:"#高铁各座位类型购票组件","aria-label":'Permalink to "高铁各座位类型购票组件"'},"​")],-1)),a[71]||(a[71]=e("div",{class:"language-java max-h-300px"},[e("button",{title:"Copy code",class:"copy"}),e("span",{class:"lang"},"java"),e("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[e("code",{"v-pre":""},[e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"/**")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," * 高铁商务座购票组件")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," */")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"@"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Component")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"@"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"RequiredArgsConstructor")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," class"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," TrainBusinessClassPurchaseTicketHandler"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," extends"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," AbstractTrainPurchaseTicketTemplate"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),E("\n"),e("span",{class:"line"}),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    private"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," final"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," SeatService seatService;")]),E("\n"),e("span",{class:"line"}),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    private"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," static"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," final"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Map<"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Character"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Integer"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> SEAT_Y_INT "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Map."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"of"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'A'"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'C'"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'F'"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),E("\n"),e("span",{class:"line"}),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    @"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Override")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," String "),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mark"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        return"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," VehicleTypeEnum.HIGH_SPEED_RAIN."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getName"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," VehicleSeatTypeEnum.BUSINESS_CLASS."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getName"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),E("\n"),e("span",{class:"line"}),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    @"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Override")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    protected"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," List<"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"TrainPurchaseTicketRespDTO"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> "),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"selectSeats"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(SelectSeatDTO "),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"requestParam"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ......")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t......")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),E("\n"),e("span",{class:"line"}),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"/**")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," * 高铁一等座购票组件")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," */")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"@"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Component")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"@"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"RequiredArgsConstructor")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," class"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," TrainFirstClassPurchaseTicketHandler"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," extends"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," AbstractTrainPurchaseTicketTemplate"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),E("\n"),e("span",{class:"line"}),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    private"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," final"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," SeatService seatService;")]),E("\n"),e("span",{class:"line"}),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    private"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," static"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," final"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Map<"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Character"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Integer"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> SEAT_Y_INT "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Map."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"of"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'A'"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'C'"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'D'"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'F'"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),E("\n"),e("span",{class:"line"}),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    @"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Override")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," String "),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mark"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        return"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," VehicleTypeEnum.HIGH_SPEED_RAIN."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getName"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," VehicleSeatTypeEnum.FIRST_CLASS."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getName"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),E("\n"),e("span",{class:"line"}),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    @"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Override")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    protected"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," List<"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"TrainPurchaseTicketRespDTO"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> "),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"selectSeats"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(SelectSeatDTO "),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"requestParam"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"         ......")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t......")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"/**")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," * 高铁二等座购票组件")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," */")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"@"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Component")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"@"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"RequiredArgsConstructor")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," class"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," TrainSecondClassPurchaseTicketHandler"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," extends"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," AbstractTrainPurchaseTicketTemplate"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),E("\n"),e("span",{class:"line"}),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    private"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," final"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," SeatService seatService;")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    private"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," final"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," DistributedCache distributedCache;")]),E("\n"),e("span",{class:"line"}),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    @"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Override")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," String "),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mark"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        return"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," VehicleTypeEnum.HIGH_SPEED_RAIN."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getName"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," VehicleSeatTypeEnum.SECOND_CLASS."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getName"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),E("\n"),e("span",{class:"line"}),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    @"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Override")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    protected"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," List<"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"TrainPurchaseTicketRespDTO"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> "),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"selectSeats"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(SelectSeatDTO "),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"requestParam"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"          ......")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"\t......")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),e("button",{class:"code-block-unfold-btn"})],-1)),a[72]||(a[72]=e("h4",{id:"应用选择器选择并执行具体策略处理器",tabindex:"-1"},[E("应用选择器选择并执行具体策略处理器 "),e("a",{class:"header-anchor",href:"#应用选择器选择并执行具体策略处理器","aria-label":'Permalink to "应用选择器选择并执行具体策略处理器"'},"​")],-1)),a[73]||(a[73]=e("div",{class:"language-java max-h-300px"},[e("button",{title:"Copy code",class:"copy"}),e("span",{class:"lang"},"java"),e("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[e("code",{"v-pre":""},[e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"/**")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," * 车票接口实现")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," */")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"@"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Slf4j")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"@"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Service")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"@"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"RequiredArgsConstructor")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," class"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," TicketServiceImpl"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," extends"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," ServiceImpl"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"TicketMapper"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"TicketDO"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"implements"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," TicketService"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    private"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," final"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," TrainSeatTypeSelector trainSeatTypeSelector;")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ......")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    @"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Override")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    @"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Transactional"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"rollbackFor"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Throwable.class)")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," TicketPurchaseRespDTO "),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"executePurchaseTickets"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(PurchaseTicketReqDTO "),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"requestParam"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") \t   {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ......")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        List<"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"TrainPurchaseTicketRespDTO"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> trainPurchaseTicketResults "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," trainSeatTypeSelector."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"select"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(trainDO."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getTrainType"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(), requestParam);")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ......")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ......")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),e("button",{class:"code-block-unfold-btn"})],-1)),a[74]||(a[74]=e("h3",{id:"登录选择",tabindex:"-1"},[E("登录选择 "),e("a",{class:"header-anchor",href:"#登录选择","aria-label":'Permalink to "登录选择"'},"​")],-1)),a[75]||(a[75]=e("h4",{id:"账号登录",tabindex:"-1"},[E("账号登录 "),e("a",{class:"header-anchor",href:"#账号登录","aria-label":'Permalink to "账号登录"'},"​")],-1)),a[76]||(a[76]=e("h5",{id:"登录策略执行处理器",tabindex:"-1"},[E("登录策略执行处理器 "),e("a",{class:"header-anchor",href:"#登录策略执行处理器","aria-label":'Permalink to "登录策略执行处理器"'},"​")],-1)),a[77]||(a[77]=e("div",{class:"language-java max-h-300px"},[e("button",{title:"Copy code",class:"copy"}),e("span",{class:"lang"},"java"),e("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[e("code",{"v-pre":""},[e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"@"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Component")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"@"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"AllArgsConstructor")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," class"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," AccountLoginCommandHandler"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," implements"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," AbstractExecuteStrategy"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"UserLoginCommand"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"UserLoginRespDTO"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    private"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," final"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," DistributedCache distributedCache;")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    private"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," final"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," CustomerUserRepository customerUserRepository;")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    @"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Override")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," String "),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mark"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        return"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," UserLoginTypeEnum.USER_LOGIN_ACCOUNT."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"toString"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    @"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Override")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," UserLoginRespDTO "),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"executeResp"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(UserLoginCommand "),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"requestParam"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        CustomerUser customerUser "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," CustomerUser."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"builder"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                ."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"accountNumber"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"new"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," CustomerUserAccountNumber"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(requestParam."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getAccountNumber"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()))")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                ."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"password"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"new"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," CustomerUserPassword"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(requestParam."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getPassword"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()))")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                ."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"build"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        CustomerUser actual "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," customerUserRepository."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"findByAccountNumber"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(requestParam."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getAccountNumber"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"());")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        if"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (actual "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"=="),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," null"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            throw"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," new"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," ClientException"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"用户名不存在"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        if"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"!"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Objects."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"equals"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(customerUser."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getPassword"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(), actual."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getPassword"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"())) {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            throw"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," new"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," ClientException"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"用户名密码错误"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        String accessToken "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," actual."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"generateAccessToken"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        distributedCache."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"put"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(accessToken, JSON."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"toJSONString"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(actual), "),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"30"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", TimeUnit.MINUTES);")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        return"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," new"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UserLoginRespDTO"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(actual."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getCustomerUserId"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(), actual."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getUsername"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(), actual."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getAccountNumber"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(), accessToken);")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),e("button",{class:"code-block-unfold-btn"})],-1)),a[78]||(a[78]=e("h4",{id:"邮箱登录",tabindex:"-1"},[E("邮箱登录 "),e("a",{class:"header-anchor",href:"#邮箱登录","aria-label":'Permalink to "邮箱登录"'},"​")],-1)),a[79]||(a[79]=e("h5",{id:"登录策略执行处理器-1",tabindex:"-1"},[E("登录策略执行处理器 "),e("a",{class:"header-anchor",href:"#登录策略执行处理器-1","aria-label":'Permalink to "登录策略执行处理器"'},"​")],-1)),a[80]||(a[80]=e("div",{class:"language-java max-h-300px"},[e("button",{title:"Copy code",class:"copy"}),e("span",{class:"lang"},"java"),e("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[e("code",{"v-pre":""},[e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"@"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Component")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"@"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"AllArgsConstructor")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," class"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," MailLoginCommandHandler"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," implements"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," AbstractExecuteStrategy"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"UserLoginCommand"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"UserLoginRespDTO"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    private"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," final"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," DistributedCache distributedCache;")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    private"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," final"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," CustomerUserRepository customerUserRepository;")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    @"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Override")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," String "),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mark"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        return"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," UserLoginTypeEnum.USER_LOGIN_MAIL."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"name"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    @"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Override")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," UserLoginRespDTO "),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"executeResp"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(UserLoginCommand "),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"requestParam"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        CustomerUser customerUser "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," CustomerUser."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"builder"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"verifyCode"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(requestParam."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getMailValidCode"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"())."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"build"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        // 获取缓存中的验证码")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        String verifyCode "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," distributedCache."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"get"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(CacheUtil."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"buildKey"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(LOGIN_USER_VERIFY_CODE, requestParam."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getMail"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()), String.class);")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        // 检查验证码正确性")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        customerUser."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"checkoutValidCode"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(verifyCode);")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        CustomerUser actual "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," customerUserRepository."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"findByMail"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(requestParam."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getMail"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"());")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        String accessToken "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," actual."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"generateAccessToken"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //todo")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        distributedCache."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"put"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(accessToken, JSON."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"toJSONString"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(actual), "),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"30"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", TimeUnit.MINUTES);")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        return"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," new"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UserLoginRespDTO"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(actual."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getCustomerUserId"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(), actual."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getUsername"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(), actual."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getAccountNumber"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(), accessToken);")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),e("button",{class:"code-block-unfold-btn"})],-1)),a[81]||(a[81]=e("h5",{id:"抽象邮箱验证码发送",tabindex:"-1"},[E("抽象邮箱验证码发送 "),e("a",{class:"header-anchor",href:"#抽象邮箱验证码发送","aria-label":'Permalink to "抽象邮箱验证码发送"'},"​")],-1)),a[82]||(a[82]=e("div",{class:"language-java max-h-300px"},[e("button",{title:"Copy code",class:"copy"}),e("span",{class:"lang"},"java"),e("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[e("code",{"v-pre":""},[e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," abstract"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," class"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," AbstractMailVerifySender"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    @"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Value"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"${customer.user.register.verify.sender}"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    private"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," String sender;")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    @"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Value"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"${customer.user.register.verify.template-id}"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    private"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," String templateId;")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    @"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Resource")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    private"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," MessageSendRemoteService messageSendRemoteService;")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    @"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Resource")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    private"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," DistributedCache distributedCache;")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    /**")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     * 用户注册验证码超时时间")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     */")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    private"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," static"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," final"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," long"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," REGISTER_USER_VERIFY_CODE_TIMEOUT "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 300000"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    /**")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     * 获取缓存前置 Key")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     *")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     * "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"@return")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     */")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    protected"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," abstract"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," String "),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getCachePrefixKey"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    /**")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     * 邮箱验证发送")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     *")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     * "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"@param"),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}}," requestParam")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     */")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," void"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mailVerifySend"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(UserVerifyCodeCommand "),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"requestParam"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        String verifyCode "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," RandomUtil."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"randomNumbers"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"6"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        // 模板方法模式: 验证码放入缓存，并设置超时时间")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        distributedCache."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"put"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(CacheUtil."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"buildKey"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getCachePrefixKey"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(), requestParam."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getReceiver"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()), verifyCode, REGISTER_USER_VERIFY_CODE_TIMEOUT);")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        MailSendRemoteCommand remoteCommand "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," new"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," MailSendRemoteCommand"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        remoteCommand."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"setTitle"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"邮箱验证码提醒"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                ."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"setReceiver"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(requestParam."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getReceiver"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"())")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                ."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"setSender"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(sender)")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                ."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"setTemplateId"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(templateId)")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                ."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"setParamList"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(Lists."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"newArrayList"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(verifyCode));")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        messageSendRemoteService."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mailMessageSend"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(remoteCommand);")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),e("button",{class:"code-block-unfold-btn"})],-1)),a[83]||(a[83]=e("h5",{id:"用户注册使用邮箱验证策略执行处理器",tabindex:"-1"},[E("用户注册使用邮箱验证策略执行处理器 "),e("a",{class:"header-anchor",href:"#用户注册使用邮箱验证策略执行处理器","aria-label":'Permalink to "用户注册使用邮箱验证策略执行处理器"'},"​")],-1)),a[84]||(a[84]=e("div",{class:"language-java max-h-300px"},[e("button",{title:"Copy code",class:"copy"}),e("span",{class:"lang"},"java"),e("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[e("code",{"v-pre":""},[e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"@"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Component")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"@"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"RequiredArgsConstructor")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," class"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," MailRegisterVerifyCommandHandler"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," extends"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," AbstractMailVerifySender"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," implements"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," AbstractExecuteStrategy"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"UserVerifyCodeCommand"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Void"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    @"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Override")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," String "),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mark"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        return"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "customer_user_register_mail"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    @"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Override")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," void"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," execute"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(UserVerifyCodeCommand "),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"requestParam"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        mailVerifySend"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(requestParam);")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    @"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Override")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    protected"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," String "),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getCachePrefixKey"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        return"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," CacheConstant.REGISTER_USER_VERIFY_CODE;")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),e("button",{class:"code-block-unfold-btn"})],-1)),a[85]||(a[85]=e("h5",{id:"用户登录使用邮箱验证策略执行处理器",tabindex:"-1"},[E("用户登录使用邮箱验证策略执行处理器 "),e("a",{class:"header-anchor",href:"#用户登录使用邮箱验证策略执行处理器","aria-label":'Permalink to "用户登录使用邮箱验证策略执行处理器"'},"​")],-1)),a[86]||(a[86]=e("div",{class:"language-java max-h-300px"},[e("button",{title:"Copy code",class:"copy"}),e("span",{class:"lang"},"java"),e("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[e("code",{"v-pre":""},[e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"@"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Component")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," class"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," MailLoginVerifyCommandHandler"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," extends"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," AbstractMailVerifySender"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," implements"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," AbstractExecuteStrategy"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"UserVerifyCodeCommand"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Void"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    @"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Override")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," String "),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mark"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        return"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "customer_user_login_verify_mail"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    @"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Override")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," void"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," execute"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(UserVerifyCodeCommand "),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"requestParam"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        mailVerifySend"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(requestParam);")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    @"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Override")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    protected"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," String "),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getCachePrefixKey"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        return"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," CacheConstant.LOGIN_USER_VERIFY_CODE;")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),e("button",{class:"code-block-unfold-btn"})],-1)),a[87]||(a[87]=e("h5",{id:"c-端用户接口选择并执行具体策略处理器",tabindex:"-1"},[E("C 端用户接口选择并执行具体策略处理器 "),e("a",{class:"header-anchor",href:"#c-端用户接口选择并执行具体策略处理器","aria-label":'Permalink to "C 端用户接口选择并执行具体策略处理器"'},"​")],-1)),a[88]||(a[88]=e("div",{class:"language-java max-h-300px"},[e("button",{title:"Copy code",class:"copy"}),e("span",{class:"lang"},"java"),e("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[e("code",{"v-pre":""},[e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"@"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Service")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"@"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"AllArgsConstructor")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," class"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," CustomerUserServiceImpl"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," implements"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," CustomerUserService"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    private"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," final"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," DistributedCache distributedCache;")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    private"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," final"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," AbstractStrategyChoose abstractStrategyChoose;")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    private"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," final"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," CommandHandler<"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"UserRegisterCommand"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"UserRegisterRespDTO"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> customerUserRegisterCommandHandler;")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    @"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Override")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," void"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," verifyCodeSend"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(UserVerifyCodeCommand "),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"requestParam"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        String mark "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," requestParam."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getType"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "_"'),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," +"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," requestParam."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getPlatform"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        /**")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"         * site")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"         * {@link MailLoginVerifyCommandHandler}")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"         * {@link MailRegisterVerifyCommandHandler}")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"         * ...")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"         */")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        // 策略模式: 根据 mark 选择用户登录或者注册逻辑")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        abstractStrategyChoose."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"chooseAndExecute"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(mark, requestParam);")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    @"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Override")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," UserRegisterRespDTO "),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"register"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(UserRegisterCommand "),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"requestParam"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        UserRegisterRespDTO result "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," customerUserRegisterCommandHandler."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"handler"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(requestParam);")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        return"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," result;")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    @"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Override")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," UserLoginRespDTO "),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"login"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(UserLoginCommand "),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"requestParam"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        /**")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"         * site")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"         * {@link MailLoginCommandHandler}")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"         */")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        return"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," abstractStrategyChoose."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"chooseAndExecuteResp"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(requestParam."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getLoginType"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(), requestParam);")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    @"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Override")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," UserLoginRespDTO "),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"checkLogin"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(String "),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"accessToken"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        return"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," distributedCache."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"get"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(accessToken, UserLoginRespDTO.class);")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    @"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Override")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," void"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," logout"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(String "),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"accessToken"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        if"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (StrUtil."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"isNotBlank"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(accessToken)) {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            distributedCache."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"delete"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(accessToken);")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),e("button",{class:"code-block-unfold-btn"})],-1)),a[89]||(a[89]=e("p",null,[e("strong",null,"C 端用户注册处理器")],-1)),a[90]||(a[90]=e("div",{class:"language-java max-h-300px"},[e("button",{title:"Copy code",class:"copy"}),e("span",{class:"lang"},"java"),e("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[e("code",{"v-pre":""},[e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"@"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Component")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"@"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"AllArgsConstructor")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," class"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," CustomerUserRegisterCommandHandler"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," implements"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," CommandHandler"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"UserRegisterCommand"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"UserRegisterRespDTO"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    private"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," final"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," CustomerUserRepository customerUserRepository;")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    private"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," final"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," CustomerUserToDTOAssembler customerUserAssembler;")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    private"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," final"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," DistributedCache distributedCache;")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    @"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Override")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," UserRegisterRespDTO "),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"handler"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(UserRegisterCommand "),e("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"requestParam"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        CustomerUser customerUser "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," CustomerUser."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"builder"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                ."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"username"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"new"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," CustomerUserName"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(requestParam."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getUsername"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()))")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                ."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"phone"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"new"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," CustomerUserPhone"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(requestParam."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getPhone"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()))")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                ."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"accountNumber"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"new"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," CustomerUserAccountNumber"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(requestParam."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getAccountNumber"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()))")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                ."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"password"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"new"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," CustomerUserPassword"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(requestParam."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getPassword"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()))")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                ."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mail"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"new"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," CustomerUserMail"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(requestParam."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getMail"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()))")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                ."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"receiver"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(requestParam."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getMail"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"())")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                ."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"verifyCode"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(requestParam."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getMailValidCode"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"())")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                ."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"build"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        // 获取缓存中的验证码")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        String buildKey "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," CacheUtil."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"buildKey"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(REGISTER_USER_VERIFY_CODE, customerUser."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"getReceiver"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"());")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        String verifyCode "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," distributedCache."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"get"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(buildKey, String.class);")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        // 检查验证码正确性")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        customerUser."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"checkoutValidCode"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(verifyCode);")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        CustomerUser result "),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," customerUserRepository."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"register"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(customerUser);")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        // 删除缓存验证码")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        distributedCache."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"delete"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(buildKey);")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        return"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," customerUserAssembler."),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"customerUserToUserRegisterRespDTO"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(result);")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),E("\n"),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),e("button",{class:"code-block-unfold-btn"})],-1)),a[91]||(a[91]=e("h2",{id:"文末总结",tabindex:"-1"},[E("文末总结 "),e("a",{class:"header-anchor",href:"#文末总结","aria-label":'Permalink to "文末总结"'},"​")],-1)),a[92]||(a[92]=e("p",null,"总的来说，策略模式是一种非常有用的设计模式，它可以帮助我们在运行时动态地选择不同的算法实现，从而提高代码的灵活性、可维护性和可扩展性。",-1)),a[93]||(a[93]=e("p",null,"通过将算法实现封装在不同的策略类中，并定义一个策略接口来描述算法，策略模式使得客户端可以独立于算法实现进行编程，同时也可以方便地更换算法实现或者添加新的算法实现。",-1)),a[94]||(a[94]=e("p",null,"策略模式的优点包括提高代码的灵活性、可维护性、可扩展性和复用性，同时也可以避免使用大量的条件语句和提高代码的可读性。",-1)),a[95]||(a[95]=e("p",null,"需要注意的是，在使用策略模式时需要遵循一些设计原则，例如开闭原则、单一职责原则和依赖倒置原则等，以确保代码的高内聚性和低耦合度。",-1)),a[96]||(a[96]=e("p",null,"此外，策略模式适用于需要在运行时动态选择不同算法实现的场景，如果算法实现不需要动态切换或者算法实现较为简单，策略模式可能会显得过于复杂。",-1)),a[97]||(a[97]=e("p",null,"因此，在使用策略模式时需要根据具体的需求和场景进行判断和选择。",-1))]),"main-header":k(()=>[t(s.$slots,"main-header")]),"main-header-after":k(()=>[t(s.$slots,"main-header-after")]),"main-nav":k(()=>[t(s.$slots,"main-nav")]),"main-content-before":k(()=>[t(s.$slots,"main-content-before")]),"main-content":k(()=>[t(s.$slots,"main-content")]),"main-content-after":k(()=>[t(s.$slots,"main-content-after")]),"main-nav-before":k(()=>[t(s.$slots,"main-nav-before")]),"main-nav-after":k(()=>[t(s.$slots,"main-nav-after")]),comment:k(()=>[t(s.$slots,"comment")]),footer:k(()=>[t(s.$slots,"footer")]),aside:k(()=>[t(s.$slots,"aside")]),"aside-custom":k(()=>[t(s.$slots,"aside-custom")]),default:k(()=>[t(s.$slots,"default")]),_:3},8,["frontmatter"])}}};export{y as default,g as usePageData};
