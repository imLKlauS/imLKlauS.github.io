import{j as e,s as a,c as t,a as l,t as r,d as s,e as o,_ as n,o as i,f as c,g as u,h as p}from"./app.jVxXoMEc.js";import{_ as y}from"./YunPostCollapse.vue_vue_type_style_index_0_lang.DTq2thwg.js";import"./chunks/@vueuse/motion.Bi21X01W.js";import{a as g,u as m}from"./chunks/vue-router.i5m2KSc9.js";import{a9 as v,U as d,bf as f,X as _,Z as k,bB as h,b3 as b,F as x,Y as j,b_ as $,_ as C,bt as I,bb as w,aX as z,a6 as K,H as Y,bd as q,bh as A}from"./framework.qkCuDjfX.js";import{a as U,u as B}from"./animation.B5FAgeUG.js";import{u as P}from"./chunks/vue-i18n.DjzvFo6n.js";import{_ as R}from"./YunPageHeader.vue_vue_type_script_setup_true_lang.B96Jt3V3.js";import"./chunks/dayjs.C7ooQVqs.js";import"./chunks/pinia.g94V4AzZ.js";import"./chunks/nprogress.D1cScqWe.js";/* empty css                    */import"./index.BRXJGymZ.js";const H={class:"st-text"},L=v({__name:"YunCategoryChildItem",props:{i:{},categoryItem:{},parentKey:{}},setup(t){const{$tO:l}=e(),r=g(),s=d(()=>{const e=r.query.category||"";return Array.isArray(e)?[e]:e.split("/")});return(e,r)=>{const o=S,n=f("RouterLink");return h(a)(t.categoryItem)?(b(),_(o,{key:0,"parent-key":t.parentKey?`${t.parentKey}/${t.categoryItem.name}`:t.categoryItem.name,category:t.categoryItem,collapsable:!s.value.includes(t.categoryItem.name)},null,8,["parent-key","category","collapsable"])):(b(),k(x,{key:1},[t.categoryItem.title?(b(),_(n,{key:0,to:t.categoryItem.path||"",class:"inline-flex items-center gap-2 px-3 py-2 w-full rounded",hover:"bg-black/5"},{default:$(()=>[r[0]||(r[0]=C("div",{"i-ri-file-text-line":""},null,-1)),C("span",H,I(h(l)(t.categoryItem.title)),1)]),_:1},8,["to"])):j("v-if",!0)],64))}}}),O={key:0,"i-ri-folder-add-line":""},V={key:1,class:"text-$va-c-primary dark:text-$va-c-primary-lighter","i-ri-folder-reduce-line":""},X={class:"rounded-full px-1.5 bg-black/5 shadow-sm op-60",text:"xs"},F={key:0},S=v({__name:"YunCategory",props:{i:{},parentKey:{},category:{},level:{},collapsable:{type:Boolean,default:!0}},setup(a){const t=a,l=m(),r=w(t.collapsable),{t:s}=P(),{$t:o}=e(),n=w(),{show:i}=U(n);z(()=>{const e=document.querySelector(".post-collapse-container");e&&(n.value=e)});const c=w();return 1===t.level&&B(c,{i:t.i||0,y:20,duration:200}),(e,t)=>{const n=L;return b(),k(x,null,[C("li",{ref_key:"categoryRef",ref:c,class:"category-list-item inline-flex items-center cursor-pointer w-full gap-2 px-3 py-2 rounded",hover:"bg-black/5"},[C("span",{class:"folder-action inline-flex",hover:"text-$va-c-primary-lighter",onClick:t[0]||(t[0]=e=>r.value=!r.value)},[r.value?(b(),k("div",O)):(b(),k("div",V))]),C("span",{class:"category-name inline-flex items-center gap-2 w-full",onClick:t[1]||(t[1]=e=>{return t=a.parentKey,r.value=!1,l.push({query:{category:t}}),void i();var t})},[C("span",null,I("Uncategorized"===a.category.name?h(s)("category.uncategorized"):h(o)(a.category.name)),1),C("span",X,I(a.category.total),1)])],512),K(Y,{"enter-active-class":"v-enter-active","enter-from-class":"v-enter-from","leave-active-class":"v-leave-active","leave-to-class":"v-leave-to",duration:{enter:200,leave:0}},{default:$(()=>[r.value?j("v-if",!0):(b(),k("ul",F,[(b(!0),k(x,null,q(a.category.children.values(),(e,t)=>(b(),k("li",{key:t,class:"post-list-item text-$va-c-text",m:"l-4",hover:"text-$va-c-primary-lighter"},[K(n,{i:t,"category-item":e,"parent-key":a.parentKey},null,8,["i","category-item","parent-key"])]))),128))]))]),_:1})],64)}}}),T={flex:"~ col"},W=v({__name:"YunCategories",props:{categories:{},level:{default:0},collapsable:{type:Boolean,default:!0}},setup(e){const a=g(),t=d(()=>{const e=a.query.category||"";return Array.isArray(e)?[e]:e.split("/")});return(a,l)=>{const r=S;return b(),k("div",T,[(b(!0),k(x,null,q(e.categories.values(),(a,l)=>(b(),k("ul",{key:a.name,class:"category-list"},[K(r,{i:l,"parent-key":a.name,category:a,level:e.level+1,collapsable:!t.value.includes(a.name)},null,8,["i","parent-key","category","level","collapsable"])]))),128))])}}}),Z={text:"center",class:"yun-text-light",p:"2"},D=v({__name:"categories",setup(a){const{t:m}=P(),v=t(),w=l(),z=g(),q=d(()=>z.query.category||""),U=r(),B=d(()=>(w.value.icon||(w.value.icon="i-ri-folder-2-line"),w.value.icon)),H=d(()=>v.postList.filter(e=>e.categories&&"Uncategorized"!==q.value?"string"==typeof e.categories?e.categories===q.value:e.categories.join("/").startsWith(q.value)&&e.categories[0]===q.value.split("/")[0]:!e.categories&&"Uncategorized"===q.value&&void 0===e.categories)),{$tO:L}=e();return s([o({"@type":"CollectionPage"})]),(e,a)=>{const t=n,l=R,r=W,s=f("RouterView"),o=y,g=i,v=c,d=u,z=p;return b(),k(x,null,[K(d,null,{default:$(()=>[K(t),K(s,null,{default:$(({Component:e})=>[(b(),_(A(e),null,{"main-header":$(()=>[K(l,{title:h(L)(h(w).title)||h(m)("menu.categories"),icon:B.value,color:h(w).color,"page-title-class":h(w).pageTitleClass},null,8,["title","icon","color","page-title-class"])]),"main-content":$(()=>[K(Y,{"enter-active-class":"animate-fade-in animate-duration-400",appear:""},{default:$(()=>[C("div",Z,I(h(m)("counter.categories",Array.from(h(U).children).length)),1)]),_:1}),K(r,{categories:h(U).children},null,8,["categories"]),K(s)]),"main-nav-before":$(()=>[q.value?(b(),_(g,{key:0,class:"post-collapse-container",m:"t-4",w:"full"},{default:$(()=>[K(l,{m:"t-10",title:"Uncategorized"===q.value?h(m)("category.uncategorized"):q.value.split("/").join(" / "),icon:"i-ri-folder-open-line"},null,8,["title"]),K(o,{w:"full",m:"b-4",p:"x-20 lt-sm:x-5",posts:H.value},null,8,["posts"])]),_:1})):j("v-if",!0)]),_:1}))]),_:1}),K(v)]),_:1}),K(z)],64)}}});export{D as default};
