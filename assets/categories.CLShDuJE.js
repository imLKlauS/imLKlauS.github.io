import{j as e,s as a,c as t,a as l,t as r,d as s,e as o,_ as n,o as i,f as c,g as u,h as p}from"./app.DxsXqPDj.js";import{_ as y}from"./YunPostCollapse.vue_vue_type_style_index_0_lang.nd1tkCUz.js";import"./chunks/@vueuse/motion.BrTBiDBP.js";import{a as g,u as m}from"./chunks/vue-router.iuc03XPI.js";import{I as v,A as d,a0 as f,a1 as _,a8 as k,F as h,a2 as x,L as j,a6 as b,a3 as I,a5 as C,ab as $,H as w,D as z,W as A,ag as K,ae as q,ad as Y}from"./framework.CSpzLJwA.js";import{a as U,u as L}from"./animation.X1SFnks8.js";import{u as P}from"./chunks/vue-i18n.C5QQbedb.js";import{_ as R}from"./YunPageHeader.vue_vue_type_script_setup_true_lang.DIveis5r.js";import"./chunks/dayjs.Dto65haK.js";import"./chunks/pinia.CKttsWmm.js";import"./chunks/nprogress.BEPa78Un.js";/* empty css                    */import"./index.BRXJGymZ.js";const B={class:"st-text"},H=v({__name:"YunCategoryChildItem",props:{i:{},categoryItem:{},parentKey:{}},setup(t){const{$tO:l}=e(),r=g(),s=d(()=>{const e=r.query.category||"";return Array.isArray(e)?[e]:e.split("/")});return(e,r)=>{const o=S,n=f("RouterLink");return h(a)(t.categoryItem)?(x(),_(o,{key:0,"parent-key":t.parentKey?`${t.parentKey}/${t.categoryItem.name}`:t.categoryItem.name,category:t.categoryItem,collapsable:!s.value.includes(t.categoryItem.name)},null,8,["parent-key","category","collapsable"])):(x(),k(j,{key:1},[t.categoryItem.title?(x(),_(n,{key:0,to:t.categoryItem.path||"",class:"inline-flex items-center gap-2 px-3 py-2 w-full rounded",hover:"bg-black/5"},{default:I(()=>[r[0]||(r[0]=C("div",{"i-ri-file-text-line":""},null,-1)),C("span",B,$(h(l)(t.categoryItem.title)),1)]),_:1},8,["to"])):b("v-if",!0)],64))}}}),O={key:0,"i-ri-folder-add-line":""},W={key:1,class:"text-$va-c-primary dark:text-$va-c-primary-lighter","i-ri-folder-reduce-line":""},D={class:"rounded-full px-1.5 bg-black/5 shadow-sm op-60",text:"xs"},F={key:0},S=v({__name:"YunCategory",props:{i:{},parentKey:{},category:{},level:{},collapsable:{type:Boolean,default:!0}},setup(a){const t=a,l=m(),r=w(t.collapsable),{t:s}=P(),{$t:o}=e(),n=w(),{show:i}=U(n);z(()=>{const e=document.querySelector(".post-collapse-container");e&&(n.value=e)});const c=w();return 1===t.level&&L(c,{i:t.i||0,y:20,duration:200}),(e,t)=>{const n=H;return x(),k(j,null,[C("li",{ref_key:"categoryRef",ref:c,class:"category-list-item inline-flex items-center cursor-pointer w-full gap-2 px-3 py-2 rounded",hover:"bg-black/5"},[C("span",{class:"folder-action inline-flex",hover:"text-$va-c-primary-lighter",onClick:t[0]||(t[0]=e=>r.value=!r.value)},[r.value?(x(),k("div",O)):(x(),k("div",W))]),C("span",{class:"category-name inline-flex items-center gap-2 w-full",onClick:t[1]||(t[1]=e=>{return t=a.parentKey,r.value=!1,l.push({query:{category:t}}),void i();var t})},[C("span",null,$("Uncategorized"===a.category.name?h(s)("category.uncategorized"):h(o)(a.category.name)),1),C("span",D,$(a.category.total),1)])],512),A(K,{"enter-active-class":"v-enter-active","enter-from-class":"v-enter-from","leave-active-class":"v-leave-active","leave-to-class":"v-leave-to",duration:{enter:200,leave:0}},{default:I(()=>[r.value?b("v-if",!0):(x(),k("ul",F,[(x(!0),k(j,null,q(a.category.children.values(),(e,t)=>(x(),k("li",{key:t,class:"post-list-item text-$va-c-text",m:"l-4",hover:"text-$va-c-primary-lighter"},[A(n,{i:t,"category-item":e,"parent-key":a.parentKey},null,8,["i","category-item","parent-key"])]))),128))]))]),_:1})],64)}}}),T={flex:"~ col"},V=v({__name:"YunCategories",props:{categories:{},level:{default:0},collapsable:{type:Boolean,default:!0}},setup(e){const a=g(),t=d(()=>{const e=a.query.category||"";return Array.isArray(e)?[e]:e.split("/")});return(a,l)=>{const r=S;return x(),k("div",T,[(x(!0),k(j,null,q(e.categories.values(),(a,l)=>(x(),k("ul",{key:a.name,class:"category-list"},[A(r,{i:l,"parent-key":a.name,category:a,level:e.level+1,collapsable:!t.value.includes(a.name)},null,8,["i","parent-key","category","level","collapsable"])]))),128))])}}}),E={text:"center",class:"yun-text-light",p:"2"},G=v({__name:"categories",setup(a){const{t:m}=P(),v=t(),w=l(),z=g(),q=d(()=>z.query.category||""),U=r(),L=d(()=>(w.value.icon||(w.value.icon="i-ri-folder-2-line"),w.value.icon)),B=d(()=>v.postList.filter(e=>e.categories&&"Uncategorized"!==q.value?"string"==typeof e.categories?e.categories===q.value:e.categories.join("/").startsWith(q.value)&&e.categories[0]===q.value.split("/")[0]:!e.categories&&"Uncategorized"===q.value&&void 0===e.categories)),{$tO:H}=e();return s([o({"@type":"CollectionPage"})]),(e,a)=>{const t=n,l=R,r=V,s=f("RouterView"),o=y,g=i,v=c,d=u,z=p;return x(),k(j,null,[A(d,null,{default:I(()=>[A(t),A(s,null,{default:I(({Component:e})=>[(x(),_(Y(e),null,{"main-header":I(()=>[A(l,{title:h(H)(h(w).title)||h(m)("menu.categories"),icon:L.value,color:h(w).color,"page-title-class":h(w).pageTitleClass},null,8,["title","icon","color","page-title-class"])]),"main-content":I(()=>[A(K,{"enter-active-class":"animate-fade-in animate-duration-400",appear:""},{default:I(()=>[C("div",E,$(h(m)("counter.categories",Array.from(h(U).children).length)),1)]),_:1}),A(r,{categories:h(U).children},null,8,["categories"]),A(s)]),"main-nav-before":I(()=>[q.value?(x(),_(g,{key:0,class:"post-collapse-container",m:"t-4",w:"full"},{default:I(()=>[A(l,{m:"t-10",title:"Uncategorized"===q.value?h(m)("category.uncategorized"):q.value.split("/").join(" / "),icon:"i-ri-folder-open-line"},null,8,["title"]),A(o,{w:"full",m:"b-4",p:"x-20 lt-sm:x-5",posts:B.value},null,8,["posts"])]),_:1})):b("v-if",!0)]),_:1}))]),_:1}),A(v)]),_:1}),A(z)],64)}}});export{G as default};
